<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to create a package, the fundamental unit of shareable, reusable, and reproducible R code.">
<title>R Packages (2e) - 23&nbsp; Releasing to CRAN</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./lifecycle.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script defer="" data-domain="r-pkgs.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Packages (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r-pkgs/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Getting started</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole-game.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Whole Game</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">System setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Package structure and state</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow101.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fundamental development workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package-within.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The package within</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Package components</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./misc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Other components</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Package metadata</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./description.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-mindset-background.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dependencies: Mindset and Background</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-in-practice.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dependencies: In Practice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Licensing</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Testing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Testing basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-design.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Designing your test suite</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-advanced.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Advanced testing techniques</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Documentation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Function documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Vignettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-markdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Other markdown files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./website.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Website</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Maintenance and distribution</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software-development-practices.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Software development practices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lifecycle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lifecycle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R-CMD-check.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"><code>R CMD check</code></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">23.1</span>  Introduction</a></li>
  <li><a href="#decide-the-release-type" id="toc-decide-the-release-type" class="nav-link" data-scroll-target="#decide-the-release-type"><span class="toc-section-number">23.2</span>  Decide the release type</a></li>
  <li><a href="#initial-cran-release-special-considerations" id="toc-initial-cran-release-special-considerations" class="nav-link" data-scroll-target="#initial-cran-release-special-considerations"><span class="toc-section-number">23.3</span>  Initial CRAN release: Special considerations</a></li>
  <li><a href="#keeping-up-with-change" id="toc-keeping-up-with-change" class="nav-link" data-scroll-target="#keeping-up-with-change"><span class="toc-section-number">23.4</span>  Keeping up with change</a></li>
  <li>
<a href="#double-r-cmd-checking" id="toc-double-r-cmd-checking" class="nav-link" data-scroll-target="#double-r-cmd-checking"><span class="toc-section-number">23.5</span>  Double <code>R CMD check</code>ing</a>
  <ul class="collapse">
<li><a href="#sec-cran-flavors-services" id="toc-sec-cran-flavors-services" class="nav-link" data-scroll-target="#sec-cran-flavors-services"><span class="toc-section-number">23.5.1</span>  CRAN check flavors and related services</a></li>
  </ul>
</li>
  <li>
<a href="#sec-release-revdep-checks" id="toc-sec-release-revdep-checks" class="nav-link" data-scroll-target="#sec-release-revdep-checks"><span class="toc-section-number">23.6</span>  Reverse dependency checks</a>
  <ul class="collapse">
<li><a href="#revdeps-and-breaking-changes" id="toc-revdeps-and-breaking-changes" class="nav-link" data-scroll-target="#revdeps-and-breaking-changes"><span class="toc-section-number">23.6.1</span>  Revdeps and breaking changes</a></li>
  </ul>
</li>
  <li><a href="#sec-release-cran-comments" id="toc-sec-release-cran-comments" class="nav-link" data-scroll-target="#sec-release-cran-comments"><span class="toc-section-number">23.7</span>  Update comments for CRAN</a></li>
  <li>
<a href="#sec-release-process" id="toc-sec-release-process" class="nav-link" data-scroll-target="#sec-release-process"><span class="toc-section-number">23.8</span>  The submission process</a>
  <ul class="collapse">
<li><a href="#sec-release-revdepcheck" id="toc-sec-release-revdepcheck" class="nav-link" data-scroll-target="#sec-release-revdepcheck"><span class="toc-section-number">23.8.1</span>  Reverse dependencies</a></li>
  </ul>
</li>
  <li><a href="#cran-policies" id="toc-cran-policies" class="nav-link" data-scroll-target="#cran-policies"><span class="toc-section-number">23.9</span>  CRAN policies</a></li>
  <li>
<a href="#sec-release-submission" id="toc-sec-release-submission" class="nav-link" data-scroll-target="#sec-release-submission"><span class="toc-section-number">23.10</span>  Release</a>
  <ul class="collapse">
<li><a href="#on-failure" id="toc-on-failure" class="nav-link" data-scroll-target="#on-failure"><span class="toc-section-number">23.10.1</span>  On failure</a></li>
  <li><a href="#binary-builds" id="toc-binary-builds" class="nav-link" data-scroll-target="#binary-builds"><span class="toc-section-number">23.10.2</span>  Binary builds</a></li>
  </ul>
</li>
  <li><a href="#post-release" id="toc-post-release" class="nav-link" data-scroll-target="#post-release"><span class="toc-section-number">23.11</span>  Prepare for next version</a></li>
  <li><a href="#promotion" id="toc-promotion" class="nav-link" data-scroll-target="#promotion"><span class="toc-section-number">23.12</span>  Publicising your package</a></li>
  <li><a href="#congratulations" id="toc-congratulations" class="nav-link" data-scroll-target="#congratulations"><span class="toc-section-number">23.13</span>  Congratulations!</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hadley/r-pkgs/edit/main/release.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-release" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="cell">
<div class="cell-output-display">
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Second edition
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are reading the work-in-progress second edition of R Packages. This chapter should be readable but is currently undergoing final polishing.</p>
</div>
</div>
</div>
</div>
<section id="introduction" class="level2" data-number="23.1"><h2 data-number="23.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">23.1</span> Introduction</h2>
<p>We’ve been calling out CRAN-specific concerns throughout the book, on our journey through the various parts of a package, such as tests and examples. In this chapter, we focus on the actual process of releasing a package to CRAN, for the first time or as an update.</p>
<p>The most concrete expression of our release process is the checklist produced by <code><a href="https://usethis.r-lib.org/reference/use_release_issue.html">usethis::use_release_issue()</a></code>. This checklist is constantly-evolving and is responsive to a few characteristics of the package, so don’t be shocked if you see something a bit different than what we show here. The main concerns are fairly timeless and we’ll use this checklist to help structure this chapter.</p>
<p>But first: note that you will have deep regrets if you approach preparing your package for CRAN as a separate activity that you do <em>after</em> completing the planned development for a release. This advice is extremely relevant here:</p>
<blockquote class="blockquote">
<p>If it hurts, do it more often. – Martin Fowler<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</blockquote>
<p>In the current context, interpret this to mean that you should be running <code>R CMD check</code> regularly, preferably on multiple platforms, and promptly addressing any issues that surface.</p>
<p>Why would you want to do something that is painful more often? Because it leads to less pain overall. First, solving 5 problems is more than 5 times as hard as solving 1. It’s demoralizing to be blocked by several errors and the potential for unsavory interactions between them makes each one harder to isolate and fix. Second, fast feedback tends to reduce your total number of mistakes. Once you learn some lesson the hard way, you are unlikely to make that same mistake dozens of times elsewhere in your package. Finally, practice makes perfect! With greater exposure, you will get better at interpreting and responding to <code>R CMD check</code> results.</p>
<p>Another natural reaction is: why don’t I eliminate this pain completely by not releasing my package on CRAN at all? For certain types of packages, this may be the right call. One such example is a personal package of helper functions. Another example is a package that supports a specific organization, coupled with a reasonable method of distributing that package to its users. The main reason to have your package on CRAN is to give your package greater reach. The vast majority of R users only install packages from CRAN, either due to personal or company policy or just from a lack of awareness about alternatives. CRAN provides discoverability, ease of installation, and a stamp of authenticity. The CRAN submission process can be frustrating, but it has many payoffs, and this chapter aims to make it as painless as possible.</p>
<p>The release process we describe here is best used as a pre-flight checklist, that complements your ongoing efforts to keep your package passing <code>R CMD check</code> cleanly and CRAN-compliant. There are two big realizations that often come with a CRAN release process:</p>
<ul>
<li><p>If you’ve been turning a blind eye to WARNINGs and ERRORs from <code>R CMD check</code>, you really do have to study and eliminate those now. You should even eliminate as many NOTEs as possible.</p></li>
<li><p>Even if your package passes <code>R CMD check</code> cleanly on your machine, it can be eye-opening when it leaves these cozy, familiar surroundings and is, instead, checked on a remote server, configured by someone else, running an entirely different operating system. This is why it is so valuable to use a continuous integration service like GitHub Actions to regularly check your package on macOS, Windows, and Linux.</p></li>
</ul>
<p><em>TODO: update this list once the rest of the chapter has been revised.</em></p>
<p>To get your package ready to release, follow these steps:</p>
<ol type="1">
<li>Pick a version number.</li>
<li>Run and document <code>R CMD check</code>.</li>
<li>Check that you’re aligned with CRAN policies.</li>
<li>Update <code>README.md</code> and <code>NEWS.md</code>.</li>
<li>Submit the package to CRAN.</li>
<li>Prepare for the next version by updating version numbers.</li>
<li>Publicise the new version.</li>
</ol></section><section id="decide-the-release-type" class="level2" data-number="23.2"><h2 data-number="23.2" class="anchored" data-anchor-id="decide-the-release-type">
<span class="header-section-number">23.2</span> Decide the release type</h2>
<p>When you call <code>use_release_issue()</code>, you’ll be asked which type of release you intend to make.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">use_release_issue</span>()</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to <span class="st">'/Users/jenny/rrr/usethis'</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Current version is <span class="dv">2</span>.<span class="dv">1</span>.<span class="dv">6</span>.<span class="fl">9000.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>What should the release version be? (<span class="dv">0</span> to exit) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span> major <span class="sc">-</span><span class="ot">-&gt;</span> <span class="dv">3</span>.<span class="fl">0.0</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span> minor <span class="sc">-</span><span class="ot">-&gt;</span> <span class="dv">2</span>.<span class="fl">2.0</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">:</span> patch <span class="sc">-</span><span class="ot">-&gt;</span> <span class="dv">2</span>.<span class="fl">1.7</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Selection<span class="sc">:</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The immediate question feels quite mechanical: which component of the version number do you want to increment? But remember that we discussed the substantive differences in release types in <a href="lifecycle.html#sec-lifecycle-release-type"><span>Section&nbsp;22.6</span></a>.</p>
<p>In our workflow, this planned version number is recorded in the GitHub issue that holds the release checklist, but we don’t actually increment the version in <code>DESCRIPTION</code> until later in the process. However, it’s important to declare the release type up front, because the process (and, therefore, the checklist) looks different for, e.g., a patch release versus a major release.</p>
</section><section id="initial-cran-release-special-considerations" class="level2" data-number="23.3"><h2 data-number="23.3" class="anchored" data-anchor-id="initial-cran-release-special-considerations">
<span class="header-section-number">23.3</span> Initial CRAN release: Special considerations</h2>
<p>Every new package receives a higher level of scrutiny from CRAN. In addition to the usual automated checks, new packages are also reviewed by a human, which inevitably introduces a certain amount of subjectivity and randomness. There are many packages on CRAN that would not be accepted in their current form, if submitted today as a completely new package. This isn’t meant to discourage you. But you should be aware that, just because you see some practice in an established package (or even in base R), that doesn’t mean you can do the same in your new package.</p>
<p>Luckily, the community maintains lists of common “gotchas” for new packages. If your package is not yet on CRAN, the checklist begins with a special section that reflects this recent collective wisdom. Attending to these checklist items has dramatically improved our team’s success rate for initial submissions.</p>
<p>First release</p>
<ul class="task-list">
<li>
<input type="checkbox" disabled=""><code><a href="https://usethis.r-lib.org/reference/use_news_md.html">usethis::use_news_md()</a></code>
</li>
<li>
<input type="checkbox" disabled=""><code><a href="https://usethis.r-lib.org/reference/use_cran_comments.html">usethis::use_cran_comments()</a></code>
</li>
<li>
<input type="checkbox" disabled="">Update (aspirational) install instructions in <code>README</code>
</li>
<li>
<input type="checkbox" disabled="">Proofread <code>Title:</code> and <code>Description:</code>
</li>
<li>
<input type="checkbox" disabled="">Check that all exported functions have <code>@returns</code> and <code>@examples</code>
</li>
<li>
<input type="checkbox" disabled="">Check that <code>Authors@R:</code> includes a copyright holder (role ‘cph’)</li>
<li>
<input type="checkbox" disabled="">Check licensing of included files</li>
<li>
<input type="checkbox" disabled="">Review <a href="https://github.com/DavisVaughan/extrachecks" class="uri">https://github.com/DavisVaughan/extrachecks</a>
</li>
</ul>
<p>If you don’t already have a <code>NEWS.md</code> file, you are encouraged to create one now with <code><a href="https://usethis.r-lib.org/reference/use_news_md.html">usethis::use_news_md()</a></code>. You’ll want this file eventually and this anticipates the fact that the description of your eventual GitHub release (TODO: add forward reference) is drawn from <code>NEWS.md</code>.</p>
<p><code><a href="https://usethis.r-lib.org/reference/use_cran_comments.html">usethis::use_cran_comments()</a></code> initiates a file to hold submission comments for your package. It’s very barebones at first, e.g.:</p>
<pre><code>## R CMD check results

0 errors | 0 warnings | 1 note

* This is a new release.</code></pre>
<p>In subsequent releases, this file becomes less pointless; for example, it is where we report the results of reverse dependency checks. This is not a place to wax on with long explanations about your submission. In general, you should eliminate the need for such explanations, especially for an initial submission.</p>
<p>We highly recommend that your package have a README file (<a href="other-markdown.html#sec-readme"><span>Section&nbsp;19.2</span></a>). If it does, this is a good time to check the installation instructions provided there. You may need to switch from instructions to install it from GitHub, in favor of installing from CRAN, in anticipation of your package’s acceptance.</p>
<p>The <code>Title</code> and <code>Description</code> fields of <code>DESCRIPTION</code> are real hotspots for nitpicking during CRAN’s human review. Carefully review the advice given in <a href="description.html#sec-description-title-and-description"><span>Section&nbsp;10.3</span></a>. Also check that <code>Authors@R</code> includes a copyright holder, indicated by the ‘cph’ role. The two most common scenarios are that you add ‘cph’ to your other roles (probably ‘cre’ and ‘aut’) or that you add your employer to <code>Authors@R:</code> with the ‘cph’ and, perhaps, ‘fnd’ role. (When you credit a funder via the ‘fnd’ role, they are acknowledged in the footer of your pkgdown website.)</p>
<p>Double check that each of your exported functions documents its return value (with the <code>@returns</code> tag, <a href="man.html#sec-man-returns"><span>Section&nbsp;17.5</span></a>) and has an <code>@examples</code> section (<a href="man.html#sec-man-examples"><span>Section&nbsp;17.6</span></a>). If you have examples that cannot be run on CRAN, you absolutely must use the techniques in <a href="man.html#sec-man-examples-dependencies-conditional-execution"><span>Section&nbsp;17.6.4</span></a> to express the relevant pre-conditions properly. Do not take shortcuts, such as having no examples, commenting out your examples, or putting all of your examples inside <code>\dontrun{}</code>.</p>
<p>If you have embedded third party code in your package, check that you are correctly abiding by and declaring its license (<a href="license.html#sec-code-you-bundle"><span>Section&nbsp;13.5</span></a>).</p>
<p>Finally, take advantage of any list of <em>ad hoc</em> checks that other package developers have recently experienced with CRAN. At the time of writing, <a href="https://github.com/DavisVaughan/extrachecks" class="uri">https://github.com/DavisVaughan/extrachecks</a> is a good place to find such first-hand reports. Reading such a list and preemptively modifying your package can often make the difference between a smooth acceptance and a frustrating process requiring multiple attempts.</p>
</section><section id="keeping-up-with-change" class="level2" data-number="23.4"><h2 data-number="23.4" class="anchored" data-anchor-id="keeping-up-with-change">
<span class="header-section-number">23.4</span> Keeping up with change</h2>
<p>Now we move into the main checklist items for a minor or major release of a package that is already on CRAN. Many of these items also appear in the checklist for a patch or initial release.</p>
<ul class="task-list">
<li>
<input type="checkbox" disabled="">Check current CRAN check results</li>
<li>
<input type="checkbox" disabled="">Check if any deprecation processes should be advanced, as described in <a href="https://lifecycle.r-lib.org/articles/communicate.html#gradual-deprecation">Gradual deprecation</a>
</li>
<li>
<input type="checkbox" disabled=""><a href="https://style.tidyverse.org/news.html#news-release">Polish NEWS</a>
</li>
<li>
<input type="checkbox" disabled=""><code><a href="https://rdrr.io/pkg/urlchecker/man/url_check.html">urlchecker::url_check()</a></code>
</li>
</ul>
<p>These first few items confirm that your package is keeping up with its surroundings and with itself. The first item, “Check current CRAN check results”, will be a hyperlink to the CRAN check results for version of the package that is currently on CRAN. If there are any WARNINGs or ERRORs or NOTEs there, you should investigate and determine what’s going on. Occasionally there can be an intermittent hiccup at CRAN, but generally speaking, any result other than “OK” is something you should address with the release you are preparing. You may discover your package is in a dysfunctional state due to changes in base R, CRAN policies, CRAN tooling, or packages you depend on.</p>
<p>If you are in the process of deprecating a function or an argument, a minor or major release is a good time to consider moving that process along as described in <a href="lifecycle.html#sec-lifecycle-stages-and-package"><span>Section&nbsp;22.8</span></a>. This is also a good time to look at all the <code>NEWS</code> bullets that have accumulated since the last release (“Polish NEWS”). Even if you’ve been diligent about jotting down all the news-worthy changes, chances are these bullets will benefit from some re-organization and editing for consistency and clarity (<a href="other-markdown.html#sec-news"><span>Section&nbsp;19.3</span></a>).</p>
<p>Another very important check is to run <code><a href="https://rdrr.io/pkg/urlchecker/man/url_check.html">urlchecker::url_check()</a></code>. CRAN’s URL checks are described at <a href="https://cran.r-project.org/web/packages/URL_checks.html" class="uri">https://cran.r-project.org/web/packages/URL_checks.html</a> and are implemented by code that ships with R itself. However, these checks are not exposed in a very usable way. The urlchecker package was created to address this and exposes CRAN’s URL-checking logic in the <code>url_check()</code> function. The main problems that surface tend to be URLs that don’t work anymore or URLs that use redirection. Obviously, you should update or remove any URL that no longer exists. Redirection, however, is trickier. If the status code is “301 Moved Permanently”, CRAN’s view is that your package should use the redirected URL. The problem is that many folks don’t follow <a href="https://www.rfc-editor.org/rfc/rfc7231#section-6.4.2">RFC7231</a> to the letter and use this sort of redirect even when they have a different intent, i.e.&nbsp;their intent is to publicize a provide a stable, user-friendly URL than then redirects to something less user-friendly or more volatile. If a legitimate URL you want to use runs afoul of CRAN’s checks, you’ll have to choose between a couple of less-than-appealing options. You could try to explain the situation to CRAN, but this requires human review, and thus is not recommended. Or you can convert such URLs into non-hyperlinked, verbatim text. Note also that even though urlchecker is using the same <em>code</em> as CRAN, your local results may still differ from CRAN’s, due to differences in other ambient conditions, such as environment variables and system capabilities.</p>
</section><section id="double-r-cmd-checking" class="level2" data-number="23.5"><h2 data-number="23.5" class="anchored" data-anchor-id="double-r-cmd-checking">
<span class="header-section-number">23.5</span> Double <code>R CMD check</code>ing</h2>
<p>Next come a couple of items related to <code>R CMD check</code>. Remember that this should not be the first time you’ve run <code>R CMD check</code> since the previous release! Hopefully, you are running <code>R CMD check</code> often during local development and are using a continuous integration service, like GitHub Actions. This is meant to be a last-minute, final reminder to double-check that all is well with your package:</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled=""><code>devtools::check(remote = TRUE, manual = TRUE)</code>. This happens on your primary development machine, presumably with the current version of R, and with some extra checks that are usually turned off to make day-to-day development faster.</p></li>
<li><p><input type="checkbox" disabled=""><code><a href="https://devtools.r-lib.org/reference/check_win.html">devtools::check_win_devel()</a></code>. This sends your package off to be checked with CRAN’s win-builder service, against the latest development version of R (a.k.a. r-devel). You should receive an e-mail within about 30 minutes with a link to the check results. It’s a good idea to check your package with r-devel, because base R and <code>R CMD check</code> are constantly evolving. Checking with r-devel is required by CRAN policy and it will be done as part of CRAN’s incoming checks. There is no point in skipping this step and hoping for the best.</p></li>
</ul>
<p>Note that the brevity of this list implicitly reflects that tidyverse packages are checked after every push via GitHub Actions, across multiple operating systems and versions of R (including the development version), and that most of the tidyverse team develops primarily on macOS. CRAN expects you to “make all reasonable efforts” to get your package working across all of the major R platforms and packages that don’t work on at least two will typically not be accepted.</p>
<p>The next subsection (<a href="#sec-cran-flavors-services"><span>Section&nbsp;23.5.1</span></a>) is optional reading with more details on the all the platforms that CRAN cares about and how you can access them. If your ongoing checks are more limited than ours, you may want to make up for that with more extensive pre-submission checks. You may also need this knowledge to troubleshoot a concrete problem that surfaces in CRAN’s checks, either for an incoming submission or for a package that’s already on CRAN.</p>
<p>When running <code>R CMD check</code> for a CRAN submission, you have to address any problems that show up:</p>
<ul>
<li><p>You must fix all <code>ERROR</code>s and <code>WARNING</code>s. A package that contains any errors or warnings will not be accepted by CRAN.</p></li>
<li><p>Eliminate as many <code>NOTE</code>s as possible. Each <code>NOTE</code> requires human oversight, which creates friction for both you and CRAN. If there are notes that you do not believe are important, it is almost always easier to fix them (even if the fix is a bit of a hack) than to persuade CRAN that they’re OK. See <a href="R-CMD-check.html"><span>Appendix&nbsp;A</span></a> for details on how to fix individual problems.</p></li>
<li>
<p>If you can’t eliminate a <code>NOTE</code>, address it in <code>cran-comments.md</code>, exlaining why you think it is spurious. We discuss this file further in <a href="#sec-release-cran-comments"><span>Section&nbsp;23.7</span></a>.</p>
<p>Note that there will always be one <code>NOTE</code> when you first submit your package. This reminds CRAN that this is a new submission and that they’ll need to do some extra checks. You can’t eliminate this <code>NOTE</code>, so just mention in <code>cran-comments.md</code> that this is your first submission.</p>
</li>
</ul>
<section id="sec-cran-flavors-services" class="level3" data-number="23.5.1"><h3 data-number="23.5.1" class="anchored" data-anchor-id="sec-cran-flavors-services">
<span class="header-section-number">23.5.1</span> CRAN check flavors and related services</h3>
<p>CRAN runs <code>R CMD check</code> on all contributed packages upon submission and on a regular basis, on multiple platforms or what they call “flavors”. You can see CRAN’s current check flavors here: <a href="https://cran.r-project.org/web/checks/check_flavors.html" class="uri">https://cran.r-project.org/web/checks/check_flavors.html</a>. There are various combinations of:</p>
<ul>
<li>Operating system and CPU: Windows, macOS (x86_64, arm64), Linux (various distributions)</li>
<li>R version: r-devel, r-release, r-oldrel</li>
<li>C, C++, FORTRAN compilers</li>
<li>Locale, in the sense of the <code>LC_CTYPE</code> environment variable (this is about which human language is in use and character encoding)</li>
</ul>
<p>CRAN’s check flavors almost certainly include platforms other than your preferred development environment(s), so you will eventually need to make an explicit effort to check and, perhaps, troubleshoot your package on these other flavors.</p>
<p>It would be impractical for individual package developers to personally maintain all of these testing platforms. Instead, we turn to various community- and CRAN-maintained resources for this. Here is a selection, in order of how central they are to our current practices:</p>
<ul>
<li><p>GitHub Actions (GHA), as covered in <a href="software-development-practices.html#sec-sw-dev-practices-gha"><span>Section&nbsp;21.3.1</span></a>.</p></li>
<li>
<p>R-hub builder (R-hub). This is a service supported by the R Consortium where package developers can submit their package for checks that replicate various CRAN check flavors.</p>
<p>You can use R-hub via a web interface (<a href="https://builder.r-hub.io" class="uri">https://builder.r-hub.io</a>) or, as we recommend, through the <a href="https://r-hub.github.io/rhub/">rhub R package</a>.</p>
<p><code>rhub::check_for_cran()</code> is a good option for a typical CRAN package and is morally similar to the GHA workflow configured by <code>usethis::use_github_action("check-standard")</code>. However, unlike GHA, R-hub currently does not cover macOS, only Windows and Linux.</p>
<p>rhub also helps you access some of the more exotic check flavors and offers specialized checks relevant to packages with compiled code, such as <code>rhub::check_with_sanitizers()</code>.</p>
</li>
<li>
<p>macOS builder is a service maintained by the CRAN personnel who build the macOS binaries for CRAN packages. This is a relatively new addition to the list and checks packages with “the same setup and available packages as the CRAN M1 build machine”.</p>
<p>You can submit your package using the web interface (<a href="https://mac.r-project.org/macbuilder/submit.html" class="uri">https://mac.r-project.org/macbuilder/submit.html</a>) or with <code><a href="https://devtools.r-lib.org/reference/check_mac_release.html">devtools::check_mac_release()</a></code>.</p>
</li>
</ul></section></section><section id="sec-release-revdep-checks" class="level2" data-number="23.6"><h2 data-number="23.6" class="anchored" data-anchor-id="sec-release-revdep-checks">
<span class="header-section-number">23.6</span> Reverse dependency checks</h2>
<ul class="task-list">
<li>
<input type="checkbox" disabled=""><code>revdepcheck::revdep_check(num_workers = 4)</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>
</li>
</ul>
<p>This innocuous checklist item can actually represent a considerable amount of effort. At a high-level, checking your reverse dependencies (“revdeps”) breaks down into:</p>
<ul>
<li><p>Form a list of your reverse dependencies.</p></li>
<li><p>Run <code>R CMD check</code> on each one.</p></li>
<li><p>Make sure you haven’t broken someone else’s package with the planned changes in your package.</p></li>
</ul>
<p>Each of these steps can require considerable work and judgment. So, if you have no reverse dependencies, you should rejoice that you can skip this step. If you only have a couple of reverse dependencies, you can probably do this “by hand”, i.e.&nbsp;download each package’s source and run <code>R CMD check</code>.</p>
<p>Here we explain ways to do reverse dependency checks at scale, which is the problem we face. Some of the packages maintained by our team have thousands of reverse dependencies and even some of the lower-level packages have hundreds. We have to approach this in an automated fashion and this section will be most useful to other maintainers in the same boat.</p>
<p>All of our reverse dependency tooling is concentrated in the revdepcheck package (<a href="https://revdepcheck.r-lib.org/" class="uri">https://revdepcheck.r-lib.org/</a>). Do this when you’re ready to do revdep checks for the first time:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_revdep.html">use_revdep</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This does some one-time setup in your package’s <code>.gitignore</code> and <code>.Rbuildignore</code> files. You will also see this reminder to actually perform revdep checks like so, as the checklist item suggests:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">revdepcheck</span><span class="fu">::</span><span class="fu">revdep_check</span><span class="op">(</span>num_workers <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This runs <code>⁠R CMD check⁠</code> on all of your reverse dependencies, with our recommendation to use 4 parallel workers to speed things along. The output looks something like this:</p>
<pre><code>&gt; revdepcheck::revdep_check(num_workers = 4)
── INIT ───────────────────────────────────── Computing revdeps ──
── INSTALL ───────────────────────────────────────── 2 versions ──
Installing CRAN version of cellranger
also installing the dependencies 'cli', 'glue', 'utf8', 'fansi', 'lifecycle', 'magrittr', 'pillar', 'pkgconfig', 'rlang', 'vctrs', 'rematch', 'tibble'

Installing DEV version of cellranger
Installing 13 packages: rlang, lifecycle, glue, cli, vctrs, utf8, fansi, pkgconfig, pillar, magrittr, tibble, rematch2, rematch
── CHECK ─────────────────────────────────────────── 8 packages ──
✔ AOV1R 0.1.0                     ── E: 0     | W: 0     | N: 0
✔ mschart 0.4.0                   ── E: 0     | W: 0     | N: 0
✔ googlesheets4 1.0.1             ── E: 0     | W: 0     | N: 1
✔ readODS 1.8.0                   ── E: 0     | W: 0     | N: 0
✔ readxl 1.4.2                    ── E: 0     | W: 0     | N: 0
✔ readxlsb 0.1.6                  ── E: 0     | W: 0     | N: 0
✔ unpivotr 0.6.3                  ── E: 0     | W: 0     | N: 0
✔ tidyxl 1.0.8                    ── E: 0     | W: 0     | N: 0                  
OK: 8                                                                                 
BROKEN: 0
Total time: 6 min
── REPORT ────────────────────────────────────────────────────────
Writing summary to 'revdep/README.md'
Writing problems to 'revdep/problems.md'
Writing failures to 'revdep/failures.md'
Writing CRAN report to 'revdep/cran.md'</code></pre>
<p>To minimize false positives, <code>revdep_check()</code> runs <code>⁠R CMD check⁠</code> twice per revdep: once with the released version of your package currently on CRAN and again with the local development version, i.e.&nbsp;with your release candidate. Why two checks? Because sometimes the revdep is already failing <code>R CMD check</code> and it would be incorrect to blame your planned release for the breakage. <code>revdep_check()</code> reports the packages that can’t be checked and, most importantly, those where there are so-called “changes to the worse”, i.e.&nbsp;where your release candidate is associated with new problems.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
tidyverse team
</div>
</div>
<div class="callout-body-container callout-body">
<p>We actually use a different function for our reverse dependency checks: <code>revdepcheck::cloud_check()</code>. This runs the checks in the cloud, massively in parallel, making it possible to run revdep checks for packages like testthat (with &gt;10,000 revdeps) in just a few hours!</p>
<p><code>cloud_check()</code> has been a gamechanger for us, allowing us to run revdep checks more often. For example, we even do this now when assessing the impact of a potential change to a package (<a href="lifecycle.html#sec-lifecycle-breaking-change-definition"><span>Section&nbsp;22.5</span></a>), instead of only right before a release.</p>
<p>At the time of writing, <code>cloud_check()</code> is only available package maintainers at Posit, but we hope to offer this service for the broader R community in the future.</p>
</div>
</div>
<p>In addition to some interactive messages, the revdep check results are written to the <code>revdep/</code> folder:</p>
<ul>
<li>
<code>revdep/README.md</code>: This is a high-level summary aimed at maintainers. The filename and Markdown format are very intentional, in order to create a nice landing page for the <code>revdep/</code> folder on GitHub.</li>
<li>
<code>revdep/problems.md</code>: This lists the revdeps that appear to be broken by your release candidate.</li>
<li>
<code>revdep/failures.md</code>: This lists the revdeps that could not be checked, usually because of an installation failure, either of the revdep itself or one of its dependencies.</li>
<li>
<code>revdep/cran.md</code>: This is a high-level summary aimed at CRAN. You should copy and paste this into <code>cran-comments.md</code> (TODO: forward reference to next section).</li>
<li>Other files and folders, such as <code>checks.noindex</code>, <code>data.sqlite</code>, and <code>library.noindex</code>. These are for revdepcheck’s internal use and we won’t discuss them further.</li>
</ul>
<p>The easiest way to get a feel for these different files is to look around at the latest revdep results for some tidyverse packages, such as <a href="https://github.com/tidyverse/dplyr/tree/main/revdep">dplyr</a> or <a href="https://github.com/tidyverse/tidyr/tree/main/revdep">tidyr</a>.</p>
<p>The revdep check results – local, cloud, or CRAN – are not perfect, because this is not a simple task. There are various reasons why a result might be missing, incorrect, or contradictory in different runs.</p>
<ul>
<li><p>False positives: sometimes revdepcheck reports a package has been broken, but things are actually fine (or, at least, no worse than before). This most commonly happens because of flaky tests that fail randomly (<a href="testing-advanced.html#sec-testing-advanced-skip-on-cran"><span>Section&nbsp;16.4.1</span></a>), such as HTTP requests. This can also happen because the instance runs out of disk space or other resources, so the first check using the CRAN version succeeds and the second check using the dev version fails. Sometimes it’s obvious that the problem is not related to your package.</p></li>
<li><p>False negatives: sometimes a package has been broken, but you don’t detect that. For us, this usually happens when <code>cloud_check()</code> can’t check a revdep because it can’t be installed, typically because of a missing system requirement (e.g.&nbsp;Java). These are separately reported as “failed to test” but are still included in <code>problems.md</code>, because this could still be direct breakage caused by your package. For example, if you remove an exported function that’s used by another package, installation will fail.</p></li>
</ul>
<p>Generally these differences are less of a worry now that CRAN’s own revdep checks are well automated, so new failures typically don’t involve a human.</p>
<section id="revdeps-and-breaking-changes" class="level3" data-number="23.6.1"><h3 data-number="23.6.1" class="anchored" data-anchor-id="revdeps-and-breaking-changes">
<span class="header-section-number">23.6.1</span> Revdeps and breaking changes</h3>
<p>If the revdep check reveals breakages, you need to examine each failure and determine if it’s:</p>
<ul>
<li><p>A false positive.</p></li>
<li><p>A non-breaking change, i.e.&nbsp;a failure caused by off-label usage of your package.</p></li>
<li><p>A bug in your package that you need to fix.</p></li>
<li><p>A deliberate breaking change.</p></li>
</ul>
<p>If your update will break another package (regardless of why), you need to inform the maintainer, so they hear it first from you, rather than CRAN. The nicest way to do this is with a patch that updates their package to play nicely with yours, perhaps in the form of a pull request. This can be a decent amount of work and is certainly not feasible for all maintainers. But working through a few of these can be a good way to confront the pain that breaking change causes and to reconsider whether the benefits outweigh the costs. In most cases, a change that affects revdeps is also likely to also break a lot of code that lives outside of CRAN packages, such as scripts, reports, and Shiny apps.</p>
<p>If you decide to proceed, you can use <code>revdepcheck::revdep_email()</code> to notify revdep maintainers <em>en masse</em>. Make sure the email includes a link to documentation that describes the most common breaking changes and how to fix them. You should let the maintainers know when you plan to submit to CRAN (we recommend giving at least two weeks notice), so they can submit their updated version before that. But their submission is up to them - you can submit to CRAN knowing that you’ve done your due diligence. If you explain to CRAN that you gave advanced notice, they will accept your update, even if it breaks some other packages.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
tidyverse team
</div>
</div>
<div class="callout-body-container callout-body">
<p>Lately the tidyverse team is trying to meet revdep maintainers more than halfway in terms of dealing with breaking changes. For example, <a href="https://github.com/tidyverse/dplyr/issues/6262">here</a> is the issue where dplyr maintainers tracked hundreds of pull requests in the build-up to releasing dplyr v1.1.0. As the PRs are created, it’s helpful to add links to those as well. As the revdep maintainers merge the PRs, they can be checked off as resolved. If some PRs are still in-flight when the announced submission date rolls around, the situation can summarized in <code>cran-comments.md</code>, as was true in the case of <a href="https://github.com/tidyverse/dplyr/blob/c7e9cd72fd86309d72f2c522157cfac38f45453b/cran-comments.md">dplyr v1.1.0</a>.</p>
</div>
</div>
</section></section><section id="sec-release-cran-comments" class="level2" data-number="23.7"><h2 data-number="23.7" class="anchored" data-anchor-id="sec-release-cran-comments">
<span class="header-section-number">23.7</span> Update comments for CRAN</h2>
<ul class="task-list">
<li>
<input type="checkbox" disabled="">Update <code>cran-comments.md</code>
</li>
</ul>
<p>We use the <code>cran-comments.md</code> file to record comments about a submission, mainly just the results from <code>R CMD check</code> and revdep checks. We like to track this file in Git, so we can see how it changes over time. It should also be listed in <code>.Rbuildignore</code>, since it should not appear in your package bundle. When you’re ready to submit, <code><a href="https://devtools.r-lib.org/reference/submit_cran.html">devtools::submit_cran()</a></code> (TODO: forward reference) incorporates the contents of <code>cran-comments.md</code> when it uploads your submission.</p>
<p>The target audience for these comments is the CRAN personnel, although there is no guarantee that they will read the comments (or when in the submission process they read them). For example, if your package breaks other packages, you will likely receive an automated email about that, even if you’ve explained that in the comments. Sometimes a human at CRAN then reads the comments, is satisfied, and accepts your package anyway, without further action from you. At other times, your package may be stuck in the queue until you copy <code>cran-comments.md</code> and paste it into an email exchange to move things along. In either case, it’s worth keeping these comments in their own, version-controlled file.</p>
<p>Here is a fairly typical <code>cran-comments.md</code> from a recent release of forcats. Note that the <code>R CMD check</code> results are clean, i.e.&nbsp;there is nothing that needs to be explained or justified, and there is a concise summary of the revdep process.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## R CMD check results</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>0 errors | 0 warnings | 0 notes</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">## revdepcheck results</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>We checked 231 reverse dependencies (228 from CRAN + 3 from Bioconductor), comparing R CMD check results across CRAN and dev versions of this package.</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>We saw 2 new problems:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>epikit</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>stevemisc</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>Both maintainers were notified on Jan 12 (~2 week ago) and supplied with patches.</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>We failed to check 3 packages</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>genekitr     (NA)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>OlinkAnalyze (NA)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>SCpubr       (NA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This layout is designed to be easy to skim, and easy to match up to the <code>R CMD check</code> results seen by CRAN maintainers. It includes two sections:</p>
<ol type="1">
<li>
<p>Check results: We always state that there were no errors or warnings (and we make sure that’s true!). Ideally we can also say there were no notes. But if not, any <code>NOTE</code>s are presented in a bulleted list. For each <code>NOTE</code>, we include the message from <code>R CMD check</code> and a brief description of why we think it’s OK.</p>
<p>Here is how a <code>NOTE</code> is explained for the nycflights13 data package:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## R CMD check results</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>0 errors | 0 warnings | 1 note</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Checking installed package size:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  installed size is  6.9Mb</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  sub-directories of 1Mb or more:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    data   6.9Mb</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  This is a data package that will be rarely updated.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
<li><p>Reverse dependencies: If there are revdeps, this is where we paste the contents of <code>revdep/cran.md</code> (<a href="#sec-release-revdep-checks"><span>Section&nbsp;23.6</span></a>). If there are no revdeps, we recommend that you keep this section, but say something like: “There are currently no downstream dependencies for this package”.</p></li>
</ol></section><section id="sec-release-process" class="level2" data-number="23.8"><h2 data-number="23.8" class="anchored" data-anchor-id="sec-release-process">
<span class="header-section-number">23.8</span> The submission process</h2>
<p>To manually submit your package to CRAN, you create a package bundle (with <code><a href="https://devtools.r-lib.org/reference/build.html">devtools::build()</a></code>) then upload it to <a href="https://cran.r-project.org/submit.html" class="uri">https://cran.r-project.org/submit.html</a>, along with some comments which describe the process you followed. This section shows you how to make submission as easy as possible by providing a standard structure for those comments. Later, in <a href="#sec-release-submission"><span>Section&nbsp;23.10</span></a>, you’ll see how to actually submit the package with <code><a href="https://devtools.r-lib.org/reference/release.html">devtools::release()</a></code>.</p>
<p>When submitting to CRAN, remember that CRAN is staffed by volunteers, all of whom have other full-time jobs. A typical week has over 100 submissions and only three volunteers to process them all. The less work you make for them the more likely you are to have a pleasant submission experience.</p>
<section id="sec-release-revdepcheck" class="level3" data-number="23.8.1"><h3 data-number="23.8.1" class="anchored" data-anchor-id="sec-release-revdepcheck">
<span class="header-section-number">23.8.1</span> Reverse dependencies</h3>
<p>Finally, if you’re releasing a new version of an existing package, it’s your responsibility to check that downstream dependencies (i.e.&nbsp;all packages that list your package in the <code>Depends</code>, <code>Imports</code>, <code>Suggests</code> or <code>LinkingTo</code> fields) continue to work. To help you do this, <del>devtools provides <code>devtools::revdep_check()</code></del>. <em>This section is slated for revision for the 2nd edition. In the meantime, know that this functionality is now provided by the <a href="https://r-lib.github.io/revdepcheck/">revdepcheck</a> package.</em> This:</p>
<ol type="1">
<li><p>Sets up a temporary library so it doesn’t clobber any existing packages you have installed.</p></li>
<li><p>Installs all of the dependencies of the downstream dependencies.</p></li>
<li><p>Runs <code>R CMD check</code> on each package.</p></li>
<li><p>Summarises the results in a single file.</p></li>
</ol>
<p>Run <code><a href="https://usethis.r-lib.org/reference/use_revdep.html">usethis::use_revdep()</a></code> to set up your package with a useful template.</p>
<p>If any packages fail <code>R CMD check</code>, you should give package authors at least two weeks to fix the problem before you submit your package to CRAN (you can easily get all maintainer e-mail addresses with <code>revdep_maintainers()</code>). After the two weeks is up, re-run the checks, and list any remaining failures in <code>cran-comments.md</code>. Each package should be accompanied by a brief explanation that either tells CRAN that it’s a false positive in <code>R CMD check</code> (e.g.&nbsp;you couldn’t install a dependency locally) or that it’s a legitimate change in the API (which the maintainer hasn’t fixed yet).</p>
<p>Inform CRAN of your release process: “I advised all downstream package maintainers of these problems two weeks ago”. Here’s an example from a recent release of dplyr:</p>
<pre><code>Important reverse dependency check notes (full details at 
https://github.com/wch/checkresults/tree/master/dplyr/r-release);

* COPASutils, freqweights, qdap, simPH: fail for various reasons. All package 
  authors were informed of the upcoming release and shown R CMD check issues 
  over two weeks ago.

* ggvis: You'll be receiving a submission that fixes these issues very shortly
  from Winston.

* repra, rPref: uses a deprecated function.</code></pre>
</section></section><section id="cran-policies" class="level2" data-number="23.9"><h2 data-number="23.9" class="anchored" data-anchor-id="cran-policies">
<span class="header-section-number">23.9</span> CRAN policies</h2>
<p>As well as the automated checks provided by <code>R CMD check</code>, there are a number of <a href="https://cran.r-project.org/web/packages/policies.html">CRAN policies</a> that must be checked manually. The CRAN maintainers will typically look at this very closely on a package’s first submission.</p>
<p>I’ve summarised the most common problems below:</p>
<ul>
<li><p>It’s vital that the maintainer’s e-mail address is stable because this is the only way that CRAN has to contact you, and if there are problems and they can’t get in touch with you they will remove your package from CRAN. So make sure it’s something that’s likely to be around for a while, and that it’s not heavily filtered.</p></li>
<li><p>You must have clearly identified the copyright holders in <code>DESCRIPTION</code>: if you have included external source code, you must ensure that the license is compatible. See <a href="license.html"><span>Chapter&nbsp;13</span></a> for more details.</p></li>
<li><p>Do not make external changes without explicit user permission. Don’t write to the file system, change options, install packages, quit R, send information over the internet, open external software, etc.</p></li>
<li><p>Do not submit updates too frequently. The policy suggests a new version once every 1-2 months at most.</p></li>
</ul>
<p>I recommend following the <a href="https://twitter.com/CRANPolicyWatch">CRAN Policy Watch</a> Twitter account which tweets whenever there’s a policy change. You can also look at the GitHub repository that powers it: <a href="https://github.com/eddelbuettel/crp/commits/master/texi" class="uri">https://github.com/eddelbuettel/crp/commits/master/texi</a>.</p>
</section><section id="sec-release-submission" class="level2" data-number="23.10"><h2 data-number="23.10" class="anchored" data-anchor-id="sec-release-submission">
<span class="header-section-number">23.10</span> Release</h2>
<p>You’re now ready to submit your package to CRAN. The easiest way to do this is to run <code><a href="https://devtools.r-lib.org/reference/release.html">devtools::release()</a></code>. This:</p>
<ul>
<li><p>Builds the package and runs <code>R CMD check</code> one last time.</p></li>
<li><p>Asks you a number of yes/no questions to verify that you followed the most common best practices.</p></li>
<li>
<p>Allows you to add your own questions to the check process by including an unexported <code>release_questions()</code> function in your package. This should return a character vector of questions to ask. For example, httr has:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">release_questions</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Have you run all the OAuth demos?"</span>,</span>
<span>    <span class="st">"Is inst/cacert.pem up to date?"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is useful for reminding you to do any manual tasks that can’t otherwise be automated.</p>
</li>
<li><p>Uploads the package bundle to the <a href="https://cran.r-project.org/submit.html">CRAN submission form</a> including the comments in <code>cran-comments.md</code>.</p></li>
</ul>
<p>Within the next few minutes, you’ll receive an email notifying you of the submission and asking you to approve it (this confirms that the maintainer address is correct). Next the CRAN maintainers will run their checks and get back to you with the results. This normally takes around 24 hours, but occasionally can take up to 5 days.</p>
<section id="on-failure" class="level3" data-number="23.10.1"><h3 data-number="23.10.1" class="anchored" data-anchor-id="on-failure">
<span class="header-section-number">23.10.1</span> On failure</h3>
<p>If your package does not pass <code>R CMD check</code> or is in violation of CRAN policies, a CRAN maintainer will e-mail you and describe the problem(s). Failures are frustrating, and the feedback may be curt and may feel downright insulting. Arguing with CRAN maintainers will likely waste both your time and theirs. Instead:</p>
<ul>
<li><p>Breathe. A rejected CRAN package is not the end of the world. It happens to everyone. Even members of R-core have to go through the same process and CRAN is no friendlier to them. I have had numerous packages rejected by CRAN. I was banned from submitting to CRAN for two weeks because too many of my existing packages had minor problems.</p></li>
<li><p>If the response gets you really riled up, take a couple of days to cool down before responding. Ignore any ad hominem attacks, and strive to respond only to technical issues.</p></li>
<li><p>If a devtools problem causes a CRAN maintainer to be annoyed with you, I am deeply sorry. If you forward me the message along with your address, I’ll send you a hand-written apology card.</p></li>
</ul>
<p>Unless you feel extremely strongly that discussion is merited, don’t respond to the e-mail. Instead:</p>
<ul>
<li><p>Fix the identified problems and make recommended changes. Re-run <code><a href="https://devtools.r-lib.org/reference/check.html">devtools::check()</a></code> to make sure you didn’t accidentally introduce any new problems.</p></li>
<li>
<p>Add a “Resubmission” section at the top of <code>cran-comments.md</code>. This should clearly identify that the package is a resubmission, and list the changes that you made.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resubmission</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>This is a resubmission. In this version I have:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Converted the DESCRIPTION title to title case.</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>More clearly identified the copyright holders in the DESCRIPTION</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  and LICENSE files.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
<li><p>If necessary, update the check results and downstream dependencies sections.</p></li>
<li><p>Run <code><a href="https://devtools.r-lib.org/reference/submit_cran.html">devtools::submit_cran()</a></code> to re-submit the package without working through all the <code>release()</code> questions a second time.</p></li>
</ul></section><section id="binary-builds" class="level3" data-number="23.10.2"><h3 data-number="23.10.2" class="anchored" data-anchor-id="binary-builds">
<span class="header-section-number">23.10.2</span> Binary builds</h3>
<p>After the package has been accepted by CRAN it will be built for each platform. It’s possible this may uncover further errors. Wait 48 hours until all the checks for all packages have been run, then go to the check results page for your package:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/cran-checks.png" class="img-fluid"></p>
</div>
</div>
<p>Prepare a patch release that fixes the problems and submit using the same process as above.</p>
</section></section><section id="post-release" class="level2" data-number="23.11"><h2 data-number="23.11" class="anchored" data-anchor-id="post-release">
<span class="header-section-number">23.11</span> Prepare for next version</h2>
<p>Once your package has been accepted by CRAN, you have a couple of technical tasks to do:</p>
<ul>
<li><p>If you use GitHub, go to the repository release page. Create a new release with tag version <code>v1.2.3</code> (i.e.&nbsp;“v” followed by the version of your package). Copy and paste the contents of the relevant <code>NEWS.md</code> section into the release notes.</p></li>
<li><p>If you use git, but not GitHub, tag the release with <code>git tag -a v1.2.3</code>.</p></li>
<li><p>Add the <code>.9000</code> suffix to the <code>Version</code> field in the DESCRIPTION to indicate that this is a development version. Create a new heading in <code>NEWS.md</code> and commit the changes.</p></li>
</ul></section><section id="promotion" class="level2" data-number="23.12"><h2 data-number="23.12" class="anchored" data-anchor-id="promotion">
<span class="header-section-number">23.12</span> Publicising your package</h2>
<p>Now you’re ready for the fun part: publicising your package. This is really important. No one will use your helpful new package if they don’t know that it exists.</p>
<p>Start by writing a release announcement. This should be an R Markdown document that briefly describes what the package does (so people who haven’t used it before can understand why they should care), and what’s new in this version. Start with the contents of <code>NEWS.md</code>, but you’ll need to modify it. The goal of <code>NEWS.md</code> is to be comprehensive; the goal of the release announcement is to highlight the most important changes. Include a link at the end of the announcement to the full release notes so people can see all the changes. Where possible, I recommend showing examples of new features: it’s much easier to understand the benefit of a new feature if you can see it in action.</p>
<p>There are a number of places you can include the announcement:</p>
<ul>
<li><p>If you have a blog, publish it there. I now publish all package release announcements on the <a href="https://blog.rstudio.org/author/hadleywickham/">RStudio blog</a>.</p></li>
<li><p>If you use Twitter, tweet about it with the #rstats hashtag.</p></li>
<li><p>Send it to the <a href="https://stat.ethz.ch/mailman/listinfo/r-packages">r-packages mailing list</a>. Messages sent to this list are automatically forwarded to the R-help mailing list.</p></li>
</ul></section><section id="congratulations" class="level2" data-number="23.13"><h2 data-number="23.13" class="anchored" data-anchor-id="congratulations">
<span class="header-section-number">23.13</span> Congratulations!</h2>
<p>You have released your first package to CRAN and made it to the end of the book!</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Fowler’s blog post “FrequencyReducesDifficulty” is a great read on this topic, <a href="https://martinfowler.com/bliki/FrequencyReducesDifficulty.html" class="uri">https://martinfowler.com/bliki/FrequencyReducesDifficulty.html</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Note that, at least at the time of writing, the revdepcheck package is not on CRAN. You can install it from Github via <code>devtools::install_github("r-lib/revdepcheck")</code> or <code>pak::pak("r-lib/revdepcheck")</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./lifecycle.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lifecycle</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">References</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>