<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R Packages (2e) - 17&nbsp; Vignettes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./other-markdown.html" rel="next">
<link href="./man.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script defer="" data-domain="r-pkgs.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Vignettes</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Packages (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r-pkgs/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Getting started</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole-game.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Whole Game</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">System setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Package structure and state</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow101.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fundamental development workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package-within.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The package within</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Package components</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./misc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Other components</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Package metadata</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./metadata.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code> and <code>NAMESPACE</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dependencies: What does your package need?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Licensing</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Testing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Testing basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-design.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Designing your test suite</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-advanced.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Advanced testing techniques</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Documentation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Function documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Vignettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-markdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Other markdown files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./website.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Website</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Maintenance and distribution</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./check.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title"><code>R CMD check</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./continuous-integration.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Continuous integration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lifecycle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lifecycle</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">17.1</span>  Introduction</a></li>
  <li><a href="#vignette-workflow" id="toc-vignette-workflow" class="nav-link" data-scroll-target="#vignette-workflow"><span class="toc-section-number">17.2</span>  Vignette workflow</a></li>
  <li><a href="#vignette-metadata" id="toc-vignette-metadata" class="nav-link" data-scroll-target="#vignette-metadata"><span class="toc-section-number">17.3</span>  Metadata</a></li>
  <li><a href="#controlling-evaluation" id="toc-controlling-evaluation" class="nav-link" data-scroll-target="#controlling-evaluation"><span class="toc-section-number">17.4</span>  Controlling evaluation</a></li>
  <li>
<a href="#vignette-advice" id="toc-vignette-advice" class="nav-link" data-scroll-target="#vignette-advice"><span class="toc-section-number">17.5</span>  Advice</a>
  <ul class="collapse">
<li><a href="#writing" id="toc-writing" class="nav-link" data-scroll-target="#writing"><span class="toc-section-number">17.5.1</span>  Writing</a></li>
  <li><a href="#diagrams" id="toc-diagrams" class="nav-link" data-scroll-target="#diagrams"><span class="toc-section-number">17.5.2</span>  Diagrams</a></li>
  <li><a href="#organisation" id="toc-organisation" class="nav-link" data-scroll-target="#organisation"><span class="toc-section-number">17.5.3</span>  Organisation</a></li>
  <li><a href="#scientific-publication" id="toc-scientific-publication" class="nav-link" data-scroll-target="#scientific-publication"><span class="toc-section-number">17.5.4</span>  Scientific publication</a></li>
  </ul>
</li>
  <li>
<a href="#filesystem-matters" id="toc-filesystem-matters" class="nav-link" data-scroll-target="#filesystem-matters"><span class="toc-section-number">17.6</span>  Filesystem matters</a>
  <ul class="collapse">
<li><a href="#difference-with-function-documentation-workflow" id="toc-difference-with-function-documentation-workflow" class="nav-link" data-scroll-target="#difference-with-function-documentation-workflow"><span class="toc-section-number">17.6.1</span>  Difference with function documentation workflow</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hadley/r-pkgs/edit/main/vignettes.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-vignettes" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Vignettes</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><div class="cell">
<div class="cell-output-display">
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Second edition
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are reading the work-in-progress second edition of R Packages. This chapter should be readable but is currently undergoing final polishing.</p>
</div>
</div>
</div>
</div>
<section id="introduction" class="level2" data-number="17.1"><h2 data-number="17.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">17.1</span> Introduction</h2>
<p>A vignette is a long-form guide to your package. Function documentation is great if you know the name of the function you need, but it’s useless otherwise. In contrast, a vignette can be framed around a target problem that your package is designed to solve. The vignette format is perfect for showing a workflow that solves that particular problem, start to finish. Vignettes afford you different opportunities than help topics: you have much more control over the integration of code and prose and it’s a better setting for showing how multiple functions work together.</p>
<p>Many existing packages have vignettes and you can see all the vignettes associated with your installed packages with <code><a href="https://rdrr.io/r/utils/browseVignettes.html">browseVignettes()</a></code>. To limit that to a particular package, you can specify the package’s name like so: <code>browseVignettes("tidyr")</code>. You can read a specific vignette with the <code><a href="https://rdrr.io/r/utils/vignette.html">vignette()</a></code> function, e.g.&nbsp;<code><a href="https://tidyr.tidyverse.org/articles/rectangle.html">vignette("rectangle", package = "tidyr")</a></code>. To see vignettes for a package that you haven’t installed, look at the “Vignettes” listing on its CRAN page, e.g.&nbsp;<a href="https://cran.r-project.org/web/packages/tidyr/index.html" class="uri">https://cran.r-project.org/web/packages/tidyr/index.html</a>.</p>
<p>However, we much prefer to discover and read vignettes from a package’s website, which is the topic of <a href="website.html"><span>Chapter&nbsp;19</span></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Compare the above to what it feels like to access tidyr’s vignettes from its website: <a href="https://tidyr.tidyverse.org/articles/index.html" class="uri">https://tidyr.tidyverse.org/articles/index.html</a>. A pkgdown website presents all of the documentation of a package in a cohesive, interlinked way that makes it more navigable and useful. This chapter is ostensibly about vignettes, but the way we do things is heavily influenced by how those vignettes fit into in a pkgdown website.</p>
<p>In this book, we’re going to use RMarkdown to write our vignettes, just as we did for function documentation in <a href="man.html#sec-man-key-md-features"><span>Section&nbsp;16.2.3</span></a>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> If you’re not already familiar with RMarkdown you’ll need to learn the basics elsewhere; a good place to start is <a href="https://rmarkdown.rstudio.com/" class="uri">https://rmarkdown.rstudio.com/</a>.</p>
<p>In general, we embrace a somewhat circumscribed vignette workflow, i.e.&nbsp;there are many things that base R allows for, that we simply don’t engage in. For example, we treat <code>inst/doc</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> in the same way as <code>man/</code> and <code>NAMESPACE</code>, i.e.&nbsp;as something semi-opaque that is managed by automated tooling and that we don’t modify by hand. Base R’s vignette system allows for various complicated maneuvers that we just try to avoid. In vignettes, more than anywhere else, the answer to “But how do I do X?” is often “Don’t do X”.</p>
</section><section id="vignette-workflow" class="level2" data-number="17.2"><h2 data-number="17.2" class="anchored" data-anchor-id="vignette-workflow">
<span class="header-section-number">17.2</span> Vignette workflow</h2>
<p>To create your first vignette, run:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_vignette.html">use_vignette</a></span><span class="op">(</span><span class="st">"my-vignette"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This does the following:</p>
<ol type="1">
<li><p>Creates a <code>vignettes/</code> directory.</p></li>
<li><p>Adds the necessary dependencies to <code>DESCRIPTION</code>, i.e.&nbsp;adds knitr to the <code>VignetteBuilder</code> field and adds both knitr and rmarkdown to <code>Suggests</code>.</p></li>
<li><p>Drafts a vignette, <code>vignettes/my-vignette.Rmd</code>.</p></li>
<li><p>Adds some patterns to <code>.gitignore</code> to ensure that files created as a side effect of previewing your vignettes are kept out of source control (we’ll say more about this later).</p></li>
</ol>
<p>This draft document has been designed to remind you of the important parts of an R Markdown vignette. It serves as a useful reference when you’re creating a new vignette. You also call <code>use_vignette()</code> to create your second and all subsequent vignettes; it will just skip any setup that’s already been done.</p>
<p>Once you have the draft vignette, the workflow is straightforward:</p>
<ol type="1">
<li><p>Start adding prose and code chunks to the vignette. Use <code><a href="https://devtools.r-lib.org/reference/load_all.html">devtools::load_all()</a></code> as needed and use your usual interactive workflow for developing the code chunks.</p></li>
<li>
<p>Preview the rendered vignette periodically.</p>
<p>If you’re documenting parts of your package that are under active development, it is important to build the vignette with the <em>current</em> source package. You need to ensure that the <code><a href="https://rdrr.io/r/base/library.html">library(yourpackage)</a></code> call in the setup chunk loads a bleeding edge version of your package. Use <code><a href="https://devtools.r-lib.org/reference/build_rmd.html">devtools::build_rmd()</a></code> in this case. It builds your vignette against a (temporarily installed) development version of your package.</p>
<p>If it’s OK to build the vignette using the most-recently-installed version of your package, it’s fine to use your usual workflow for rendering <code>.Rmd</code> files. For example, press Ctrl/Cmd + Shift + K (or click <img src="images/knit.png" class="img-fluid" width="45">).</p>
</li>
<li><p>Rinse and repeat until the vignette looks the way you want.</p></li>
</ol>
<p>If you’re regularly checking your entire package (<a href="check.html"><span>Chapter&nbsp;20</span></a>), which we strongly recommend, this will help to keep your vignettes in good working order. In particular, this will alert you if a vignette makes use of a package that’s not a formal dependency.</p>
<p>We’re deliberately leaving one workflow issue to revisit below in SOME LATER SECTION. That’s where we’ll clarify the official mechanism for creating the rendered vignettes that appear in your package’s bundled and installed form.</p>
</section><section id="vignette-metadata" class="level2" data-number="17.3"><h2 data-number="17.3" class="anchored" data-anchor-id="vignette-metadata">
<span class="header-section-number">17.3</span> Metadata</h2>
<p>The first few lines of the vignette contain important metadata. The default template contains the following information:</p>
<pre><code>---
title: "Vignette Title"
output: rmarkdown::html_vignette
vignette: &gt;
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---</code></pre>
<p>This metadata is written in <a href="https://yaml.org/">YAML</a>, a format designed to be both human and computer readable. YAML frontmatter is a common feature of RMarkdown files. The syntax is much like that of the <code>DESCRIPTION</code> file, where each line consists of a field name, a colon, then the value of the field. The one special YAML feature we’re using here is <code>&gt;</code>. It indicates that the following lines of text are plain text and shouldn’t use any special YAML features.</p>
<p>The default vignette template uses these fields:</p>
<ul>
<li><p><code>title</code>: this is the title that appears in the vignette. If you change it, make sure to make the same change to <code>VignetteIndexEntry{}</code>. They should be the same, but unfortunately that’s not automatic.</p></li>
<li><p><code>output</code>: this specifies the output format. There are many options that are useful for regular reports (including html, pdf, slideshows, etc.), but <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/html_vignette.html">rmarkdown::html_vignette</a></code> has been specifically designed to work well inside packages. See <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/html_vignette.html">?rmarkdown::html_vignette</a></code> for more details.</p></li>
<li><p><code>vignette</code>: this is a block of special metadata needed by R. Here, you can see the legacy of LaTeX vignettes: the metadata looks like LaTeX comments. The only entry you might need to modify is the <code>\VignetteIndexEntry{}</code>. This is how the vignette appears in the vignette index and it should match the <code>title</code>. Leave the other two lines alone. They tell R to use <code>knitr</code> to process the file, and that the file is encoded in UTF-8 (the only encoding you should ever use for a vignette).</p></li>
</ul>
<p>We generally don’t use these fields, but you will see them in other packages:</p>
<ul>
<li><p><code>author</code>: we don’t use this unless the vignette is written by someone not already credited as a package author.</p></li>
<li><p><code>date</code>: we think this usually does more harm than good, since it’s not clear what information is actually conveys. If you manage <code>date</code> manually, it’s easy to forget to update it. If you manage <code>date</code> programmatically with <code>Sys.date()</code>, the date reflects when the vignette was built, i.e.&nbsp;when the package bundle was created, which can be wildly different from when the vignette or package was last modified. We’ve decided it’s best to omit the <code>date</code>.</p></li>
</ul>
<p>The draft vignette also includes two R chunks. The first one configures our preferred way of displaying code output and looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>```{r, include = FALSE}</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>knitr::opts_chunk$set(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  collapse = TRUE,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  comment = "#&gt;"</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The second chunk just attaches the package the vignette belongs to.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>```{r setup}</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>library(yourpackage)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="controlling-evaluation" class="level2" data-number="17.4"><h2 data-number="17.4" class="anchored" data-anchor-id="controlling-evaluation">
<span class="header-section-number">17.4</span> Controlling evaluation</h2>
<p>Your vignettes will be evaluated in many different places, not just your computer — CI/CD, CRAN, and users can run on their computers (although not typical). Thus, you need to make sure they work everywhere.</p>
<p>Any packages used by your vignette must be listed in <code>Imports</code> or <code>Suggests</code> fields. Generally safe to assume that suggest packages will be installed when you vignette is executed. But if a package is particularly hard to install you might want to safeguard using one of the tools below.</p>
<p>You’re probably already familiar with the chunk option <code>eval = FALSE</code>. But can also set for all later chunks with <code>knitr::opts_chunk$set(eval = FALSE)</code>. This is particularly useful for:</p>
<ul>
<li><code>eval = requireNamespace("package")</code></li>
<li><code>eval = !identical(Sys.getenv("foo"), "")</code></li>
<li><code>eval = file.exists("special-key")</code></li>
</ul>
<p>A final option if you want to don’t want to execute at all on CRAN. Another option is to create an “article”; an Rmd that appears only on the website that’s not embedded in the package. This makes it slightly less accessible, but it’s fine if you have a pkgdown website.</p>
<p>Many other options are described at <a href="https://yihui.name/knitr/options" class="uri">https://yihui.name/knitr/options</a>.</p>
<p><code>error = TRUE</code> captures any errors in the block and shows them inline. This is useful if you want to demonstrate what happens if code throws an error.</p>
</section><section id="vignette-advice" class="level2" data-number="17.5"><h2 data-number="17.5" class="anchored" data-anchor-id="vignette-advice">
<span class="header-section-number">17.5</span> Advice</h2>
<blockquote class="blockquote">
<p>If you’re thinking without writing, you only think you’re thinking. — Leslie Lamport</p>
</blockquote>
<p>When writing a vignette, you’re teaching someone how to use your package. You need to put yourself in the readers’ shoes, and adopt a “beginner’s mind”. This can be difficult because it’s hard to forget all of the knowledge that you’ve already internalised. For this reason, we find in-person teaching to be a really useful way to get feedback. You’re immediately confronted with what you’ve forgotten that only you know.</p>
<p>A useful side effect of this approach is that it helps you improve your code. It forces you to re-see the initial onboarding process and to appreciate the parts that are hard. Our experience is that explaining how code works often reveals some problems that need fixing. (In fact, a key part of the tidyverse package release process is writing a blog post: we now do that before submitting to CRAN because of the number of times it’s revealed some subtle problem that requires a fix).</p>
<p>In the tidyverse, I think we’re generally always a little behind on vignettes and we need more than we currently have.</p>
<p>Writing a vignette also makes a nice break from coding. Writing seems to use a different part of the brain from programming, so if you’re sick of programming, try writing for a bit.</p>
<section id="writing" class="level3" data-number="17.5.1"><h3 data-number="17.5.1" class="anchored" data-anchor-id="writing">
<span class="header-section-number">17.5.1</span> Writing</h3>
<ul>
<li><p>I strongly recommend literally anything written by Kathy Sierra. Her old blog, <a href="https://headrush.typepad.com/">Creating passionate users</a> is full of advice about programming, teaching, and how to create valuable tools. I thoroughly recommend reading through all the older content. Her new blog, <a href="https://seriouspony.com/blog/">Serious Pony</a>, doesn’t have as much content, but it has some great articles.</p></li>
<li><p>If you’d like to learn how to write better, I highly recommend <a href="https://amzn.com/0321898680">Style: Lessons in Clarity and Grace</a> by Joseph M. Williams and Joseph Bizup. It helps you understand the structure of writing so that you’ll be better able to recognise and fix bad writing.</p></li>
</ul></section><section id="diagrams" class="level3" data-number="17.5.2"><h3 data-number="17.5.2" class="anchored" data-anchor-id="diagrams">
<span class="header-section-number">17.5.2</span> Diagrams</h3>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Submitting to CRAN
</div>
</div>
<div class="callout-body-container callout-body">
<p>You’ll need to watch the file size. If you include a lot of graphics, it’s easy to create a very large file. Be on the look out for a <code>NOTE</code> that complains about an overly large directory.</p>
</div>
</div>
</section><section id="organisation" class="level3" data-number="17.5.3"><h3 data-number="17.5.3" class="anchored" data-anchor-id="organisation">
<span class="header-section-number">17.5.3</span> Organisation</h3>
<p>For simpler packages, one vignette is often sufficient. Call it <code>pkgname.Rmd</code>; that takes advantage of a pkgdown convention which will automatically link “Getting Started” to your vignette.</p>
<p>But for more complicated packages you may actually need more than one. In fact, you can have as many vignettes as you like. I tend to think of them like chapters of a book – they should be self-contained, but still link together into a cohesive whole.</p>
</section><section id="scientific-publication" class="level3" data-number="17.5.4"><h3 data-number="17.5.4" class="anchored" data-anchor-id="scientific-publication">
<span class="header-section-number">17.5.4</span> Scientific publication</h3>
<p>Vignettes can also be useful if you want to explain the details of your package. For example, if you have implemented a complex statistical algorithm, you might want to describe all the details in a vignette so that users of your package can understand what’s going on under the hood, and be confident that you’ve implemented the algorithm correctly. In this case, you might also consider submitting your vignette to the <a href="http://jstatsoft.org/">Journal of Statistical Software</a> or <a href="http://journal.r-project.org/">The R Journal</a>. Both journals are electronic only and peer-reviewed. Comments from reviewers can be very helpful for improving your package and vignette.</p>
<p>If you just want to provide something very lightweight so folks have an easy time citing your package you might also consider the <a href="https://joss.theoj.org">Journal of Open Source Software</a>. This journal has a particularly speedy submission and review process, and is where we published “<a href="https://joss.theoj.org/papers/10.21105/joss.01686"><em>Welcome to the Tidyverse</em></a>”, a paper we wrote so that folks could have a single paper to cite and all the tidyverse authors would get some academic credit.</p>
</section></section><section id="filesystem-matters" class="level2" data-number="17.6"><h2 data-number="17.6" class="anchored" data-anchor-id="filesystem-matters">
<span class="header-section-number">17.6</span> Filesystem matters</h2>
<p><code>.Rmd</code> source located below <code>vignettes/</code></p>
<blockquote class="blockquote">
<p>Package vignettes are tested by <code>R CMD check</code> by executing all R code chunks they contain (except those marked for non-evaluation, e.g., with option <code>eval=FALSE</code> for Sweave). The R working directory for all vignette tests in <code>R CMD check</code> is a <em>copy</em> of the vignette source directory. Make sure all files needed to run the R code in the vignette (data sets, …) are accessible by either placing them in the <code>inst/doc</code> hierarchy of the source package or by using calls to <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>. All other files needed to re-make the vignettes (such as LaTeX style files, BibTeX input files and files for any figures not created by running the code in the vignette) must be in the vignette source directory. <code>R CMD check</code> will check that vignette production has succeeded by comparing modification times of output files in <code>inst/doc</code> with the source in <code>vignettes</code>.</p>
</blockquote>
<p>Previewing vignettes</p>
<p>Let go of the idea that you’re going to have a semi-persistent rendered version of your vignettes in your source package.</p>
<p>Get comfortable with the idea that, to the extent you need to preview the built product, you’ll mostly be looking at something ephemeral and local. And once things mature enough to push to GitHub, you will be able to see the rendered result in your pkgdown website.</p>
<ol type="1">
<li>For Git/GitHub users: commit and push the vignette source, i.e.&nbsp;<code>vignettes/my-vignette.Rmd</code>. (If you initiate your vignette use with <code>use_vignette()</code>, it will do some very helpful <code>.gitignore</code> setup for you.)</li>
</ol>
<section id="difference-with-function-documentation-workflow" class="level3" data-number="17.6.1"><h3 data-number="17.6.1" class="anchored" data-anchor-id="difference-with-function-documentation-workflow">
<span class="header-section-number">17.6.1</span> Difference with function documentation workflow</h3>
<p>It can be helpful to appreciate one big difference between the workflow for function documentation and vignettes:</p>
<p>The source of your help topics is stored in roxygen comments in <code>.R</code> files below <code>R/</code>. We use <code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code> to generate <code>.Rd</code> files below <code>man/</code>. These <code>man/*.Rd</code> files are part of the source package.</p>
<p>The source of your vignettes lives below <code>vignettes/</code>. We use various interactive techniques to preview rendered vignettes, usually as <code>.html</code>, but these ephemeral preview files are typically <em>not</em> considered part of the source package.</p>
<p>Vignettes are converted into their “consumable” form by <code>R CMD build</code>, i.e.&nbsp;when the package bundle is made.</p>
<p><code>R CMD build</code> will put rendered artefacts below <code>inst/doc</code></p>
<blockquote class="blockquote">
<p>Package vignettes have their sources in subdirectory <code>vignettes</code> of the package sources. Note that the location of the vignette sources only affects <code>R CMD build</code> and <code>R CMD check</code>: the tarball built by <code>R CMD build</code> includes in <code>inst/doc</code> the components intended to be installed.</p>
</blockquote>
<blockquote class="blockquote">
<p><code>R CMD build</code> will automatically create the (PDF or HTML versions of the) vignettes in inst/doc for distribution with the package sources. By including the vignette outputs in the package sources it is not necessary that these can be re-built at install time, i.e., the package author can use private R packages, screen snapshots and LaTeX extensions which are only available on their machine.</p>
</blockquote>


</section></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>This obviously depends on the quality of one’s internet connection, so we make an effort to recommend behaviours that are compatible with base R’s tooling around installed vignettes.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Sweave is the original system used for authoring vignettes (Sweave files usually have extension <code>.Rnw</code>). Similar to our advice about how to author function documentation (@sec-man), we think it makes more sense to use a markdown-based syntax for vignettes than a one-off, LaTeX-associated format. We recommend converting Sweave vignettes to RMarkdown.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>The <code>inst/doc</code> folder is where vignettes go once they’re built, when <code>R CMD build</code> makes the package bundle.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./man.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Function documentation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./other-markdown.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Other markdown files</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>