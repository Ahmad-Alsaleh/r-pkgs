<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 17 Function documentation | R Packages</title>
<meta name="author" content="Hadley Wickham">
<meta name="author" content="Jennifer Bryan">
<meta name="description" content="Documentation is one of the most important aspects of a good package because without it, users won’t know how to use your package! Documentation is also useful for future-you (so you remember what...">
<meta name="generator" content="bookdown 0.27 with bs4_book()">
<meta property="og:title" content="Chapter 17 Function documentation | R Packages">
<meta property="og:type" content="book">
<meta property="og:url" content="https://r-pkgs.org/man.html">
<meta property="og:image" content="https://r-pkgs.org/images/cover.png">
<meta property="og:description" content="Documentation is one of the most important aspects of a good package because without it, users won’t know how to use your package! Documentation is also useful for future-you (so you remember what...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 17 Function documentation | R Packages">
<meta name="twitter:site" content="@hadley">
<meta name="twitter:description" content="Documentation is one of the most important aspects of a good package because without it, users won’t know how to use your package! Documentation is also useful for future-you (so you remember what...">
<meta name="twitter:image" content="https://r-pkgs.org/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-141182576-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-141182576-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Packages</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="whole-game.html"><span class="header-section-number">2</span> The whole game</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> System setup</a></li>
<li><a class="" href="package-structure-state.html"><span class="header-section-number">4</span> Package structure and state</a></li>
<li><a class="" href="workflows101.html"><span class="header-section-number">5</span> Fundamental development workflows</a></li>
<li><a class="" href="package-within.html"><span class="header-section-number">6</span> The package within</a></li>
<li class="book-part">Package components</li>
<li><a class="" href="r.html"><span class="header-section-number">7</span> R code</a></li>
<li><a class="" href="description.html"><span class="header-section-number">8</span> Package metadata</a></li>
<li><a class="" href="license.html"><span class="header-section-number">9</span> Licensing</a></li>
<li><a class="" href="tests.html"><span class="header-section-number">10</span> Testing</a></li>
<li><a class="" href="namespace.html"><span class="header-section-number">11</span> Namespace</a></li>
<li><a class="" href="data.html"><span class="header-section-number">12</span> External data</a></li>
<li><a class="" href="src.html"><span class="header-section-number">13</span> Compiled code</a></li>
<li><a class="" href="inst.html"><span class="header-section-number">14</span> Installed files</a></li>
<li><a class="" href="misc.html"><span class="header-section-number">15</span> Other components</a></li>
<li class="book-part">Documentation</li>
<li><a class="" href="doc-intro.html"><span class="header-section-number">16</span> Introduction</a></li>
<li><a class="active" href="man.html"><span class="header-section-number">17</span> Function documentation</a></li>
<li><a class="" href="vignettes.html"><span class="header-section-number">18</span> Vignettes</a></li>
<li><a class="" href="important-files.html"><span class="header-section-number">19</span> Other markdown files</a></li>
<li><a class="" href="website.html"><span class="header-section-number">20</span> Website</a></li>
<li class="book-part">Sharing with others</li>
<li><a class="" href="git.html"><span class="header-section-number">21</span> Git and GitHub</a></li>
<li><a class="" href="r-cmd-check.html"><span class="header-section-number">22</span> Automated checking</a></li>
<li><a class="" href="release.html"><span class="header-section-number">23</span> Releasing a package</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r-pkgs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="man" class="section level1" number="17">
<h1>
<span class="header-section-number">17</span> Function documentation<a class="anchor" aria-label="anchor" href="#man"><i class="fas fa-link"></i></a>
</h1>
<!--
Notes re: revision

Now that roxygen2 itself is much better documented, this can become less mechanistic.

Get into some squishier topics: How do you describe a function? How to document parameters?

Examples: how to write them, think about dependencies, running time, ways to not run certain examples that will fly at CRAN
-->
<p>Documentation is one of the most important aspects of a good package because without it, users won’t know how to use your package!
Documentation is also useful for future-you (so you remember what your functions were supposed to do), and for developers extending your package.</p>
<p>There are multiple forms of documentation.
In this chapter, you’ll learn about object documentation, as accessed by <code>?</code> or <code>help()</code>.
Function documentation is reference documentation.
It works like a dictionary: a dictionary is helpful if you want to know what a word means, it won’t help you find the right word for a new situation.
Similarly, function documentation is helpful if you already know the name of the function, but it doesn’t help you find the function you need to solve a given problem.
That’s one of the jobs of vignettes, which you’ll learn about in the next chapter.</p>
<p>R provides a standard way of documenting the functions in a package: you write <code>.Rd</code> files in the <code>man/</code> directory.
These files use a custom syntax, loosely based on LaTeX, and are rendered to HTML, plain text, or pdf for viewing.
We, however, are not going to write these files by hand, and instead we’ll use roxygen2 to generate them from specially formatted comments.</p>
<p>The goal of roxygen2 is to make documenting your functions as easy as possible.
It has a number of advantages over writing <code>.Rd</code> files by hand:</p>
<ul>
<li><p>Code and documentation are intermingled so that when you modify your code, you’re reminded to also update your documentation.</p></li>
<li><p>You can write using markdown, rather than remembering the details of the <code>.Rd</code> syntax.</p></li>
<li><p>roxygen2 dynamically inspects the objects that it documents, so you can skip some boilerplate that you’d otherwise need to write by hand.</p></li>
<li><p>It abstracts over the differences in documenting different types of objects, so you need to learn fewer details.</p></li>
</ul>
<p>In this chapter we’ll focus on documenting functions, but the same ideas apply to documenting datasets, classes and generics, and packages.</p>
<p>As well as generating <code>.Rd</code> files, roxygen2 can also manage your <code>NAMESPACE</code> and the <code>Collate</code> field in <code>DESCRIPTION</code>.
This chapter discusses <code>.Rd</code> files and the collate field.
<a href="namespace.html#namespace">NAMESPACE</a> describes how you can use roxygen2 to manage your <code>NAMESPACE</code>, and why you should care.</p>
<div id="roxygen2-basics" class="section level2" number="17.1">
<h2>
<span class="header-section-number">17.1</span> roxygen2 basics<a class="anchor" aria-label="anchor" href="#roxygen2-basics"><i class="fas fa-link"></i></a>
</h2>
<div id="man-workflow" class="section level3" number="17.1.1">
<h3>
<span class="header-section-number">17.1.1</span> The documentation workflow<a class="anchor" aria-label="anchor" href="#man-workflow"><i class="fas fa-link"></i></a>
</h3>
<p>In this section, we’ll first go over a rough outline of the complete documentation workflow.
Then, we’ll dive into each step individually.
There are four basic steps:</p>
<ol style="list-style-type: decimal">
<li><p>Add roxygen comments to your <code>.R</code> files.</p></li>
<li><p>Run <code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code> (or press Ctrl/Cmd + Shift + D in RStudio) to convert roxygen comments to <code>.Rd</code> files.
(<code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code> calls <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html">roxygen2::roxygenise()</a></code> to do the hard work.)</p></li>
<li><p>Preview documentation with <code>?</code>.</p></li>
<li><p>Rinse and repeat until the documentation looks the way you want.</p></li>
</ol>
<p>The process starts when you add roxygen comments to your source file: roxygen comments start with <code>#'</code> to distinguish them from regular comments.
Here’s documentation for a simple function:</p>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Add together two numbers</span>
<span class="co">#' </span>
<span class="co">#' @param x A number.</span>
<span class="co">#' @param y A number.</span>
<span class="co">#' @return The sum of `x` and `y`.</span>
<span class="co">#' @examples</span>
<span class="co">#' add(1, 1)</span>
<span class="co">#' add(10, 1)</span>
<span class="va">add</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span>
<span class="op">}</span></code></pre></div>
<p>Pressing Ctrl/Cmd + Shift + D (or running <code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code>) will generate a <code>man/add.Rd</code> that looks like:</p>
<pre><code>% Generated by roxygen2 (7.2.0): do not edit by hand
\name{add}
\alias{add}
\title{Add together two numbers}
\usage{
add(x, y)
}
\arguments{
  \item{x}{A number.}

  \item{y}{A number.}
}
\value{
The sum of \code{x} and \code{y}
}
\description{
Add together two numbers
}
\examples{
add(1, 1)
add(10, 1)
}</code></pre>
<p>If you’re familiar with LaTeX, this should look familiar since the <code>.Rd</code> format is loosely based on it.
You can read more about the Rd format in the <a href="https://cran.r-project.org/doc/manuals/R-exts.html#Rd-format">R extensions</a> manual.
Note the comment at the top of the file: it was generated by code and shouldn’t be modified.
Indeed, if you use roxygen2, you’ll rarely need to look at these files.</p>
<p>When you use <code>?add</code>, <code>help("add")</code>, or <code>example("add")</code>, R looks for an <code>.Rd</code> file containing <code>\alias{"add"}</code>.
It then parses the file, converts it into HTML and displays it.
Here’s what the result looks like in RStudio:</p>
<div class="inline-figure">
<img src="images/man-add.png"><!-- -->
</div>
<p>(Note you can preview development documentation because devtools overrides the usual help functions to teach them how to work with source packages. If the documentation doesn’t appear, make sure that you’re using devtools and that you’ve loaded the package with <code><a href="https://devtools.r-lib.org/reference/load_all.html">devtools::load_all()</a></code>.)</p>
</div>
<div id="roxygen-comments" class="section level3" number="17.1.2">
<h3>
<span class="header-section-number">17.1.2</span> roxygen2 comments, blocks, and tags<a class="anchor" aria-label="anchor" href="#roxygen-comments"><i class="fas fa-link"></i></a>
</h3>
<p>roxygen2 comments start with <code>#'</code>.
All the roxygen lines preceding a function are called a <strong>block</strong>.
Blocks are broken up into <strong>tags</strong>, which look like <code>@tagName details</code>.
The content of a tag extends from the end of the tag name to the start of the next tag (or the end of the block).
Each block includes some text before the first tag.
This is called the <strong>introduction</strong>, and is parsed specially, as described next.</p>
<p>Here’s a simple example using the documentation for <code><a href="https://stringr.tidyverse.org/reference/str_unique.html">stringr::str_unique()</a></code>:</p>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Remove duplicated strings</span>
<span class="co">#'</span>
<span class="co">#' `str_unique()` removes duplicated values, with optional control over</span>
<span class="co">#' how duplication is measured.</span>
<span class="co">#'</span>
<span class="co">#' @param string A character vector to return unique entries.</span>
<span class="co">#' @param ... Other options used to control matching behavior between duplicate</span>
<span class="co">#'   strings. Passed on to [stringi::stri_opts_collator()].</span>
<span class="co">#' @return A character vector.</span>
<span class="co">#' @seealso [unique()], [stringi::stri_unique()] which this function wraps.</span>
<span class="co">#' @examples</span>
<span class="co">#' str_unique(c("a", "b", "c", "b", "a"))</span>
<span class="co">#'</span>
<span class="co">#' # Use ... to pass additional arguments to stri_unique()</span>
<span class="co">#' str_unique(c("motley", "mötley", "pinguino", "pingüino"))</span>
<span class="co">#' str_unique(c("motley", "mötley", "pinguino", "pingüino"), strength = 1)</span>
<span class="co">#' @export</span>
<span class="va">str_unique</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">string</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">...</span>
<span class="op">}</span></code></pre></div>
<p>Indent the second and subsequent lines of a tag so that when scanning the documentation it’s easy to see where one tag ends and the next begins.
Tags that always span multiple lines (like <code>@examples</code>) should start on a new line and don’t need to be indented.</p>
<p>The following sections will work through the most important tags.</p>
</div>
</div>
<div id="introduction" class="section level2" number="17.2">
<h2>
<span class="header-section-number">17.2</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<p>Each block includes some text before the first tag.
This is called the <strong>introduction</strong>, and is parsed specially:</p>
<ul>
<li><p>The first <em>sentence</em> becomes the title of the documentation.
That’s what you see when you look at <code><a href="https://rdrr.io/pkg/mypackage/man">help(package = mypackage)</a></code> and is shown at the top of each help file.
It’s a title so it should be written in sentence case and not end in a full stop.</p></li>
<li><p>The next <em>paragraph</em> is the description: this comes first in the documentation and should briefly describe what the function does.
It comes “above the fold” and before the arguments documentation so should be reserved for the most important details.</p></li>
<li><p>Any additional <em>paragraphs</em> go into the details: this is a (often long) section that is shown after the argument description and should go into detail about how the function works.</p></li>
</ul>
<p>The following example shows what the introduction for <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> might look like if it had been written with roxygen.
Note that I’ve carefully wrapped each line of the roxygen2 to block to be less that 80 characters to match the wrapping of my code.</p>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Sum of vector elements</span>
<span class="co">#' </span>
<span class="co">#' `sum` returns the sum of all the values present in its arguments.</span>
<span class="co">#' </span>
<span class="co">#' This is a generic function: methods can be defined for it directly or </span>
<span class="co">#' via the [Summary] group generic. For this to work properly, the arguments</span>
<span class="co">#' `...` should be unnamed, and dispatch is on the first argument.</span>
<span class="va">sum</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">na.rm</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span></code></pre></div>
<div id="writing-good-descriptions" class="section level3" number="17.2.1">
<h3>
<span class="header-section-number">17.2.1</span> Writing good descriptions<a class="anchor" aria-label="anchor" href="#writing-good-descriptions"><i class="fas fa-link"></i></a>
</h3>
<p>The goal of the description is to summarize the goal of the function, usually in under a paragraph.
This can be challenging to because the title of the function is also a very concise summary of the function.
And it’s often especially hard if you’ve just written the function because the purpose seems so intuitively obvious it’s hard to understand why anyone would need an explanation.</p>
</div>
<div id="complex-description" class="section level3" number="17.2.2">
<h3>
<span class="header-section-number">17.2.2</span> Complex description<a class="anchor" aria-label="anchor" href="#complex-description"><i class="fas fa-link"></i></a>
</h3>
<p>The default behavior of the introduction is designed for descriptions that are only a single paragraph.
If you want to include multiple paragraphs of text or other organisations (like a bulleted list), you can use the explicit <code>@description</code> tag.
Here’s an example from the documentation of <code><a href="https://stringr.tidyverse.org/reference/str_like.html">stringr::str_like()</a></code> which mimic’s the <code>LIKE</code> operator from SQL:</p>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Detect the a pattern in the same way as `SQL`'s `LIKE` operator.</span>
<span class="co">#'</span>
<span class="co">#' @description</span>
<span class="co">#' `str_like()` follows the conventions of the SQL `LIKE` operator:</span>
<span class="co">#'</span>
<span class="co">#' * Must match the entire string.</span>
<span class="co">#' * `_` matches a single character (like `.`).</span>
<span class="co">#' * `%` matches any number of characters (like `.*`).</span>
<span class="co">#' * `\%` and `\_` match literal `%` and `_`.</span>
<span class="co">#' * The match is case insensitive by default.</span></code></pre></div>
<p>You can also use explicit <code>@title</code> and <code>@details</code> tags but we don’t recommend it as it adds extra noise to the docs without enabling any additional functionality.</p>
</div>
<div id="multiple-sections" class="section level3" number="17.2.3">
<h3>
<span class="header-section-number">17.2.3</span> Multiple sections<a class="anchor" aria-label="anchor" href="#multiple-sections"><i class="fas fa-link"></i></a>
</h3>
<p>If you have a lot of information to convey in the details, I recommend using markdown headings to break the documentation up in to sections.
A good example of this sort of documentation are the functions in pkgdown (which we’ll talk about shortly).</p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' # Warning</span>
<span class="co">#' Do not operate heavy machinery within 8 hours of using this function.</span></code></pre></div>
</div>
<div id="links-and-images" class="section level3" number="17.2.4">
<h3>
<span class="header-section-number">17.2.4</span> Links and images<a class="anchor" aria-label="anchor" href="#links-and-images"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Regular markdown to link to web pages: <a href="https://r-project.org"><code>https://r-project.org</code></a> or <code>[The R Project](https://r-project.org)</code>.</li>
<li>To link to a function we slightly abuse markdown syntax: <code>[function()]</code> or <code>[pkg::function()]</code>. To link to non-function documentation just omit the <code>()</code>: <code>[topic]</code>, <code>[pkg::topic]()</code>.</li>
<li>Images need to live in …</li>
</ul>
<p>Useful tags</p>
<ul>
<li><p><code>@seealso</code> allows you to point to other useful resources, either on the web, in your package <code>[functioname()]</code>, or another package <code>[pkg::function()]</code>.</p></li>
<li><p>If you have a family of related functions where every function should link to every other function in the family, use <code>@family</code>.
The value of <code>@family</code> should be plural.</p></li>
</ul>
<p>When you start using links and images, you’ll also need to use a new documentation workflow, as the workflow described above does not show images or links between topics or.
If you’d like to also see links, you can use this slower but more comprehensive workflow:</p>
<ol style="list-style-type: decimal">
<li><p>Re-document you package <code>Cmd + Shift + D</code>.</p></li>
<li><div class="inline-figure">Build and install your package by clicking <img src="images/build-reload.png"><!-- --> in the build pane or by pressing Ctrl/Cmd + Shift + B.
This installs it in your regular library, then restarts R and reloads your package.</div></li>
<li><p>Preview documentation with <code>?</code>.</p></li>
</ol>
</div>
</div>
<div id="parameters" class="section level2" number="17.3">
<h2>
<span class="header-section-number">17.3</span> Parameters<a class="anchor" aria-label="anchor" href="#parameters"><i class="fas fa-link"></i></a>
</h2>
<p><code>@param name description</code> describes the function’s inputs or parameters.
The description should provide a succinct summary of the type of the parameter (e.g., string, numeric vector) and what the parameter does.
It’s often useful to describe the default value.</p>
<p>The description should start with a capital letter and end with a full stop.
Most parameters only require a sentence or two of documentation, but for more complex cases you can write multiple paragraphs or use a lists.</p>
<div id="multiple-parameters" class="section level3" number="17.3.1">
<h3>
<span class="header-section-number">17.3.1</span> Multiple parameters<a class="anchor" aria-label="anchor" href="#multiple-parameters"><i class="fas fa-link"></i></a>
</h3>
<p>If multiple parameters are related, you can document them together by separating the names with commas (with no spaces).
For example, <code><a href="https://stringr.tidyverse.org/reference/str_equal.html">stringr::str_equal()</a></code> has:</p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @param x,y A pair of character vectors.</span></code></pre></div>
<p>And <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> uses:</p>
<div class="sourceCode" id="cb262"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @param start,end Two integer vectors. `start` gives the position</span>
<span class="co">#'   of the first character (defaults to first), `end` gives the position</span>
<span class="co">#'   of the last (defaults to last character). Alternatively, pass a two-column</span>
<span class="co">#'   matrix to `start`.</span>
<span class="co">#'</span>
<span class="co">#'   Negative values count backwards from the last character.</span></code></pre></div>
</div>
<div id="inheriting-from-other-functions" class="section level3" number="17.3.2">
<h3>
<span class="header-section-number">17.3.2</span> Inheriting from other functions<a class="anchor" aria-label="anchor" href="#inheriting-from-other-functions"><i class="fas fa-link"></i></a>
</h3>
<p>You can inherit parameter descriptions from other functions using <code>@inheritParams source_function</code>.
This tag will bring in all documentation for parameters that are undocumented in the current function, but documented in the source function.
The source can be a function in the current package, via <code>@inheritParams function</code>, or another package, via <code>@inheritParams package::function</code>.</p>
<p>stringr uses <code>@inheritParams</code> extensively because many functions have <code>string</code> and <code>pattern</code> arguments.
So <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> documents them in detail:</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @param string Input vector. Either a character vector, or something</span>
<span class="co">#'  coercible to one.</span>
<span class="co">#' @param pattern Pattern to look for.</span>
<span class="co">#'</span>
<span class="co">#'   The default interpretation is a regular expression, as described</span>
<span class="co">#'   `vignette("regular-expressions")`. Control options with [regex()].</span>
<span class="co">#'</span>
<span class="co">#'   Match a fixed string (i.e. by comparing only bytes), using</span>
<span class="co">#'   [fixed()]. This is fast, but approximate. Generally,</span>
<span class="co">#'   for matching human text, you'll want [coll()] which</span>
<span class="co">#'   respects character matching rules for the specified locale.</span>
<span class="co">#'</span>
<span class="co">#'   Match character, word, line and sentence boundaries with</span>
<span class="co">#'   [boundary()]. An empty pattern, "", is equivalent to</span>
<span class="co">#'   `boundary("character")`.</span></code></pre></div>
<p>Then the other stringr functions can use <code>@inheritParams str_detect</code> to get a detailed argument description without having to copy and paste.</p>
<p><code>@inheritParams</code> only inherits parameters that are not already documented, allowing you to document some and inherit others.
<code><a href="https://stringr.tidyverse.org/reference/str_match.html">stringr::str_match()</a></code> uses this to good effect to document its unusual <code>pattern</code> argument:</p>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @inheritParams str_detect</span>
<span class="co">#' @param pattern Unlike other stringr functions, `str_replace` only supports</span>
<span class="co">#'   regular expression, as described `vignette("regular-expressions")`. </span>
<span class="co">#'   The pattern should contain at least one capturing group.</span></code></pre></div>
</div>
</div>
<div id="return-value" class="section level2" number="17.4">
<h2>
<span class="header-section-number">17.4</span> Return value<a class="anchor" aria-label="anchor" href="#return-value"><i class="fas fa-link"></i></a>
</h2>
<p><code>@return description</code> describes the output from the function.
You should briefly summarise the type of output (e.g. a character vector, or a data frame) and its size (length if a vector, or rows and columns if data frame).
The focus should generally be on describing the “shape” of the output, rather than the precise details of the values, which are better described in the description and details.</p>
<div class="cran">
<p>For initial CRAN submission, all functions must document their a <code>@return</code> value.
This is not required for subsequent submission, but it’s good practice.
There’s currently no way to enforce this (we’re <a href="https://github.com/r-lib/roxygen2/issues/1334">working on it</a>) which is why you’ll notice some tidyverse functions are missing it.</p>
</div>
</div>
<div id="dry2" class="section level2" number="17.5">
<h2>
<span class="header-section-number">17.5</span> Examples<a class="anchor" aria-label="anchor" href="#dry2"><i class="fas fa-link"></i></a>
</h2>
<p><code>@examples</code> provides executable R code showing how to use the function in practice.
This is a very important part of the documentation because many people look at the examples first.
Example code must work without errors as it is run automatically as part of <code>R CMD check</code>.</p>
<p>Use examples to show the basic operation of the function, and then to highlight any particularly important properties.
Bear in mind that you want examples to execute relatively quickly so users can run them, and so that when you make a website for your package it doesn’t take ages to generate the documentation.</p>
<div class="cran">
<p>If submitting to CRAN, examples must run in under 10 minutes.</p>
</div>
<p>Use <code>#</code> to divide into sections.</p>
<p>For the purpose of illustration, it’s often useful to include code that causes an error.
<code>\dontrun{}</code> allows you to include code in the example that is not run.
(You used to be able to use <code>\donttest{}</code> for a similar purpose, but it’s no longer recommended because it actually <strong>is</strong> tested.)</p>
<div class="cran">
<p>For initial CRAN submission of your package, all functions must contain some runnable examples (i.e. there must be examples and they must not all be wrapped in <code>\dontrun{}</code>.</p>
</div>
<div id="things-you-shouldnt-do" class="section level3" number="17.5.1">
<h3>
<span class="header-section-number">17.5.1</span> Things you shouldn’t do<a class="anchor" aria-label="anchor" href="#things-you-shouldnt-do"><i class="fas fa-link"></i></a>
</h3>
<p>Examples shouldn’t affect the users computer.
This means:</p>
<ul>
<li>Attaching packages</li>
<li>Don’t change global options.</li>
<li>Don’t modify files (including creating new ones).</li>
<li>Don’t copy to the clipboard.</li>
</ul>
</div>
<div id="conditionally-running" class="section level3" number="17.5.2">
<h3>
<span class="header-section-number">17.5.2</span> Conditionally running<a class="anchor" aria-label="anchor" href="#conditionally-running"><i class="fas fa-link"></i></a>
</h3>
<p><code>@examplesIf</code></p>
</div>
</div>
<div id="sharing-documentation" class="section level2" number="17.6">
<h2>
<span class="header-section-number">17.6</span> Sharing documentation<a class="anchor" aria-label="anchor" href="#sharing-documentation"><i class="fas fa-link"></i></a>
</h2>
<p>There is a tension between the DRY (don’t repeat yourself) principle of programming and the need for documentation to be self-contained.
It’s frustrating to have to navigate through multiple help files in order to pull together all the pieces you need.
roxygen2 provides a number of ways to avoid you having to repeat yourself as a developer, while not forcing the user to follow a spiderweb of links to find everything they need.
Here we’ll focus on two:</p>
<ul>
<li><p>Sharing documentation across functions with <code>@inherit</code>.</p></li>
<li><p>Combining the documentation for multiple related functions into one topics with <code>@describeIn</code> or <code>@rdname</code>.</p></li>
</ul>
<p>There are also two markdown features that are useful in more complex situations:</p>
<ul>
<li>You can use child documents to share <code>Rmd</code> between topics.</li>
<li>You can use inline R code to generate documentation.</li>
</ul>
<div id="documenting-multiple-functions-in-the-same-file" class="section level3" number="17.6.1">
<h3>
<span class="header-section-number">17.6.1</span> Documenting multiple functions in the same file<a class="anchor" aria-label="anchor" href="#documenting-multiple-functions-in-the-same-file"><i class="fas fa-link"></i></a>
</h3>
<p>You can document multiple functions in the same file by using either <code>@rdname</code> or <code>@describeIn</code>.
However, it’s a technique best used with caution: documenting too many functions in one place leads to confusing documentation.
You should use it when functions have very similar arguments, or have complementary effects (e.g., <code><a href="https://rdrr.io/r/base/connections.html">open()</a></code> and <code><a href="https://rdrr.io/r/base/connections.html">close()</a></code> methods).</p>
<div class="sourceCode" id="cb265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' The length/width of a string</span>
<span class="co">#'</span>
<span class="co">#' @description</span>
<span class="co">#' `str_length()` returns the number of codepoints in a string. These are</span>
<span class="co">#' the individual elements (which are often, but not always letters) that</span>
<span class="co">#' can be extracted with [str_sub()].</span>
<span class="co">#'</span>
<span class="co">#' `str_width()` returns how much space the string will occupy when printed</span>
<span class="co">#' in a fixed width font (i.e. when printed in the console).</span>
<span class="co">#'</span>
<span class="co">#' @inheritParams str_detect</span>
<span class="co">#' @return A numeric vector giving number of characters (code points) in</span>
<span class="co">#'   each element of the character vector. Missing strings have missing</span>
<span class="co">#'   length.</span>
<span class="co">#' @seealso [stringi::stri_length()] which this function wraps.</span></code></pre></div>
<p><code>@describeIn</code> is designed for the most common cases:</p>
<ul>
<li>Documenting methods in a generic.</li>
<li>Documenting methods in a class.</li>
<li>Documenting functions with the same (or similar) arguments.</li>
</ul>
<p>It generates a new section, named either “Methods (by class)”, “Methods (by generic)” or “Functions”.
The section contains a bulletted list describing each function.
They’re labelled so that you know what function or method it’s talking about.
Here’s an example, documenting an imaginary new generic:</p>
<div class="sourceCode" id="cb266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Foo bar generic</span>
<span class="co">#'</span>
<span class="co">#' @param x Object to foo.</span>
<span class="va">foobar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html">UseMethod</a></span><span class="op">(</span><span class="st">"foobar"</span><span class="op">)</span>

<span class="co">#' @describeIn foobar Difference between the mean and the median</span>
<span class="va">foobar.numeric</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>

<span class="co">#' @describeIn foobar First and last values pasted together in a string.</span>
<span class="va">foobar.character</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"-"</span>, <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p>An alternative to <code>@describeIn</code> is <code>@rdname</code>.
It overrides the default file name generated by roxygen and merges documentation for multiple objects into one file.
This gives you the complete freedom to combine documentation as you see fit.</p>
<p>There are two ways to use <code>@rdname</code>.
You can add documentation to an existing function:</p>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Basic arithmetic</span>
<span class="co">#'</span>
<span class="co">#' @param x,y numeric vectors.</span>
<span class="va">add</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span>

<span class="co">#' @rdname add</span>
<span class="va">times</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span></code></pre></div>
<p>Or, you can create a dummy documentation file by documenting <code>NULL</code> and setting an informative <code>@name</code>.</p>
<div class="sourceCode" id="cb268"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Basic arithmetic</span>
<span class="co">#'</span>
<span class="co">#' @param x,y numeric vectors.</span>
<span class="co">#' @name arith</span>
<span class="cn">NULL</span>
<span class="co">#&gt; NULL</span>

<span class="co">#' @rdname arith</span>
<span class="va">add</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span>

<span class="co">#' @rdname arith</span>
<span class="va">times</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span></code></pre></div>
</div>
</div>
<div id="section" class="section level2" number="17.7">
<h2>
<span class="header-section-number">17.7</span> <a class="anchor" aria-label="anchor" href="#section"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="doc-intro.html"><span class="header-section-number">16</span> Introduction</a></div>
<div class="next"><a href="vignettes.html"><span class="header-section-number">18</span> Vignettes</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#man"><span class="header-section-number">17</span> Function documentation</a></li>
<li>
<a class="nav-link" href="#roxygen2-basics"><span class="header-section-number">17.1</span> roxygen2 basics</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#man-workflow"><span class="header-section-number">17.1.1</span> The documentation workflow</a></li>
<li><a class="nav-link" href="#roxygen-comments"><span class="header-section-number">17.1.2</span> roxygen2 comments, blocks, and tags</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#introduction"><span class="header-section-number">17.2</span> Introduction</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#writing-good-descriptions"><span class="header-section-number">17.2.1</span> Writing good descriptions</a></li>
<li><a class="nav-link" href="#complex-description"><span class="header-section-number">17.2.2</span> Complex description</a></li>
<li><a class="nav-link" href="#multiple-sections"><span class="header-section-number">17.2.3</span> Multiple sections</a></li>
<li><a class="nav-link" href="#links-and-images"><span class="header-section-number">17.2.4</span> Links and images</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#parameters"><span class="header-section-number">17.3</span> Parameters</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#multiple-parameters"><span class="header-section-number">17.3.1</span> Multiple parameters</a></li>
<li><a class="nav-link" href="#inheriting-from-other-functions"><span class="header-section-number">17.3.2</span> Inheriting from other functions</a></li>
</ul>
</li>
<li><a class="nav-link" href="#return-value"><span class="header-section-number">17.4</span> Return value</a></li>
<li>
<a class="nav-link" href="#dry2"><span class="header-section-number">17.5</span> Examples</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#things-you-shouldnt-do"><span class="header-section-number">17.5.1</span> Things you shouldn’t do</a></li>
<li><a class="nav-link" href="#conditionally-running"><span class="header-section-number">17.5.2</span> Conditionally running</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sharing-documentation"><span class="header-section-number">17.6</span> Sharing documentation</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#documenting-multiple-functions-in-the-same-file"><span class="header-section-number">17.6.1</span> Documenting multiple functions in the same file</a></li></ul>
</li>
<li><a class="nav-link" href="#section"><span class="header-section-number">17.7</span></a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r-pkgs/blob/main/man.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r-pkgs/edit/main/man.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Packages</strong>" was written by Hadley Wickham, Jennifer Bryan. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
