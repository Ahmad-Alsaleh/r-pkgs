<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Package metadata | R Packages</title>
<meta name="author" content="Hadley Wickham">
<meta name="author" content="Jennifer Bryan">
<meta name="description" content="The job of the DESCRIPTION file is to store important metadata about your package. When you first start writing packages, you’ll mostly use these metadata to record what packages are needed to run...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 8 Package metadata | R Packages">
<meta property="og:type" content="book">
<meta property="og:url" content="https://r-pkgs.org/description.html">
<meta property="og:image" content="https://r-pkgs.org/images/cover.png">
<meta property="og:description" content="The job of the DESCRIPTION file is to store important metadata about your package. When you first start writing packages, you’ll mostly use these metadata to record what packages are needed to run...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 8 Package metadata | R Packages">
<meta name="twitter:site" content="@hadley">
<meta name="twitter:description" content="The job of the DESCRIPTION file is to store important metadata about your package. When you first start writing packages, you’ll mostly use these metadata to record what packages are needed to run...">
<meta name="twitter:image" content="https://r-pkgs.org/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-141182576-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-141182576-1');
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Packages</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="whole-game.html"><span class="header-section-number">2</span> The whole game</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> System setup</a></li>
<li><a class="" href="package-structure-state.html"><span class="header-section-number">4</span> Package structure and state</a></li>
<li><a class="" href="workflows101.html"><span class="header-section-number">5</span> Fundamental development workflows</a></li>
<li><a class="" href="package-within.html"><span class="header-section-number">6</span> The package within</a></li>
<li class="book-part">Package components</li>
<li><a class="" href="r.html"><span class="header-section-number">7</span> R code</a></li>
<li><a class="active" href="description.html"><span class="header-section-number">8</span> Package metadata</a></li>
<li><a class="" href="license.html"><span class="header-section-number">9</span> Licensing</a></li>
<li><a class="" href="man.html"><span class="header-section-number">10</span> Object documentation</a></li>
<li><a class="" href="vignettes.html"><span class="header-section-number">11</span> Vignettes: long-form documentation</a></li>
<li><a class="" href="tests.html"><span class="header-section-number">12</span> Testing</a></li>
<li><a class="" href="namespace.html"><span class="header-section-number">13</span> Namespace</a></li>
<li><a class="" href="data.html"><span class="header-section-number">14</span> External data</a></li>
<li><a class="" href="src.html"><span class="header-section-number">15</span> Compiled code</a></li>
<li><a class="" href="inst.html"><span class="header-section-number">16</span> Installed files</a></li>
<li><a class="" href="misc.html"><span class="header-section-number">17</span> Other components</a></li>
<li class="book-part">Sharing with others</li>
<li><a class="" href="git.html"><span class="header-section-number">18</span> Git and GitHub</a></li>
<li><a class="" href="r-cmd-check.html"><span class="header-section-number">19</span> Automated checking</a></li>
<li><a class="" href="release.html"><span class="header-section-number">20</span> Releasing a package</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r-pkgs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="description" class="section level1">
<h1>
<span class="header-section-number">8</span> Package metadata<a class="anchor" aria-label="anchor" href="#description"><i class="fas fa-link"></i></a>
</h1>
<p>The job of the <code>DESCRIPTION</code> file is to store important metadata about your package.
When you first start writing packages, you’ll mostly use these metadata to record what packages are needed to run your package.
However, as time goes by, other aspects of the metadata file will become useful to you, such as revealing what your package does (via the <code>Title</code> and <code>Description</code>) and whom to contact (you!) if there are any problems.</p>
<p>Every package must have a <code>DESCRIPTION</code>.
In fact, it’s the defining feature of a package (RStudio and devtools consider any directory containing <code>DESCRIPTION</code> to be a package)<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The relationship between “has a &lt;code&gt;DESCRIPTION&lt;/code&gt; file” and “is a package” is not quite this clear-cut.
Many non-package projects use a &lt;code&gt;DESCRIPTION&lt;/code&gt; file to declare their dependencies, i.e. which packages they rely on.
In fact, the bookdown project for this book does exactly this!
This off-label use of &lt;code&gt;DESCRIPTION&lt;/code&gt; makes it easy to piggy-back on package development tooling to install all the packages necessary to work with a non-package project.&lt;/p&gt;"><sup>17</sup></a>.
To get you started, <code>usethis::create_package("mypackage")</code> automatically adds a bare-bones <code>DESCRIPTION</code> file.
This will allow you to start writing the package without having to worry about the metadata until you need to.
This minimal <code>DESCRIPTION</code> will vary a bit depending on your settings, but should look something like this:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb119-1"><a href="description.html#cb119-1"></a><span class="fu">Package</span><span class="kw">:</span><span class="at"> mypackage</span></span>
<span id="cb119-2"><a href="description.html#cb119-2"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> What the Package Does (One Line, Title Case)</span></span>
<span id="cb119-3"><a href="description.html#cb119-3"></a><span class="fu">Version</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.0.0.9000</span></span>
<span id="cb119-4"><a href="description.html#cb119-4"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb119-5"><a href="description.html#cb119-5"></a><span class="at">    person("First", "Last", , "first.last@example.com", role = c("aut", "cre"),</span></span>
<span id="cb119-6"><a href="description.html#cb119-6"></a><span class="at">           comment = c(ORCID = "YOUR-ORCID-ID"))</span></span>
<span id="cb119-7"><a href="description.html#cb119-7"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> What the package does (one paragraph).</span></span>
<span id="cb119-8"><a href="description.html#cb119-8"></a><span class="fu">License</span><span class="kw">:</span><span class="at"> `use_mit_license()`, `use_gpl3_license()` or friends to pick a</span></span>
<span id="cb119-9"><a href="description.html#cb119-9"></a><span class="at">    license</span></span>
<span id="cb119-10"><a href="description.html#cb119-10"></a><span class="fu">Encoding</span><span class="kw">:</span><span class="at"> UTF-8</span></span>
<span id="cb119-11"><a href="description.html#cb119-11"></a><span class="fu">Roxygen</span><span class="kw">:</span><span class="at"> list(markdown = TRUE)</span></span>
<span id="cb119-12"><a href="description.html#cb119-12"></a><span class="fu">RoxygenNote</span><span class="kw">:</span><span class="at"> </span><span class="fl">7.1.2</span></span></code></pre></div>
<p>If you create a lot of packages, you can customize the default content of new <code>DESCRIPTION</code> files by setting the global option <code>usethis.description</code> to a named list.
You can pre-configure your preferred name, email, license, etc.
See the <a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html">article on usethis setup</a> for more details.</p>
<p><code>DESCRIPTION</code> uses a simple file format called DCF, the Debian control format.
You can see most of the structure in the examples in this chapter.
Each line consists of a <strong>field</strong> name and a value, separated by a colon.
When values span multiple lines, they need to be indented:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb120-1"><a href="description.html#cb120-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> The description of a package is usually long,</span></span>
<span id="cb120-2"><a href="description.html#cb120-2"></a><span class="at">    spanning multiple lines. The second and subsequent lines</span></span>
<span id="cb120-3"><a href="description.html#cb120-3"></a><span class="at">    should be indented, usually with four spaces.</span></span></code></pre></div>
<p>If you ever need to work with a <code>DESCRIPTION</code> file programmatically, take a look at the <a href="https://www.r-pkg.org/pkg/desc">desc package</a>, which usethis uses heavily under-the-hood.</p>
<p>This chapter will show you how to use the most important <code>DESCRIPTION</code> fields.
<code>Imports</code> and, to a lesser extent, <code>Suggests</code> are the key fields for declaring your dependencies.
<code>Title</code> and <code>Description</code> provide concise information about your package, suitable for inclusion in package lists.
We discuss a few other useful fields, some of which are sufficiently important to merit dedicated treatment elsewhere in the book, such as licensing (covered in Chapter <a href="license.html#license">9</a>).</p>
<div id="description-dependencies" class="section level2">
<h2>
<span class="header-section-number">8.1</span> Dependencies: What does your package need?<a class="anchor" aria-label="anchor" href="#description-dependencies"><i class="fas fa-link"></i></a>
</h2>
<p>It’s the job of the <code>DESCRIPTION</code> to list the packages that your package needs to work.
R has a rich set of ways to describe different types of dependencies.
A key point is whether a dependency is needed by regular users or is only needed for development tasks or optional functionality.</p>
<p>Packages listed in <code>Imports</code> are needed by your users at runtime.
The following lines indicate that your package absolutely needs both dplyr and tidyr to work.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb121-1"><a href="description.html#cb121-1"></a><span class="fu">Imports</span><span class="kw">:</span></span>
<span id="cb121-2"><a href="description.html#cb121-2"></a><span class="at">    dplyr,</span></span>
<span id="cb121-3"><a href="description.html#cb121-3"></a><span class="at">    tidyr</span></span></code></pre></div>
<p>Packages listed in <code>Suggests</code> are either needed for development tasks or <em>might</em> unlock optional functionality for your users.
The lines below indicate that, while your package can take advantage of ggplot2 and testthat, they’re not absolutely required:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb122-1"><a href="description.html#cb122-1"></a><span class="fu">Suggests</span><span class="kw">:</span></span>
<span id="cb122-2"><a href="description.html#cb122-2"></a><span class="at">    ggplot2,</span></span>
<span id="cb122-3"><a href="description.html#cb122-3"></a><span class="at">    testthat</span></span></code></pre></div>
<p>For example, the <a href="https://withr.r-lib.org">withr package</a> is very useful for writing tests that clean up after themselves.
Such usage is compatible with listing withr in <code>Suggests</code>, since regular users don’t need to run the tests.
But sometimes a package might also use withr in its own functions, perhaps to offer its own <code>with_*()</code> and <code>local_*()</code> functions.
In that case, withr should be listed in <code>Imports</code>.</p>
<p>Both <code>Imports</code> and <code>Suggests</code> take a comma-separated list of package names.
We recommend putting one package on each line, and keeping them in alphabetical order.
A non-haphazard order makes it easier for humans to parse this field and appreciate changes.
The easiest way to add a package to <code>Imports</code> or <code>Suggests</code> is with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>.
If the dependencies are already in alphabetical order, <code><a href="https://usethis.r-lib.org/reference/use_package.html">use_package()</a></code> will keep it that way.
In general, it can be nice to run <code><a href="https://usethis.r-lib.org/reference/tidyverse.html">usethis::use_tidy_description()</a></code> regularly, which orders and formats <code>DESCRIPTION</code> fields according to a fixed standard.</p>
<p><code>Imports</code> and <code>Suggests</code> differ in the strength and nature of dependency:</p>
<ul>
<li>
<p><code>Imports</code>: packages listed here <em>must</em> be present for your package to work.
Any time your package is installed, those packages will also be installed, if
not already present.
<code><a href="https://devtools.r-lib.org/reference/load_all.html">devtools::load_all()</a></code> also checks that all packages in <code>Imports</code> are
installed.</p>
<p>Adding a package to <code>Imports</code> ensures it will be installed, but it does <em>not</em>
mean that it will be attached along with your package, i.e. it does not do the
equivalent of <code><a href="https://rdrr.io/r/base/library.html">library(otherpkg)</a></code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The difference between loading and attaching a package is covered in more detail in &lt;a href="namespace.html#search-path"&gt;13.2&lt;/a&gt;.&lt;/p&gt;'><sup>18</sup></a>.
Inside your package, the best practice is to explicitly refer to external
functions using the syntax <code>package::function()</code>.
This makes it very easy to identify which functions live outside of your
package.
This is especially useful when you read your code in the future.</p>
<p>If you use a lot of functions from another package, this is rather verbose.
There’s also a minor performance penalty associated with <code>::</code> (on the order of
5µs, so it will only matter if you call the function millions of times).
You’ll learn about alternative ways to make functions in other packages
available inside your package in section <a href="namespace.html#imports">13.6</a>.</p>
</li>
<li>
<p><code>Suggests</code>: your package can use these packages, but doesn’t require them.
You might use suggested packages for example datasets, to run tests, build
vignettes, or maybe there’s only one function that needs the package.</p>
<p>Packages listed in <code>Suggests</code> are not automatically installed along with
your package.
This means that you can’t assume the package is available unconditionally.
Below we show various ways to handle these checks.</p>
</li>
</ul>
<p>If you add packages to <code>DESCRIPTION</code> with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>, it will also remind you of the recommended way to call them.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span> <span class="co"># Default is "Imports"</span>
<span class="co">#&gt; <span style="color: #00BB00;">✔</span> Adding <span style="color: #0000BB;">'dplyr'</span> to <span style="color: #00BB00;">Imports</span> field in DESCRIPTION</span>
<span class="co">#&gt; <span style="color: #BB0000;">•</span> Refer to functions with <span style="color: #555555;">`dplyr::fun()`</span></span>

<span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"Suggests"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">✔</span> Adding <span style="color: #0000BB;">'ggplot2'</span> to <span style="color: #00BB00;">Suggests</span> field in DESCRIPTION</span>
<span class="co">#&gt; <span style="color: #BB0000;">•</span> Use <span style="color: #555555;">`requireNamespace("ggplot2", quietly = TRUE)`</span> to test if package is installed</span>
<span class="co">#&gt; <span style="color: #BB0000;">•</span> Then directly refer to functions with <span style="color: #555555;">`ggplot2::fun()`</span></span></code></pre></div>
<div id="guarding-the-use-of-a-suggested-package" class="section level3">
<h3>
<span class="header-section-number">8.1.1</span> Guarding the use of a suggested package<a class="anchor" aria-label="anchor" href="#guarding-the-use-of-a-suggested-package"><i class="fas fa-link"></i></a>
</h3>
<p>Inside a function in your own package, check for the availability of a suggested package with <code><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace("pkg", quietly = TRUE)</a></code>.
There are two basic scenarios:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the suggested package is required </span>
<span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">"pkg"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span>
      <span class="st">"Package \"pkg\" must be installed to use this function."</span>,
      call. <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">}</span>
  <span class="co"># code that includes calls such as pkg::f()</span>
<span class="op">}</span>

<span class="co"># the suggested package is optional; a fallback method is available</span>
<span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">"pkg"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu">pkg</span><span class="fu">::</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu">g</span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>The rlang package has some useful functions for checking package availability.
Here’s how the checks around a suggested package could look if you use rlang:</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the suggested package is required </span>
<span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html">check_installed</a></span><span class="op">(</span><span class="st">"pkg"</span>, reason <span class="op">=</span> <span class="st">"to use `my_fun()`"</span><span class="op">)</span>
  <span class="co"># code that includes calls such as pkg::f()</span>
<span class="op">}</span>

<span class="co"># the suggested package is optional; a fallback method is available</span>
<span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html">is_installed</a></span><span class="op">(</span><span class="st">"pkg"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu">pkg</span><span class="fu">::</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu">g</span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>These rlang functions have handy features for programming, such as vectorization over <code>pkg</code>, classed errors with a data payload, and, for <code>check_installed()</code>, an offer to install the needed package in an interactive session.</p>
<p><code>Suggests</code> isn’t terribly relevant for packages where the user base is approximately equal to the development team or for packages that are used in a very predictable context.
In that case, it’s reasonable to just use <code>Imports</code> for everything.
Using <code>Suggests</code> is mostly a courtesy to external users or to accommodate very lean installations.
It can free users from downloading rarely needed packages (especially those that are tricky to install) and lets them get started with your package as quickly as possible.</p>
<p>Another common place to use a suggested package is in an example and here we often guard with <code><a href="https://rdrr.io/r/base/library.html">require()</a></code> (but you’ll also see <code><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace()</a></code> used for this).
This example is from <code><a href="https://ggplot2.tidyverse.org/reference/coord_map.html">ggplot2::coord_map()</a></code>.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @examples</span>
<span class="co">#' if (require("maps")) {</span>
<span class="co">#'   nz &lt;- map_data("nz")</span>
<span class="co">#'   # Prepare a map of NZ</span>
<span class="co">#'   nzmap &lt;- ggplot(nz, aes(x = long, y = lat, group = group)) +</span>
<span class="co">#'     geom_polygon(fill = "white", colour = "black")</span>
<span class="co">#'  </span>
<span class="co">#'   # Plot it in cartesian coordinates</span>
<span class="co">#'   nzmap</span>
<span class="co">#' }</span></code></pre></div>
<p>An example is basically the only place where we would use <code><a href="https://rdrr.io/r/base/library.html">require()</a></code> inside a package.</p>
<p>Another place you might use a suggested package is in a vignette.
The tidyverse team generally writes vignettes as if all suggested packages are available.
But if you choose to use suggested packages conditionally in your vignettes, the knitr chunk options <code>purl</code> and <code>eval</code> may be useful for achieving this.
See Chapter <a href="vignettes.html#vignettes">11</a> for more discussion of vignettes.</p>
<div id="whether-and-how-to-guard-in-a-test" class="section level4">
<h4>
<span class="header-section-number">8.1.1.1</span> Whether and how to guard in a test<a class="anchor" aria-label="anchor" href="#whether-and-how-to-guard-in-a-test"><i class="fas fa-link"></i></a>
</h4>
<p>As with vignettes, the tidyverse team does not usually guard the use of a suggested package in a test.
In general, for vignettes and tests, we assume all suggested packages are available.
The motivation for this posture is self-consistency and pragmatism.
The key packages needed to run tests or build vignettes (e.g. testthat or knitr) appear in <code>Suggests</code>, not in <code>Imports</code> or <code>Depends</code>.
Therefore, if the tests are actually executing or the vignettes are being built, that implies that an expansive notion of package dependencies has been applied.
Also, empirically, in every important scenario of running <code>R CMD check</code>, the suggested packages are installed.
This is generally true for CRAN and we ensure that it’s true in our own automated checks.
However, it’s important to note that other package maintainers take a different stance and choose to protect all usage of suggested packages in their tests and vignettes.</p>
<p>Sometimes even the tidyverse team makes an exception and guards the use of a suggested package in a test.
Here’s a test from ggplot2, which uses <code><a href="https://testthat.r-lib.org/reference/skip.html">testthat::skip_if_not_installed()</a></code> to skip execution if the suggested sf package is not available.</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"basic plot builds without error"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://testthat.r-lib.org/reference/skip.html">skip_if_not_installed</a></span><span class="op">(</span><span class="st">"sf"</span><span class="op">)</span>

  <span class="va">nc_tiny_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">81.473</span>, <span class="op">-</span><span class="fl">81.741</span>, <span class="op">-</span><span class="fl">81.67</span>, <span class="op">-</span><span class="fl">81.345</span>, <span class="op">-</span><span class="fl">81.266</span>, <span class="op">-</span><span class="fl">81.24</span>, <span class="op">-</span><span class="fl">81.473</span>,
      <span class="fl">36.234</span>, <span class="fl">36.392</span>, <span class="fl">36.59</span>, <span class="fl">36.573</span>, <span class="fl">36.437</span>, <span class="fl">36.365</span>, <span class="fl">36.234</span><span class="op">)</span>,
    ncol <span class="op">=</span> <span class="fl">2</span>
  <span class="op">)</span>

  <span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_as_sf</span><span class="op">(</span>
    <span class="fu"><a href="https://tibble.tidyverse.org/reference/deprecated.html">data_frame</a></span><span class="op">(</span>
      NAME <span class="op">=</span> <span class="st">"ashe"</span>,
      geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_sfc</span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu">st_polygon</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">nc_tiny_coords</span><span class="op">)</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>

  <span class="fu">expect_doppelganger</span><span class="op">(</span><span class="st">"sf-polygons"</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>What might justify the use of <code><a href="https://testthat.r-lib.org/reference/skip.html">skip_if_not_installed()</a></code>?
In this case, the sf package can be nontrivial to install and it is conceivable that a contributor would want to run the remaining tests, even if sf is not available.</p>
<p>Finally, note that <code>testthat::skip_if_not_installed(pkg, minimum_version = "x.y.z")</code> can be used to conditionally skip a test based on the version of the other package.</p>
</div>
</div>
<div id="minimum-versions" class="section level3">
<h3>
<span class="header-section-number">8.1.2</span> Minimum versions<a class="anchor" aria-label="anchor" href="#minimum-versions"><i class="fas fa-link"></i></a>
</h3>
<p>If you need a specific version of a package, specify it in parentheses after the package name:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb128-1"><a href="description.html#cb128-1"></a><span class="fu">Imports</span><span class="kw">:</span></span>
<span id="cb128-2"><a href="description.html#cb128-2"></a><span class="at">    dplyr (&gt;= 1.0.0),</span></span>
<span id="cb128-3"><a href="description.html#cb128-3"></a><span class="at">    tidyr (&gt;= 1.1.0)</span></span></code></pre></div>
<p>You always want to specify a minimum version (<code>dplyr (&gt;= 1.0.0)</code>) rather than an exact version (<code>dplyr (== 1.0.0)</code>).
Since R can’t have multiple versions of the same package loaded at the same time, specifying an exact dependency dramatically increases the chance of conflicting versions<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The need to specify the exact versions of packages, rather than minimum versions, comes up more often in the development of non-package projects.
The &lt;a href="https://rstudio.github.io/renv/"&gt;renv package&lt;/a&gt; provides a way to do this, by implementing project-specific environments (package libraries).
renv is a reboot of an earlier package called packrat.
If you want to freeze the dependencies of a project at exact versions, use renv instead of (or possibly in addition to) a &lt;code&gt;DESCRIPTION&lt;/code&gt; file.&lt;/p&gt;'><sup>19</sup></a>.</p>
<p>Versioning is most important if you will release your package for use by others.
Usually people don’t have exactly the same versions of packages installed that you do.
If someone has an older package that doesn’t have a function your package needs, they’ll get an unhelpful error message if your package does not advertise the minimum version it needs.
However, if you state a minimum version, they’ll learn about this problem clearly, probably at the time of installing your package.</p>
<p>Think carefully if you declare a minimum version for a dependency.
In some sense, the safest thing to do is to require a version greater than or equal to the package’s current version.
For public work, this is most naturally defined as the current CRAN version of a package; private or personal projects may adopt some other convention.
But it’s important to appreciate the implications for people who try to install your package: if their local installation doesn’t fulfill all of your requirements around versions, installation will either fail or force upgrades of these dependencies.
This is desirable if your minimum version requirements are genuine, i.e. your package would be broken otherwise.
But if your stated requirements have a less solid rationale, this may be unnecessarily conservative and inconvenient.</p>
<p>In the absence of clear, hard requirements, you should set minimum versions (or not) based on your expected user base, the package versions they are likely to have, and a cost-benefit analysis of being too lax versus too conservative.
The <em>de facto</em> policy of the tidyverse team is to specify a minimum version when using a known new feature or when someone encounters a version problem in authentic use.
This isn’t perfect, but we don’t currently have the tooling to do better, and it seems to work fairly well in practice.</p>
</div>
<div id="other-dependencies" class="section level3">
<h3>
<span class="header-section-number">8.1.3</span> Other dependencies<a class="anchor" aria-label="anchor" href="#other-dependencies"><i class="fas fa-link"></i></a>
</h3>
<p>There are three other fields that allow you to express more specialised dependencies:</p>
<ul>
<li>
<p><code>Depends</code>: Prior to the roll-out of namespaces in R 2.14.0 in 2011, <code>Depends</code>
was the only way to “depend” on another package.
Now, despite the name, you should almost always use <code>Imports</code>, not <code>Depends</code>.
You’ll learn why, and when you should still use <code>Depends</code>, in
<a href="namespace.html#namespace">namespaces</a>.</p>
<p>You can also use <code>Depends</code> to state a minimum version for R itself, e.g.
<code>Depends: R (&gt;= 4.0.0)</code>.
Again, think carefully if you do this.
This raises the same issues as setting a minimum version for a package you
depend on, except the stakes are much higher when it comes to R itself.
Users can’t simply consent to the necessary upgrade, so, if other packages
depend on yours, your minimum version requirement for R can cause a cascade of
package installation failures.</p>
<ul>
<li>The <a href="https://cran.r-project.org/package=backports">backports package</a> is
useful if you want to use a function like <code>tools::R_user_dir(()</code>, which was
introduced in 4.0.0 in 2020, while still supporting older R versions.</li>
<li>The tidyverse packages officially support the current R version, the devel
version, and four previous versions.
We proactively test this support in the standard build matrix we use for
continuous integration.</li>
<li>Packages with a lower level of use may not need this level of rigour.
The main takeaway is: if you state a minimum of R, you should have a reason
and you should take reasonable measures to test your claim regularly.</li>
</ul>
</li>
<li><p><code>LinkingTo</code>: packages listed here rely on C or C++ code in another package.
You’ll learn more about <code>LinkingTo</code> in Chapter <a href="src.html#src">15</a>.</p></li>
<li><p><code>Enhances</code>: packages listed here are “enhanced” by your package.
Typically, this means you provide methods for classes defined in another
package (a sort of reverse <code>Suggests</code>).
But it’s hard to define what that means, so we don’t recommend using
<code>Enhances</code>.</p></li>
</ul>
<p>You can also list things that your package needs outside of R in the <code>SystemRequirements</code> field.
But this is just a plain text field and is not automatically checked.
Think of it as a quick reference; you’ll also need to include detailed system requirements (and how to install them) in your README.</p>
<!-- This description of SystemRequirements seems a bit too dismissive or wishy-washy now, given the importance of this field to RSPM, ubuntu-based CI, etc. But at the moment, we think more discussion fits best in the compiled code chapter. -->
<div id="an-r-version-gotcha" class="section level4">
<h4>
<span class="header-section-number">8.1.3.1</span> An R version gotcha<a class="anchor" aria-label="anchor" href="#an-r-version-gotcha"><i class="fas fa-link"></i></a>
</h4>
<p>Before we leave this topic, we give a concrete example of how easily an R version dependency can creep in and have a broader impact than you might expect.
The <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code> function writes a single R object as an <code>.rds</code> file, an R-specific format.
For almost 20 years, <code>.rds</code> files used the “version 2” serialization format.
“Version 3” became the new default in R 3.6.0 (released April 2019) and cannot be read by R versions prior to 3.5.0 (released April 2018).</p>
<p>Many R packages have at least one <code>.rds</code> file lurking within and, if that gets re-generated with a modern R version, by default, the new <code>.rds</code> file will have the “version 3” format.
When that R package is next built, such as for a CRAN submission, the required R version is automatically bumped to 3.5.0, signaled by this message:</p>
<pre class="console"><code>NB: this package now depends on R (&gt;= 3.5.0)
  WARNING: Added dependency on R &gt;= 3.5.0 because serialized objects in
  serialize/load version 3 cannot be read in older versions of R.
  File(s) containing such objects:
    'path/to/some_file.rds'</code></pre>
<p>Literally, the <code>DESCRIPTION</code> file in the bundled package says <code>Depends: R (&gt;= 3.5.0)</code>, even if <code>DESCRIPTION</code> in the source package says differently<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The different package states, such as source vs. bundled, are explained in section &lt;a href="package-structure-state.html#package-states"&gt;4.1&lt;/a&gt;.&lt;/p&gt;'><sup>20</sup></a>.</p>
<p>When such a package is released on CRAN, the new minimum R version is viral, in the sense that all packages listing the original package in <code>Imports</code> or even <code>Suggests</code> have, to varying degrees, inherited the new dependency on R &gt;= 3.5.0.</p>
<p>The immediate take-away is to be very deliberate about the <code>version</code> of <code>.rds</code> files until R versions prior to 3.5.0 have fallen off the edge of what you intend to support.
This particular <code>.rds</code> issue won’t be with us forever, but similar issues crop up elsewhere, such as in the standards implicit in compiled C or C++ source code.
The broader message is that the more reverse dependencies your package has, the more thought you need to give to your package’s stated minimum versions, especially for R itself.</p>
<!-- TODO: I could probably get the blessing to include a concrete example of this happening, as there are many. For example, the tidymodels team has direct experience. Does that seem necessary / beneficial? -->
</div>
</div>
<div id="nonstandard-dependencies" class="section level3">
<h3>
<span class="header-section-number">8.1.4</span> Nonstandard dependencies<a class="anchor" aria-label="anchor" href="#nonstandard-dependencies"><i class="fas fa-link"></i></a>
</h3>
<p>In packages developed with devtools, you may see <code>DESCRIPTION</code> files that use a couple other nonstandard fields for package dependencies specific to development tasks.</p>
<p>The <code>Remotes</code> field can be used when you need to install a dependency from a nonstandard place, i.e. from somewhere besides CRAN or Bioconductor.
One common example of this is when you’re developing against a development version of one of your dependencies.
During this time, you’ll want to install the dependency from its development repository, which is often GitHub.
The way to specify various remote sources is described in a <a href="https://devtools.r-lib.org/articles/dependencies.html">devtools vignette</a>.</p>
<!-- TODO: long-term, a better link will presumably be https://pak.r-lib.org/reference/pak_package_sources.html, once the pivot from remotes to pak is further along. -->
<p>The dependency and any minimum version requirement still need to be declared in the normal way in, e.g., <code>Imports</code>.
<code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_dev_package()</a></code> helps to make the necessary changes in <code>DESCRIPTION</code>.
If your package temporarily relies on a development version of usethis, the affected <code>DESCRIPTION</code> fields might evolve like this:</p>
<!-- This is unlovely, but I just wanted to get the content down "on paper". It's easier to convey with a concrete example. -->
<pre><code>Stable --&gt;               Dev --&gt;                       Stable again
----------------------   ---------------------------   ----------------------
Package: yourpkg         Package: yourpkg              Package: yourpkg
Version: 1.0.0           Version: 1.0.0.9000           Version: 1.1.0
Imports:                 Imports:                      Imports: 
    usethis (&gt;= 2.1.3)       usethis (&gt;= 2.1.3.9000)       usethis (&gt;= 2.2.0)
                         Remotes:   
                             r-lib/usethis </code></pre>
<p>It’s important to note that you should not submit your package to CRAN in the intermediate state, meaning with a <code>Remotes</code> field and with a dependency required at a version that’s not available from CRAN or Bioconductor.
For CRAN packages, this can only be a temporary development state, eventually resolved when the dependency updates on CRAN and you can bump your minimum version accordingly.</p>
<p>You may also see devtools-developed packages with packages listed in <code>DESCRIPTION</code> fields in the form of <code>Config/Needs/*</code>.
This pattern takes advantage of the fact that fields prefixed with <code>Config/</code> are ignored by CRAN and also do not trigger a NOTE about “Unknown, possibly mis-spelled, fields in <code>DESCRIPTION</code>”.</p>
<!--
https://github.com/wch/r-source/blob/de49776d9fe54cb4580fbbd04906b40fe2f6117e/src/library/tools/R/QC.R#L7133
https://github.com/wch/r-source/blob/efacf56dcf2f880b9db8eafa28d49a08d56e861e/src/library/tools/R/utils.R#L1316-L1389
-->
<p>The use of <code>Config/Needs/*</code> is not directly related to devtools.
It’s more accurate to say that it’s associated with continuous integration workflows made available to the community at <a href="https://github.com/r-lib/actions/" class="uri">https://github.com/r-lib/actions/</a> and exposed via functions such as <code><a href="https://usethis.r-lib.org/reference/github_actions.html">usethis::use_github_actions()</a></code>.
A <code>Config/Needs/*</code> field tells the <a href="https://github.com/r-lib/actions/tree/master/setup-r-dependencies#readme"><code>setup-r-dependencies</code></a> GitHub Action about extra packages that need to be installed.</p>
<p><code>Config/Needs/website</code> is the most common and it provides a place to specify packages that aren’t a formal dependency, but that must be present in order to build the package’s website.
On the left is an example of what might appear in <code>DESCRIPTION</code> for a package that uses various tidyverse packages in the non-vignette articles on its website, which is also formatted with styling that lives in the <code>tidyverse/template</code> GitHub repo.
On the right is the corresponding excerpt from the configuration of the workflow that builds and deploys the website.</p>
<pre><code>in DESCRIPTION                  in .github/workflows/pkgdown.yaml
--------------------------      ---------------------------------
Config/Needs/website:           - uses: r-lib/actions/setup-r-dependencies@v1
    tidyverse,                    with:
    tidyverse/tidytemplate          extra-packages: pkgdown
                                    needs: website</code></pre>
<p>Continuous integration and package websites are discussed more in ?? and ??, respectively.
<em>These chapters are a yet-to-be-(re)written task for the 2nd edition.</em></p>
<!-- TODO: Link to CI and pkgdown material when it has been written and/or revised. -->
<p>The <code>Config/Needs/*</code> convention is handy because it allows a developer to use <code>DESCRIPTION</code> as their definitive record of package dependencies, while maintaining a clean distinction between true runtime dependencies versus those that are only needed for specialized development tasks.</p>
<!-- re: describing different types of dependencies, another term you see for "runtime" dependency is "production" -->
</div>
</div>
<div id="description-title-description" class="section level2">
<h2>
<span class="header-section-number">8.2</span> Title and description: What does your package do?<a class="anchor" aria-label="anchor" href="#description-title-description"><i class="fas fa-link"></i></a>
</h2>
<p>The title and description fields describe what the package does.
They differ only in length:</p>
<ul>
<li>
<code>Title</code> is a one line description of the package, and is often shown in a
package listing.
It should be plain text (no markup), capitalised like a title, and NOT end in
a period.
Keep it short: listings will often truncate the title to 65 characters.</li>
<li>
<code>Description</code> is more detailed than the title.
You can use multiple sentences, but you are limited to one paragraph.
If your description spans multiple lines (and it should!), each line must be
no more than 80 characters wide.
Indent subsequent lines with 4 spaces.</li>
</ul>
<p>The <code>Title</code> and <code>Description</code> for ggplot2 are:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb132-1"><a href="description.html#cb132-1"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> Create Elegant Data Visualisations Using the Grammar of Graphics</span></span>
<span id="cb132-2"><a href="description.html#cb132-2"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> A system for 'declaratively' creating graphics,</span></span>
<span id="cb132-3"><a href="description.html#cb132-3"></a><span class="at">    based on "The Grammar of Graphics". You provide the data, tell 'ggplot2'</span></span>
<span id="cb132-4"><a href="description.html#cb132-4"></a><span class="at">    how to map variables to aesthetics, what graphical primitives to use,</span></span>
<span id="cb132-5"><a href="description.html#cb132-5"></a><span class="at">    and it takes care of the details.</span></span></code></pre></div>
<p>A good title and description are important, especially if you plan to release your package to CRAN, because they appear on the CRAN download page as follows:</p>
<!-- TODO: I know my hacky diagram might need replacement, but at least it's more up-to-date. -->
<div class="figure">
<span style="display:block;" id="fig:cran-package-page"></span>
<img src="diagrams/cran-package-ggplot2.png" alt="The CRAN page for ggplot2, highlighting Title and Description." width="100%"><p class="caption">
FIGURE 8.1: The CRAN page for ggplot2, highlighting Title and Description.
</p>
</div>
<p>If you plan to submit your package to CRAN, both the <code>Title</code> and <code>Description</code> are a frequent source of rejections for reasons not covered by the automated <code>R CMD check</code>.
In addition to the basics above, here are a few more tips:</p>
<ul>
<li>Put the names of R packages, software, and APIs inside single quotes.
This goes for both the <code>Title</code> and the <code>Description</code>.
See the ggplot2 example above.</li>
<li>If you need to use an acronym, try to do so in <code>Description</code>, not in <code>Title</code>.
In either case, explain the acronym in <code>Description</code>, i.e. fully expand it.</li>
<li>Don’t include the package name, especially in <code>Title</code>, which is often
prefixed with the package name.</li>
<li>Do not start with “A package for …” or “This package does …”.
This rule makes sense once you look at <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">the list of CRAN packages by name</a>.
The information density of such a listing is much higher without a universal
prefix like “A package for …”.</li>
</ul>
<p>If these constraints give you writer’s block, it often helps to spend a few minutes reading <code>Title</code> and <code>Description</code> of packages already on CRAN.
Once you read a couple dozen, you can usually find a way to say what you want to say about your package that is also likely to pass CRAN’s human-enforced checks.</p>
<p>You’ll notice that <code>Description</code> only gives you a small amount of space to describe what your package does.
This is why it’s so important to also include a <code>README.md</code> file that goes into much more depth and shows a few examples.
You’ll learn about that in section <a href="release.html#readme">20.5.1</a>.</p>
</div>
<div id="description-authors" class="section level2">
<h2>
<span class="header-section-number">8.3</span> Author: who are you?<a class="anchor" aria-label="anchor" href="#description-authors"><i class="fas fa-link"></i></a>
</h2>
<p>To identify the package’s author, and whom to contact if something goes wrong, use the <code>Authors@R</code> field.
This field is unusual because it contains executable R code rather than plain text. Here’s an example:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb133-1"><a href="description.html#cb133-1"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> person("Hadley", "Wickham", email = "hadley@rstudio.com",</span></span>
<span id="cb133-2"><a href="description.html#cb133-2"></a><span class="at">  role = c("aut", "cre"))</span></span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span><span class="st">"Hadley"</span>, <span class="st">"Wickham"</span>, email <span class="op">=</span> <span class="st">"hadley@rstudio.com"</span>, 
  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Hadley Wickham &lt;hadley@rstudio.com&gt; [aut, cre]"</span></code></pre></div>
<p>This command says that Hadley Wickham is both the maintainer (<code>cre</code>) and an author (<code>aut</code>) and that his email address is <code>hadley@rstudio.com</code>.
The <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> function has four main inputs:</p>
<ul>
<li><p>The name, specified by the first two arguments, <code>given</code> and <code>family</code> (these
are normally supplied by position, not name).
In English cultures, <code>given</code> (first name) comes before <code>family</code> (last name).
In many cultures, this convention does not hold.
For a non-person entity, such as “R Core Team” or “RStudio”, use the <code>given</code>
argument (and omit <code>family</code>).</p></li>
<li><p>The <code>email</code> address.
It’s important to note that this is the address CRAN uses to let you know
if your package needs to be fixed in order to stay on CRAN.
Make sure to use an email address that’s likely to be around for a while.
CRAN policy requires that this be for a person, as opposed to, e.g., a
mailing list.</p></li>
<li>
<p>One or more three letter codes specifying the <code>role</code>.
These are the most important roles to know about:</p>
<ul>
<li><p><code>cre</code>: the creator or maintainer, the person you should bother
if you have problems. Despite being short for “creator”, this is the
correct role to use for the current maintainer, even if they are not
not the initial creator of the package.</p></li>
<li><p><code>aut</code>: authors, those who have made significant contributions to the
package.</p></li>
<li><p><code>ctb</code>: contributors, those who have made smaller contributions, like
patches.</p></li>
<li><p><code>cph</code>: copyright holder. This is used if the copyright is held by someone
other than the author, typically a company (i.e. the author’s employer).</p></li>
<li><p><code>fnd</code>: funder, the people or organizations that have provided financial
support for the development of the package.</p></li>
</ul>
<p>(The <a href="https://www.loc.gov/marc/relators/relaterm.html">full list of roles</a>
is extremely comprehensive.
Should your package have a woodcutter (<code>wdc</code>), lyricist (<code>lyr</code>) or costume
designer (<code>cst</code>), rest comfortably that you can correctly describe their
role in creating your package.
However, note that packages destined for CRAN must limit themselves to the
subset of MARC roles listed in the documentation for <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code>.)</p>
</li>
<li>
<p>The optional <code>comment</code> argument has become more relevant, since <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> and
CRAN landing pages have gained some nice features around
<a href="https://orcid.org">ORCID identifiers</a>.
Here’s an example of such usage (note the auto-generated URI):</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span>
  <span class="st">"Jennifer"</span>, <span class="st">"Bryan"</span>,
  email <span class="op">=</span> <span class="st">"jenny@rstudio.com"</span>,
  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span>,
  comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>ORCID <span class="op">=</span> <span class="st">"0000-0002-6983-2759"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "Jennifer Bryan &lt;jenny@rstudio.com&gt; [aut, cre] (&lt;https://orcid.org/0000-0002-6983-2759&gt;)"</span></code></pre></div>
</li>
</ul>
<p>You can list multiple authors with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb136-1"><a href="description.html#cb136-1"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> c(</span></span>
<span id="cb136-2"><a href="description.html#cb136-2"></a><span class="at">    person("Hadley", "Wickham", email = "hadley@rstudio.com", role = "cre"),</span></span>
<span id="cb136-3"><a href="description.html#cb136-3"></a><span class="at">    person("Winston", "Chang", email = "winston@rstudio.com", role = "aut"),</span></span>
<span id="cb136-4"><a href="description.html#cb136-4"></a><span class="at">    person("RStudio", role = c("cph", "fnd")))</span></span></code></pre></div>
<p>Every package must have at least one author (<code>aut</code>) and one maintainer (<code>cre</code>) (they might be the same person).
The maintainer (<code>cre</code>) must have an email address.
These fields are used to generate the basic citation for the package (e.g. <code>citation("pkgname")</code>).
Only people listed as authors will be included in the auto-generated citation.
There are a few extra details if you’re including code that other people have written.
Since this typically occurs when you’re wrapping a C library, it’s discussed in Chapter <a href="src.html#src">15</a>.</p>
<p>An older, still valid approach is to have separate <code>Maintainer</code> and <code>Author</code> fields in <code>DESCRIPTION</code>.
However, we strongly recommend the more modern approach of <code>Authors@R</code> and the <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> function, because it offers richer metadata for various downstream uses.</p>
</div>
<div id="description-license" class="section level2">
<h2>
<span class="header-section-number">8.4</span> License: Who can use your package?<a class="anchor" aria-label="anchor" href="#description-license"><i class="fas fa-link"></i></a>
</h2>
<p>Licensing is a big enough topic that it has a dedicated chapter (Chapter <a href="license.html#license">9</a>).
If you have no plans to share your package, you may be able to ignore licensing.
But if you plan to share, even if only by putting the code where others can see it, you really should specify a license.</p>
<p>Most maintainers will settle on a permissive license like MIT, one of the GPL copyleft licenses, or CC0.
These (and more) can all be configured by usethis, via functions like <code><a href="https://usethis.r-lib.org/reference/licenses.html">use_mit_license()</a></code>, <code><a href="https://usethis.r-lib.org/reference/licenses.html">use_gpl_license()</a></code>, or <code><a href="https://usethis.r-lib.org/reference/licenses.html">use_cc0_license()</a></code>.
These helpers populate the <code>License</code> field of <code>DESCRIPTION</code> and, if necessary, setup additional files to complete the license.
Read the licensing chapter (Chapter <a href="license.html#license">9</a>) to learn more.</p>
</div>
<div id="description-version" class="section level2">
<h2>
<span class="header-section-number">8.5</span> Version<a class="anchor" aria-label="anchor" href="#description-version"><i class="fas fa-link"></i></a>
</h2>
<p>Formally, an R package version is a sequence of at least two integers separated by either <code>.</code> or <code>-</code>.
For example, <code>1.0</code> and <code>0.9.1-10</code> are valid versions, but <code>1</code> and <code>1.0-devel</code> are not.
You can parse a version number with <code><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version()</a></code>.</p>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.10.0"</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>For example, a package might have a version 1.9.
This version number is considered by R to be the same as 1.9.0, less than version 1.9.2, and all of these are less than version 1.10 (which is version “one point ten”, not “one point one zero”).
R uses version numbers to determine whether package dependencies are satisfied.
A package might, for example, import package <code>devtools (&gt;= 1.9.2)</code>, in which case version 1.9 or 1.9.0 wouldn’t work.</p>
<p>Here is our recommended framework for managing the package version number:</p>
<ul>
<li><p>Always use <code>.</code> as the separator, never <code>-</code>.</p></li>
<li><p>A released version number consists of three numbers, <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>.
For version number 1.9.2, 1 is the major number, 9 is the minor number, and
2 is the patch number.
Never use versions like <code>1.0</code>, instead always spell out the three components,
<code>1.0.0</code>.</p></li>
<li>
<p>An in-development package has a fourth component: the development version.
This should start at 9000.
For example, the first version of the package should be <code>0.0.0.9000</code>.
There are two reasons for this recommendation:
First, it makes it easy to see if a package is released or in-development.
Also, the use of the fourth place means that you’re not limited to what the
next version will be.
<code>0.0.1</code>, <code>0.1.0</code>, and <code>1.0.0</code> are all greater than <code>0.0.0.9000</code>.</p>
<p>Increment the development version, e.g. from <code>9000</code> to <code>9001</code>, if you’ve
added an important feature that another development package needs to depend
on.</p>
</li>
</ul>
<p>The advice above is inspired in part by <a href="https://semver.org">Semantic Versioning</a> and by the <a href="https://www.x.org/releases/X11R7.7/doc/xorg-docs/Versions.html">X.Org</a> versioning schemes.
Read them if you’d like to understand more about the standards of versioning used by many open source projects.
Finally, know that other maintainers follow different philosophies on how to manage the package version number.</p>
<p>The version number of your package increases with subsequent releases of a package, but it’s more than just an incrementing counter – the way the number changes with each release can convey information about what kind of changes are in the package.
We discuss this and more in Section <a href="release.html#release-version">20.1</a>.
For now, just remember that the first version of your package should be <code>0.0.0.9000</code>.
<code><a href="https://usethis.r-lib.org/reference/create_package.html">usethis::create_package()</a></code> does this, by default.
<code><a href="https://usethis.r-lib.org/reference/use_version.html">usethis::use_version()</a></code> increments the package version; when called interactively, with no argument, it presents a helpful menu:</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html">use_version</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Current version is 0.1.</span>
<span class="co">#&gt; What should the new version be? (0 to exit) </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 1: major --&gt; 1.0</span>
<span class="co">#&gt; 2: minor --&gt; 0.2</span>
<span class="co">#&gt; 3: patch --&gt; 0.1.1</span>
<span class="co">#&gt; 4:   dev --&gt; 0.1.0.9000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Selection: </span></code></pre></div>
</div>
<div id="description-other-fields" class="section level2">
<h2>
<span class="header-section-number">8.6</span> Other fields<a class="anchor" aria-label="anchor" href="#description-other-fields"><i class="fas fa-link"></i></a>
</h2>
<p>A few other <code>DESCRIPTION</code> fields are heavily used and worth knowing about.</p>
<p>As well as the maintainer’s email address, it’s a good idea to list other places people can learn more about your package.
The <code>URL</code> field is commonly used to advertise the package’s website and to link to a public source repository, where development happens.
Multiple URLs are separated with a comma.
<code>BugReports</code> is the URL where bug reports should be submitted, e.g., as GitHub issues.
For example, devtools has:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb139-1"><a href="description.html#cb139-1"></a><span class="fu">URL</span><span class="kw">:</span><span class="at"> https://devtools.r-lib.org/, https://github.com/r-lib/devtools</span></span>
<span id="cb139-2"><a href="description.html#cb139-2"></a><span class="fu">BugReports</span><span class="kw">:</span><span class="at"> https://github.com/r-lib/devtools/issues</span></span></code></pre></div>
<p>If you use <code><a href="https://usethis.r-lib.org/reference/use_github.html">usethis::use_github()</a></code> to connect your local package to a remote GitHub repository, it will automatically populate <code>URL</code> and <code>BugReports</code> for you.
If a package is already connected to a remote GitHub repository, <code><a href="https://usethis.r-lib.org/reference/use_github_links.html">usethis::use_github_links()</a></code> can be called to just add the relevant links to <code>DESCRIPTION</code>.</p>
<p>The <code>Encoding</code> field is required if <code>DESCRIPTION</code> does not consist entirely of ASCII characters.
If specified, this <code>Encoding</code> is interpreted as applying more broadly throughout the package.
By default, <code><a href="https://usethis.r-lib.org/reference/create_package.html">create_package()</a></code> uses <code>Encoding: UTF-8</code>, which should be interpreted as our very strong recommendation to use UTF-8 encoding.</p>
<p>A number of other fields are described elsewhere in the book:</p>
<ul>
<li><p><code>Collate</code> controls the order in which R files are sourced. This only
matters if your code has side-effects; most commonly because you’re
using S4. This is described in more depth in Section <a href="man.html#man-s4">10.7.2</a>.</p></li>
<li><p><code>LazyData</code> is relevant if your package makes data available to the user.
If you specify <code>LazyData: true</code>, the datasets are lazy-loaded, which
makes them more immediately available, i.e. users don’t have to use <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>.
The addition of <code>LazyData: true</code> is handled automatically by
<code><a href="https://usethis.r-lib.org/reference/use_data.html">usethis::use_data()</a></code>.
More detail is given when we talk about external data in Chapter <a href="data.html#data">14</a>.</p></li>
</ul>
<p>There are actually many other rarely, if ever, used fields.
A complete list can be found in the “The DESCRIPTION file” section of the <a href="https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file">R extensions manual</a>.</p>
<p>There is also some flexibility to create your own fields to add additional metadata.
In the narrowest sense, the only restriction is that you shouldn’t re-purpose the official field names used by R.
But in practice, if you plan to submit to CRAN, there are more constraints.
First, only use valid English words, so the field names aren’t flagged by the spell-check.
Beyond that, custom fields should follow one of these two patterns:</p>
<ul>
<li>
<code>Config/</code> prefix: We featured an example of this earlier, where
<code>Config/Needs/website</code> is used to record additional packages needed to build
a package’s website.</li>
<li>
<code>Note</code> suffix: You can add <code>Note</code> to any standard field name, e.g.,
<code>SuggestsNote</code>.
It is also permitted to use <code>Note</code>, alone, as a field name.</li>
</ul>
<p>By default, <code><a href="https://usethis.r-lib.org/reference/create_package.html">create_package()</a></code> writes two more fields we haven’t discussed yet, relating to the use of the roxygen2 package for documentation:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb140-1"><a href="description.html#cb140-1"></a><span class="fu">Roxygen</span><span class="kw">:</span><span class="at"> list(markdown = TRUE)</span></span>
<span id="cb140-2"><a href="description.html#cb140-2"></a><span class="fu">RoxygenNote</span><span class="kw">:</span><span class="at"> </span><span class="fl">7.1.2</span></span></code></pre></div>
<p>You will learn more about these in Chapter <a href="man.html#man">10</a>.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="r.html"><span class="header-section-number">7</span> R code</a></div>
<div class="next"><a href="license.html"><span class="header-section-number">9</span> Licensing</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#description"><span class="header-section-number">8</span> Package metadata</a></li>
<li>
<a class="nav-link" href="#description-dependencies"><span class="header-section-number">8.1</span> Dependencies: What does your package need?</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#guarding-the-use-of-a-suggested-package"><span class="header-section-number">8.1.1</span> Guarding the use of a suggested package</a></li>
<li><a class="nav-link" href="#minimum-versions"><span class="header-section-number">8.1.2</span> Minimum versions</a></li>
<li><a class="nav-link" href="#other-dependencies"><span class="header-section-number">8.1.3</span> Other dependencies</a></li>
<li><a class="nav-link" href="#nonstandard-dependencies"><span class="header-section-number">8.1.4</span> Nonstandard dependencies</a></li>
</ul>
</li>
<li><a class="nav-link" href="#description-title-description"><span class="header-section-number">8.2</span> Title and description: What does your package do?</a></li>
<li><a class="nav-link" href="#description-authors"><span class="header-section-number">8.3</span> Author: who are you?</a></li>
<li><a class="nav-link" href="#description-license"><span class="header-section-number">8.4</span> License: Who can use your package?</a></li>
<li><a class="nav-link" href="#description-version"><span class="header-section-number">8.5</span> Version</a></li>
<li><a class="nav-link" href="#description-other-fields"><span class="header-section-number">8.6</span> Other fields</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r-pkgs/blob/main/Metadata.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r-pkgs/edit/main/Metadata.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Packages</strong>" was written by Hadley Wickham, Jennifer Bryan. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
