<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 20 Lifecycle | R Packages</title>
<meta name="author" content="Hadley Wickham">
<meta name="author" content="Jennifer Bryan">
<meta name="description" content="20.1 Version Formally, an R package version is a sequence of at least two integers separated by either . or -. For example, 1.0 and 0.9.1-10 are valid versions, but 1 and 1.0-devel are not. You...">
<meta name="generator" content="bookdown 0.27 with bs4_book()">
<meta property="og:title" content="Chapter 20 Lifecycle | R Packages">
<meta property="og:type" content="book">
<meta property="og:url" content="https://r-pkgs.org/lifecycle.html">
<meta property="og:image" content="https://r-pkgs.org/images/cover.png">
<meta property="og:description" content="20.1 Version Formally, an R package version is a sequence of at least two integers separated by either . or -. For example, 1.0 and 0.9.1-10 are valid versions, but 1 and 1.0-devel are not. You...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 20 Lifecycle | R Packages">
<meta name="twitter:site" content="@hadley">
<meta name="twitter:description" content="20.1 Version Formally, an R package version is a sequence of at least two integers separated by either . or -. For example, 1.0 and 0.9.1-10 are valid versions, but 1 and 1.0-devel are not. You...">
<meta name="twitter:image" content="https://r-pkgs.org/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-141182576-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-141182576-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Packages</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="whole-game.html"><span class="header-section-number">2</span> The whole game</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> System setup</a></li>
<li><a class="" href="package-structure-state.html"><span class="header-section-number">4</span> Package structure and state</a></li>
<li><a class="" href="workflows101.html"><span class="header-section-number">5</span> Fundamental development workflows</a></li>
<li><a class="" href="package-within.html"><span class="header-section-number">6</span> The package within</a></li>
<li class="book-part">Package components</li>
<li><a class="" href="r.html"><span class="header-section-number">7</span> R code</a></li>
<li><a class="" href="data.html"><span class="header-section-number">8</span> Data</a></li>
<li><a class="" href="misc.html"><span class="header-section-number">9</span> Other components</a></li>
<li class="book-part">Package metadata</li>
<li><a class="" href="description-and-namespace.html"><span class="header-section-number">10</span> DESCRIPTION and NAMESPACE</a></li>
<li><a class="" href="description-dependencies.html"><span class="header-section-number">11</span> Dependencies: What does your package need?</a></li>
<li><a class="" href="license.html"><span class="header-section-number">12</span> Licensing</a></li>
<li class="book-part">Testing</li>
<li><a class="" href="tests.html"><span class="header-section-number">13</span> Testing</a></li>
<li class="book-part">Documentation</li>
<li><a class="" href="doc-intro.html"><span class="header-section-number">14</span> Introduction</a></li>
<li class="book-part">Documentation</li>
<li><a class="" href="man.html"><span class="header-section-number">15</span> Function documentation</a></li>
<li><a class="" href="vignettes.html"><span class="header-section-number">16</span> Vignettes</a></li>
<li><a class="" href="important-files.html"><span class="header-section-number">17</span> Other markdown files</a></li>
<li><a class="" href="website.html"><span class="header-section-number">18</span> Website</a></li>
<li class="book-part">Maintenance and distribution</li>
<li><a class="" href="r-cmd-check.html"><span class="header-section-number">19</span> R CMD check</a></li>
<li><a class="active" href="lifecycle.html"><span class="header-section-number">20</span> Lifecycle</a></li>
<li><a class="" href="continuous-integration.html"><span class="header-section-number">21</span> Continuous integration</a></li>
<li><a class="" href="release.html"><span class="header-section-number">22</span> Releasing to CRAN</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r-pkgs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lifecycle" class="section level1" number="20">
<h1>
<span class="header-section-number">20</span> Lifecycle<a class="anchor" aria-label="anchor" href="#lifecycle"><i class="fas fa-link"></i></a>
</h1>
<div id="description-version" class="section level2" number="20.1">
<h2>
<span class="header-section-number">20.1</span> Version<a class="anchor" aria-label="anchor" href="#description-version"><i class="fas fa-link"></i></a>
</h2>
<p>Formally, an R package version is a sequence of at least two integers separated by either <code>.</code> or <code>-</code>.
For example, <code>1.0</code> and <code>0.9.1-10</code> are valid versions, but <code>1</code> and <code>1.0-devel</code> are not.
You can parse a version number with <code><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version()</a></code>.</p>
<div class="sourceCode" id="cb256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.10.0"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>For example, a package might have a version 1.9.
This version number is considered by R to be the same as 1.9.0, less than version 1.9.2, and all of these are less than version 1.10 (which is version “one point ten”, not “one point one zero”).
R uses version numbers to determine whether package dependencies are satisfied.
A package might, for example, import package <code>devtools (&gt;= 1.9.2)</code>, in which case version 1.9 or 1.9.0 wouldn’t work.</p>
<p>Here is our recommended framework for managing the package version number:</p>
<ul>
<li><p>Always use <code>.</code> as the separator, never <code>-</code>.</p></li>
<li><p>A released version number consists of three numbers, <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>.
For version number 1.9.2, 1 is the major number, 9 is the minor number, and
2 is the patch number.
Never use versions like <code>1.0</code>, instead always spell out the three components,
<code>1.0.0</code>.</p></li>
<li>
<p>An in-development package has a fourth component: the development version.
This should start at 9000.
For example, the first version of the package should be <code>0.0.0.9000</code>.
There are two reasons for this recommendation:
First, it makes it easy to see if a package is released or in-development.
Also, the use of the fourth place means that you’re not limited to what the
next version will be.
<code>0.0.1</code>, <code>0.1.0</code>, and <code>1.0.0</code> are all greater than <code>0.0.0.9000</code>.</p>
<p>Increment the development version, e.g. from <code>9000</code> to <code>9001</code>, if you’ve
added an important feature that another development package needs to depend
on.</p>
</li>
</ul>
<p>The advice above is inspired in part by <a href="https://semver.org">Semantic Versioning</a> and by the <a href="https://www.x.org/releases/X11R7.7/doc/xorg-docs/Versions.html">X.Org</a> versioning schemes.
Read them if you’d like to understand more about the standards of versioning used by many open source projects.
Finally, know that other maintainers follow different philosophies on how to manage the package version number.</p>
<p>The version number of your package increases with subsequent releases of a package, but it’s more than just an incrementing counter – the way the number changes with each release can convey information about what kind of changes are in the package.
We discuss this and more in Section <a href="lifecycle.html#release-version">20.2</a>.
For now, just remember that the first version of your package should be <code>0.0.0.9000</code>.
<code><a href="https://usethis.r-lib.org/reference/create_package.html">usethis::create_package()</a></code> does this, by default.
<code><a href="https://usethis.r-lib.org/reference/use_version.html">usethis::use_version()</a></code> increments the package version; when called interactively, with no argument, it presents a helpful menu:</p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html">use_version</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Current version is 0.1.</span></span>
<span><span class="co">#&gt; What should the new version be? (0 to exit) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1: major --&gt; 1.0</span></span>
<span><span class="co">#&gt; 2: minor --&gt; 0.2</span></span>
<span><span class="co">#&gt; 3: patch --&gt; 0.1.1</span></span>
<span><span class="co">#&gt; 4:   dev --&gt; 0.1.0.9000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Selection: </span></span></code></pre></div>
</div>
<div id="release-version" class="section level2" number="20.2">
<h2>
<span class="header-section-number">20.2</span> Version number<a class="anchor" aria-label="anchor" href="#release-version"><i class="fas fa-link"></i></a>
</h2>
<p>If you’ve been following the advice in <a href="lifecycle.html#description-version">versioning</a>, the version number of your in-development package will have four components, <code>major.minor.patch.dev</code>, where <code>dev</code> is at least 9000. The number 9000 is arbitrary, but provides a strong visual signal there’s something different about this version number. Released packages don’t have a <code>dev</code> component, so now you need to drop that and pick a version number based on the changes you’ve made. For example, if the current version is <code>0.8.1.9000</code> will the next CRAN version be <code>0.8.2</code>, <code>0.9.0</code> or <code>1.0.0</code>? Use this advice to decide:</p>
<ul>
<li><p>Increment <code>patch</code>, e.g. <code>0.8.2</code> for a <strong>patch</strong>: you’ve fixed
bugs without adding any significant new features. I’ll often do a patch
release if, after release, I discover a show-stopping bug that needs to be
fixed ASAP. Most releases will have a patch number of 0.</p></li>
<li><p>Increment <code>minor</code>, e.g. <code>0.9.0</code>, for a <strong>minor release</strong>. A minor
release can include bug fixes, new features and changes in backward
compatibility. This is the most common type of release. It’s perfectly fine to
have so many minor releases that you need to use two (or even three!)
digits, e.g. <code>1.17.0</code>.</p></li>
<li>
<p>Increment <code>major</code>, e.g. <code>1.0.0</code>, for a <strong>major release</strong>. This is
best reserved for changes that are not backward compatible and that are
likely to affect many users. Going from <code>0.b.c</code> to <code>1.0.0</code> typically
indicates that your package is feature complete with a stable API.</p>
<p>In practice, backward compatibility is not an all-or-nothing threshold. For
example, if you make an API-incompatible change to a rarely-used part of
your code, it may not deserve a major number change. But if you fix a bug
that many people depend on, it will feel like an API breaking change. Use
your best judgement.</p>
</li>
</ul>
</div>
<div id="compatibility" class="section level2" number="20.3">
<h2>
<span class="header-section-number">20.3</span> Backward compatibility<a class="anchor" aria-label="anchor" href="#compatibility"><i class="fas fa-link"></i></a>
</h2>
<p>The big difference between major and minor versions is whether or not the code is backward compatible. This difference is a bit academic in the R community because the way most people update packages is by running <code><a href="https://rdrr.io/r/utils/update.packages.html">update.packages()</a></code>, which always updates to the latest version of the package, even if the major version has changed, potentially breaking code. While more R users are becoming familiar with tools like <a href="https://rstudio.github.io/packrat/">packrat</a>, which capture package versions on a per-project basis, you do need to be a little cautious when making big backward incompatible changes, regardless of what you do with the version number.</p>
<p>The importance of backward compatibility is directly proportional to the number of people using your package: you are trading your time for your users’ time. The harder you strive to maintain backward compatibility, the harder it is to develop new features or fix old mistakes. Backward compatible code also tends to be harder to read because of the need to maintain multiple paths to support functionality from previous versions. Be concerned about backward compatibility, but don’t let it paralyse you.</p>
<p>There are good reasons to make backward incompatible changes - if you made a design mistake that makes your package harder to use it’s better to fix it sooner rather than later. If you do need to make a backward incompatible change, it’s best to do it gradually. Provide interim version(s) between where are you now and where you’d like to be, and provide advice about what’s going to change. Depending on what you’re changing, use one of the following techniques to let your users know what’s happening:</p>
<ul>
<li>
<p>Don’t immediately remove a function. First deprecate it. For example,
imagine your package is version <code>0.5.0</code> and you want to remove <code>fun()</code>. In
version, <code>0.6.0</code>, you’d use <code><a href="https://rdrr.io/r/base/Deprecated.html">.Deprecated()</a></code> to display a warning message
whenever someone uses the function:</p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 0.6.0</span></span>
<span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Deprecated.html">.Deprecated</a></span><span class="op">(</span><span class="st">"sum"</span><span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span> <span class="op">+</span> <span class="va">z</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">fun</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: 'fun' is deprecated.
## Use 'sum' instead.
## See help("Deprecated")</code></pre>
<pre><code>## [1] 6</code></pre>
<p>Then, remove the function once you got to <code>0.7.0</code> (or if you are
being very strict, once you got to <code>1.0.0</code> since it’s a backward
incompatible change).</p>
</li>
<li>
<p>Similarly, if you’re removing a function argument, first warn about it:</p>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html">missing</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"argument y is deprecated; please use z instead."</span>, </span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="va">z</span> <span class="op">&lt;-</span> <span class="va">y</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">bar</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: argument y is deprecated; please use z instead.</code></pre>
</li>
<li>
<p>If you’re deprecating a lot of code, it can be useful to add a helper
function. For example, ggplot2 has <code>gg_dep</code> which automatically
displays a message, warning or error, depending on how much the version
number has changed.</p>
<div class="sourceCode" id="cb266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gg_dep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">version</span>, <span class="va">msg</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">as.package_version</a></span><span class="op">(</span><span class="va">version</span><span class="op">)</span></span>
<span>  <span class="va">cv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If current major number is greater than last-good major number, or if</span></span>
<span>  <span class="co"># current minor number is more than 1 greater than last-good minor number,</span></span>
<span>  <span class="co"># return an error.</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span><span class="op">]</span>  <span class="op">||</span>  <span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Defunct; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span>,</span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If minor number differs by one, give a warning</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Deprecated; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span>,</span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If only subminor number is greater, provide a message</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Deprecated; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</li>
<li><p>Significant changes to an existing function requires planning, including
making gradual changes over multiple versions. Try and develop a sequence
of transformations where each change can be accompanied by an informative
error message.</p></li>
<li>
<p>If you want to use functionality in a new version of another package,
don’t make it a hard install-time dependency in the <code>DESCRIPTION</code> (forcing
your users to upgrade that package might break other code). Instead
check for the version at run-time:</p>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="st">"1.0.0"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"ggplot2 &gt;= 1.0.0 needed for this function."</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This is also useful if you’re responding to changes in one of your
dependencies - you’ll want to have a version that will work both before
and after the change. This will allow you to submit it to CRAN at any time,
even before the other package. Doing this may generate some <code>R CMD check</code>
notes. For example:</p>
<div class="sourceCode" id="cb268"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"foo"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="st">"1.0.0"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">foo</span><span class="fu">::</span><span class="fu">baz</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu">foo</span><span class="fu">::</span><span class="fu">bar</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If <code>baz</code> doesn’t exist in foo version 1.0.0, you’ll get a note that
it doesn’t exist in foo’s namespace. Just explain that you’re working
around a difference between versions in your submission to CRAN.</p>
</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="r-cmd-check.html"><span class="header-section-number">19</span> R CMD check</a></div>
<div class="next"><a href="continuous-integration.html"><span class="header-section-number">21</span> Continuous integration</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lifecycle"><span class="header-section-number">20</span> Lifecycle</a></li>
<li><a class="nav-link" href="#description-version"><span class="header-section-number">20.1</span> Version</a></li>
<li><a class="nav-link" href="#release-version"><span class="header-section-number">20.2</span> Version number</a></li>
<li><a class="nav-link" href="#compatibility"><span class="header-section-number">20.3</span> Backward compatibility</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r-pkgs/blob/main/lifecycle.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r-pkgs/edit/main/lifecycle.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Packages</strong>" was written by Hadley Wickham, Jennifer Bryan. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
