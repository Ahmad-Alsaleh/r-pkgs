<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to create a package, the fundamental unit of shareable, reusable, and reproducible R code.">
<title>R Packages (2e) - 22&nbsp; Lifecycle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./release.html" rel="next">
<link href="./software-development-practices.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script defer="" data-domain="r-pkgs.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lifecycle</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Packages (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r-pkgs/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Getting started</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole-game.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Whole Game</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">System setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Package structure and state</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow101.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fundamental development workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package-within.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The package within</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Package components</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./misc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Other components</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Package metadata</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./description.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-mindset-background.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dependencies: Mindset and Background</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-in-practice.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dependencies: In Practice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Licensing</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Testing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Testing basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-design.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Designing your test suite</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-advanced.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Advanced testing techniques</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Documentation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Function documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Vignettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-markdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Other markdown files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./website.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Website</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Maintenance and distribution</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software-development-practices.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Software development practices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lifecycle.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lifecycle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R-CMD-check.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"><code>R CMD check</code></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">22.1</span>  Introduction</a></li>
  <li><a href="#sec-lifecycle-evolution" id="toc-sec-lifecycle-evolution" class="nav-link" data-scroll-target="#sec-lifecycle-evolution"><span class="toc-section-number">22.2</span>  Package evolution</a></li>
  <li><a href="#sec-lifecycle-version-number" id="toc-sec-lifecycle-version-number" class="nav-link" data-scroll-target="#sec-lifecycle-version-number"><span class="toc-section-number">22.3</span>  Package version number</a></li>
  <li><a href="#tidyverse-package-version-conventions" id="toc-tidyverse-package-version-conventions" class="nav-link" data-scroll-target="#tidyverse-package-version-conventions"><span class="toc-section-number">22.4</span>  Tidyverse package version conventions</a></li>
  <li><a href="#backward-compatibility-and-breaking-change" id="toc-backward-compatibility-and-breaking-change" class="nav-link" data-scroll-target="#backward-compatibility-and-breaking-change"><span class="toc-section-number">22.5</span>  Backward compatibility and breaking change</a></li>
  <li>
<a href="#major-vs-minor-vs-patch-release" id="toc-major-vs-minor-vs-patch-release" class="nav-link" data-scroll-target="#major-vs-minor-vs-patch-release"><span class="toc-section-number">22.6</span>  Major vs minor vs patch release</a>
  <ul class="collapse">
<li><a href="#package-version-mechanics" id="toc-package-version-mechanics" class="nav-link" data-scroll-target="#package-version-mechanics"><span class="toc-section-number">22.6.1</span>  Package version mechanics</a></li>
  </ul>
</li>
  <li><a href="#sec-lifecycle-backward-compatibility" id="toc-sec-lifecycle-backward-compatibility" class="nav-link" data-scroll-target="#sec-lifecycle-backward-compatibility"><span class="toc-section-number">22.7</span>  Backward compatibility</a></li>
  <li>
<a href="#lifecycle-stages-and-tools-and-package" id="toc-lifecycle-stages-and-tools-and-package" class="nav-link" data-scroll-target="#lifecycle-stages-and-tools-and-package"><span class="toc-section-number">22.8</span>  Lifecycle stages and tools and package</a>
  <ul class="collapse">
<li><a href="#lifecycle-stages-and-badges" id="toc-lifecycle-stages-and-badges" class="nav-link" data-scroll-target="#lifecycle-stages-and-badges"><span class="toc-section-number">22.8.1</span>  Lifecycle stages and badges</a></li>
  <li><a href="#deprecating-a-function-or-argument" id="toc-deprecating-a-function-or-argument" class="nav-link" data-scroll-target="#deprecating-a-function-or-argument"><span class="toc-section-number">22.8.2</span>  Deprecating a function or argument</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hadley/r-pkgs/edit/main/lifecycle.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-lifecycle" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lifecycle</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="cell">
<div class="cell-output-display">
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Second edition
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are reading the work-in-progress second edition of R Packages. This chapter is currently a dumping ground for ideas, and we don’t recommend reading it.</p>
</div>
</div>
</div>
</div>
<section id="introduction" class="level2" data-number="22.1"><h2 data-number="22.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">22.1</span> Introduction</h2>
<p>The closing chapter of the book is about managing the evolution of your package and, perhaps eventually, distributing it through CRAN.</p>
<p>The trickiest part of managing change is balancing the interests of various stakeholders:</p>
<ul>
<li><p>The maintainer(s), which includes you and possibly others, especially in the future.</p></li>
<li><p>The existing users, which could be just you or a small group of colleagues or it could be tens or hundreds of thousands of people.</p></li>
<li><p>The future users, which hopefully includes the existing users, but could potentially include many more people.</p></li>
</ul>
<p>It’s impossible to optimize for all of these folks, all of the time, all at once. So we’ll describe how we think about various trade-offs. Even if your priorities differ from those of the tidyverse team, this chapter should still help you identify issues you want to consider.</p>
<p>Very few users complain when a package gains features or gets a bug fix. Instead, we’re mostly going to talk about so-called breaking changes, such as removing a function or narrowing the acceptable inputs for a function.</p>
<p>In ??, we explore how to determine whether something is a breaking change or, more realistically, to gauge where it lies on a spectrum of “breakingness”. Even though it can be painful, sometimes a breaking change is beneficial for the long-term health of a package.</p>
<p>Since change is inevitable, the kindest thing you can do for your users to communicate clearly and help them adapt to change. Several practices work together to achieve this:</p>
<ul>
<li><p>Package version number: be intentional about what sort of changes are appropriate in, e.g., a patch release versus a major release (<a href="#sec-lifecycle-evolution"><span>Section&nbsp;22.2</span></a>, <a href="#sec-lifecycle-version-number"><span>Section&nbsp;22.3</span></a>).</p></li>
<li><p>Lifecycle stage: be explicit when a function or argument is regarded as experimental, superseded, or deprecated, as opposed to stable (the assumed default).</p></li>
<li><p>Deprecation process: enact change in a phased way, which makes it easier for users to adjust their code.</p></li>
</ul>
<p>The main form of user-facing change is a package release () and one of the most overt signals about the nature of change is the version number (). Having established the meaning of a breaking change and the mechanics of version numbers, we can lay out our conventions for different types of releases in ??. There we describe what sort of change is considered appropriate for a major versus minor versus patch release.</p>
<p>The last piece of lifecycle infrastructure we’ll cover is the concept of lifecycle stages: experimental, stable, superseded, and deprecated. These stages can apply to a function or an argument or even a whole package. The tidyverse team maintains various helpful utilities in the lifecycle package, such as badges that can be used in documentation and specialized functions for communicating lifecycle changes to users. We can then discuss how specific lifecycle transitions connect back to our conventions about different types of releases.</p>
<p>(TODO: I suspect this will split off into its own chapter, again.) Finally, in ?? we delve into the specifics of releasing a package on CRAN and the ongoing work required to keep it safely on CRAN. We’ve been calling out CRAN-specific concerns throughout the book. So ?? is where we underscore some of the most crucial points and, most importantly, can take a holistic look at blah blah CRAN.</p>
</section><section id="sec-lifecycle-evolution" class="level2" data-number="22.2"><h2 data-number="22.2" class="anchored" data-anchor-id="sec-lifecycle-evolution">
<span class="header-section-number">22.2</span> Package evolution</h2>
<p>First we should establish a working definition of what it means for your package to change. Technically, you could say that the package has changed every time any file in its source changes. This level of pedantry isn’t terribly useful, though. The smallest increment of change that’s meaningful is probably a Git commit. This represents a specific state of the source package that can be talked about, installed from, compared to, subjected to <code>R CMD check</code>, reverted to, and so on. This level of granularity is really only of interest to developers. But the package states accessible via the Git history are genuinely useful for the maintainer, so if you needed any encouragement to be more intentional with your commits, let this be it.</p>
<p>The primary user-facing signal of meaningful change is the package version number. Recall that this important piece of metadata lives in the <code>Version</code> field of the <code>DESCRIPTION</code> file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Package</span><span class="kw">:</span><span class="at"> usethis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> Automate Package and Project Setup</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Version</span><span class="kw">:</span><span class="at"> </span><span class="fl">2.1.6</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you visit the CRAN landing page for usethis, you can access its history via <em>Downloads &gt; Old sources &gt; <a href="https://cran.r-project.org/src/contrib/Archive/usethis/">usethis archive</a></em>. That links to a folder of package bundles (<a href="structure.html#sec-bundled-package"><span>Section&nbsp;4.4</span></a>), reflecting usethis’s source for each version released on CRAN:</p>
<div class="cell" data-r.options="{&quot;tidyverse.quiet&quot;:true}">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead><tr class="header">
<th style="text-align: left;">Version</th>
<th style="text-align: left;">Date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1.0.0</td>
<td style="text-align: left;">2017-10-22 17:36:29 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">1.1.0</td>
<td style="text-align: left;">2017-11-17 22:52:07 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1.2.0</td>
<td style="text-align: left;">2018-01-19 18:23:54 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">1.3.0</td>
<td style="text-align: left;">2018-02-24 21:53:51 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1.4.0</td>
<td style="text-align: left;">2018-08-14 12:10:02 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">1.5.0</td>
<td style="text-align: left;">2019-04-07 10:50:44 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1.5.1</td>
<td style="text-align: left;">2019-07-04 11:00:05 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">1.6.0</td>
<td style="text-align: left;">2020-04-09 04:50:02 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1.6.1</td>
<td style="text-align: left;">2020-04-29 05:50:02 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">1.6.3</td>
<td style="text-align: left;">2020-09-17 17:00:03 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2.0.0</td>
<td style="text-align: left;">2020-12-10 09:00:02 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">2.0.1</td>
<td style="text-align: left;">2021-02-10 10:40:06 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2.1.0</td>
<td style="text-align: left;">2021-10-16 23:30:02 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">2.1.2</td>
<td style="text-align: left;">2021-10-25 07:30:02 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2.1.3</td>
<td style="text-align: left;">2021-10-27 15:00:02 UTC</td>
</tr>
<tr class="even">
<td style="text-align: left;">2.1.5</td>
<td style="text-align: left;">2021-12-09 23:00:02 UTC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2.1.6</td>
<td style="text-align: left;">2022-05-25 20:50:02 UTC</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This is the type of package evolution we’re going to address in this chapter. In section <a href="#sec-lifecycle-version-number"><span>Section&nbsp;22.3</span></a>, we’ll delve into the world of software version numbers, which is a richer topic than you might expect. R also has some specific rules and tools around package version numbers. Finally, we’ll explain the conventions we use for the version numbers of tidyverse packages.</p>
<p>But first, this is a good time to revisit a resource we first pointed out in <a href="structure.html#sec-source-package"><span>Section&nbsp;4.3</span></a>, when introducing the different states of an R package. Recall that the (unofficial) <code>cran</code> organization on GitHub provides a read-only history of all CRAN packages. For example, you can get a different view of usethis’s released versions at <a href="https://github.com/cran/usethis/" class="uri">https://github.com/cran/usethis/</a>.</p>
<p>The archive provided by CRAN itself allows you to download older versions of usethis as <code>.tar.gz</code> files, which is useful if you truly want to get your hands on the source of an older version. However, if you just want to quickly check something about a version or compare two versions of usethis, the read-only GitHub mirror is much more useful. Each commit in this repo’s history represents a CRAN release, which makes it easy to see exactly what changed: <a href="https://github.com/cran/usethis/commits/HEAD" class="uri">https://github.com/cran/usethis/commits/HEAD</a>. Furthermore, you can browse the state of all the package’s source files at any specific version, such as <a href="https://github.com/cran/usethis/tree/1.0.0">usethis’s initial release at version 1.0.0</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>This information is technically available from the repository where usethis is actually developed (<a href="https://github.com/r-lib/usethis" class="uri">https://github.com/r-lib/usethis</a>). But you have to work much harder to zoom out to the level of CRAN releases, amid the clutter of the small incremental steps in which development actually unfolds. These three different views of usethis’s evolution are all useful for different purposes:</p>
<ul>
<li><p><a href="https://cran.r-project.org/src/contrib/Archive/usethis/" class="uri">https://cran.r-project.org/src/contrib/Archive/usethis/</a></p></li>
<li><p><a href="https://github.com/cran/usethis/commits/HEAD" class="uri">https://github.com/cran/usethis/commits/HEAD</a></p></li>
<li><p><a href="https://github.com/r-lib/usethis/commits/HEAD" class="uri">https://github.com/r-lib/usethis/commits/HEAD</a></p></li>
</ul></section><section id="sec-lifecycle-version-number" class="level2" data-number="22.3"><h2 data-number="22.3" class="anchored" data-anchor-id="sec-lifecycle-version-number">
<span class="header-section-number">22.3</span> Package version number</h2>
<p>Formally, an R package version is a sequence of at least two integers separated by either <code>.</code> or <code>-</code>. For example, <code>1.0</code> and <code>0.9.1-10</code> are valid versions, but <code>1</code> and <code>1.0-devel</code> are not. Base R offers the <code>utils::package_version()</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> function to parse a package version string into a proper S3 class by the same name. This class makes it easier to do things like compare versions.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1.0"</span>, <span class="st">"0.9.1-10"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '1.0'      '0.9.1.10'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.0"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "package_version" "numeric_version"</span></span>
<span></span>
<span><span class="co"># these versions are not allowed for an R package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: invalid version specification '1'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.0-devel"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: invalid version specification '1.0-devel'</span></span>
<span></span>
<span><span class="co"># comparing package versions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.9.2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1.9"</span>, <span class="st">"1.9.2"</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"1.10"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The last examples above make it clear that R considers version <code>1.9</code> to be equal to <code>1.9.0</code> and to be less than <code>1.9.2</code>. And both <code>1.9</code> and <code>1.9.2</code> are less than <code>1.10</code>, which you should think of as version “one point ten”, not “one point one zero”.</p>
<p>If you’re skeptical that the <code>package_version</code> class is really necessary, check out this example:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="st">"2.0"</span> <span class="op">&gt;</span> <span class="st">"10.0"</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"2.0"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"10.0"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The string <code>2.0</code> is considered to be greater than the string <code>10.0</code>, because the character <code>2</code> comes after the character <code>1</code>. By parsing version strings into proper <code>package_version</code> objects, we get the correct comparison, i.e.&nbsp;that version <code>2.0</code> is less than version <code>10.0</code>.</p>
<p>R offers this support for working with package versions, because it’s necessary, for example, to determine whether package dependencies are satisfied (<a href="description.html#sec-description-imports-suggests-minium-version"><span>Section&nbsp;10.7.1</span></a>). Under-the-hood, this tooling is used to enforce minimum versions recorded like this in <code>DESCRIPTION</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Imports</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">    dplyr (&gt;= 1.0.0),</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">    tidyr (&gt;= 1.1.0)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In your own code, if you need to determine which version of a package is installed, use <code><a href="https://rdrr.io/r/utils/packageDescription.html">utils::packageVersion()</a></code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"usethis"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '2.1.6'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"usethis"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'package_version', 'numeric_version'  hidden list of 1</span></span>
<span><span class="co">#&gt;  $ : int [1:3] 2 1 6</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"usethis"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">package_version</a></span><span class="op">(</span><span class="st">"10.0"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"usethis"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="st">"10.0"</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The return value of <code><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion()</a></code> has the <code>package_version</code> class and is therefore ready for comparison to other version numbers. Note the last example where we seem to be comparing a version number to a string. How can we get the correct result without explicitly converting <code>10.0</code> to a package version? It turns out this conversion is automatic as long as one of the comparators has the <code>package_version</code> class.</p>
</section><section id="tidyverse-package-version-conventions" class="level2" data-number="22.4"><h2 data-number="22.4" class="anchored" data-anchor-id="tidyverse-package-version-conventions">
<span class="header-section-number">22.4</span> Tidyverse package version conventions</h2>
<p>R considers <code>0.9.1-10</code> to be a valid package version, but you’ll never see a version number like that for a tidyverse package. Here is our recommended framework for managing the package version number:</p>
<ul>
<li><p>Always use <code>.</code> as the separator, never <code>-</code>.</p></li>
<li><p>A released version number consists of three numbers, <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>. For version number <code>1.9.2</code>, <code>1</code> is the major number, <code>9</code> is the minor number, and <code>2</code> is the patch number. Never use versions like <code>1.0</code>. Always spell out the three components, <code>1.0.0</code>.</p></li>
<li>
<p>An in-development package has a fourth component: the development version. This should start at 9000. The number 9000 is arbitrary, but provides a clear signal that there’s something different about this version number. There are two reasons for this practice: First, the presence of a fourth component makes it easy to tell if you’re dealing with a released or in-development version. Also, the use of the fourth place means that you’re not limited to what the next released version will be. <code>0.0.1</code>, <code>0.1.0</code>, and <code>1.0.0</code> are all greater than <code>0.0.0.9000</code>.</p>
<p>Increment the development version, e.g.&nbsp;from <code>9000</code> to <code>9001</code>, if you’ve added an important feature and you (or others) need to be able to detect or require the presence of this feature. For example, this can happen when two packages are developing in tandem. This is generally the only reason that we bother to increment the development version. This makes in-development versions special and, in some sense, degenerate. Since we don’t increment the development component with each Git commit, the same package version number is associated with many different states of the package source, in between releases.</p>
</li>
</ul>
<p>The advice above is inspired in part by <a href="https://semver.org">Semantic Versioning</a> and by the <a href="https://www.x.org/releases/X11R7.7/doc/xorg-docs/Versions.html">X.Org</a> versioning schemes. Read them if you’d like to understand more about the standards of versioning used by many open source projects. But we should underscore that our practices our inspired by these schemes and are somewhat less regimented. Finally, know that other maintainers follow different philosophies on how to manage the package version number.</p>
</section><section id="backward-compatibility-and-breaking-change" class="level2" data-number="22.5"><h2 data-number="22.5" class="anchored" data-anchor-id="backward-compatibility-and-breaking-change">
<span class="header-section-number">22.5</span> Backward compatibility and breaking change</h2>
<p>The version number of your package is always increasing, but it’s more than just an incrementing counter – the way the number changes with each release can convey information about the nature of the changes. The transition from 0.3.1 to 0.3.2, which is a patch release, has a very different vibe from the transition from 0.3.2 to 1.0.0, which is a major release. A package version number can also convey information about where the package is in its lifecycle. For example, the version 1.0.0 often signals that the public interface of a package is considered stable.</p>
<p>How do you decide which type of release to make, i.e.&nbsp;which component(s) of the version should you increment? A key concept is whether the associated changes are backward compatible, meaning that pre-existing code will still “work” with the new version. We put “work” in quotes, because this designation is open to a certain amount of interpretation. A hardliner might take this to mean “the code works in exactly the same way, in all contexts, for all inputs”. A more pragmatic interpretation is that “the code still works, but could produce a different result in some edge cases”. A change that is not backward compatible is often described as a <em>breaking</em> change. Here we’re going to talk about how to assess whether a change is breaking and in section <a href="#sec-lifecycle-backward-compatibility"><span>Section&nbsp;22.7</span></a> we’ll talk about how to decide if a breaking change is worth it.</p>
<p>In practice, backward compatibility is not a clear-cut distinction. It is typical to assess the impact of a change from a few angles:</p>
<ul>
<li><p>Degree of change in behaviour. The most extreme is to make something that used to be possible into an error, i.e.&nbsp;impossible. In contrast, changes to a print method are much less significant.</p></li>
<li><p>How the changes fit into the design of the package. A change to low-level infrastructure, such as a utility that gets called in all user-facing functions, is more fraught than a change that only affects one parameter of a single function.</p></li>
<li><p>How much existing usage is affected. This is a combination of how many of your users will perceive the change and how many existing users there are to begin with.</p></li>
</ul></section><section id="major-vs-minor-vs-patch-release" class="level2" data-number="22.6"><h2 data-number="22.6" class="anchored" data-anchor-id="major-vs-minor-vs-patch-release">
<span class="header-section-number">22.6</span> Major vs minor vs patch release</h2>
<p>Recall that a version number will have one of these forms, if you’re following our conventions:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;        # released version</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;.&lt;dev&gt;  # in-development version</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If the current package version is <code>0.8.1.9000</code>, here’s our advice on how to pick the version number for the next release:</p>
<ul>
<li><p>Increment <code>patch</code>, e.g.&nbsp;<code>0.8.2</code> for a <strong>patch release</strong>: you’ve fixed bugs, but you haven’t added any significant new features. For example, if we discover a show-stopping bug shortly after a release, we would make a quick patch release with the fix. Most releases will have a patch number of 0.</p></li>
<li><p>Increment <code>minor</code>, e.g.&nbsp;<code>0.9.0</code>, for a <strong>minor release</strong>. A minor release can include bug fixes, new features, and changes that are backward compatible<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. This is the most common type of release. It’s perfectly fine to have so many minor releases that you need to use two (or even three!) digits, e.g.&nbsp;<code>1.17.0</code>.</p></li>
<li><p>Increment <code>major</code>, e.g.&nbsp;<code>1.0.0</code>, for a <strong>major release</strong>. This is best reserved for changes that are not backward compatible and that are likely to affect many users. The <code>1.0.0</code> release has special significance and typically indicates that your package is feature complete with a stable API.</p></li>
</ul>
<p>The trickiest decision you are likely to face is whether a change is “breaking” enough to deserve a major release. For example, if you make an API-incompatible change to a rarely-used part of your code, it may not make sense to increase the major number. But if you fix a bug that many people depend on (it happens!), it will feel like a breaking change to those folks. It’s conceivable that such a bug fix could merit a major release.</p>
<section id="package-version-mechanics" class="level3" data-number="22.6.1"><h3 data-number="22.6.1" class="anchored" data-anchor-id="package-version-mechanics">
<span class="header-section-number">22.6.1</span> Package version mechanics</h3>
<p>Your package should start with version number <code>0.0.0.9000</code>. <code><a href="https://usethis.r-lib.org/reference/create_package.html">usethis::create_package()</a></code> starts with this version, by default.</p>
<p>From that point on, you can use <code><a href="https://usethis.r-lib.org/reference/use_version.html">usethis::use_version()</a></code> to increment the package version. When called interactively, with no argument, it presents a helpful menu:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html">use_version</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Current version is 0.1.</span></span>
<span><span class="co">#&gt; What should the new version be? (0 to exit) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1: major --&gt; 1.0</span></span>
<span><span class="co">#&gt; 2: minor --&gt; 0.2</span></span>
<span><span class="co">#&gt; 3: patch --&gt; 0.1.1</span></span>
<span><span class="co">#&gt; 4:   dev --&gt; 0.1.0.9000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Selection: </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="sec-lifecycle-backward-compatibility" class="level2" data-number="22.7"><h2 data-number="22.7" class="anchored" data-anchor-id="sec-lifecycle-backward-compatibility">
<span class="header-section-number">22.7</span> Backward compatibility</h2>
<p>The big difference between major and minor releases is whether or not the code is backward compatible. This difference is a bit academic in the R community, because of the way most users manage package installation. If we’re being honest, most R users don’t manage package versions in a very intentional way. Given the way <code><a href="https://rdrr.io/r/utils/update.packages.html">update.packages()</a></code> and <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> work, it’s quite easy to upgrade a package to a new major version without really meaning to, especially for dependencies of the target package. This, in turn, can lead to unexpected exposure to breaking changes in code that previously worked. This unpleasantness has implications both for users and for maintainers.</p>
<p>If it’s important to protect a data product against change in its R package dependencies, we recommend the use of a project-specific package library. In particular, we like to implement this approach using the <a href="https://rstudio.github.io/renv/">renv package</a>. This supports a lifestyle where a user’s default package library is managed in the usual, somewhat haphazard way. But any project that has a specific, higher requirement for reproducibility is managed with renv. This keeps package updates triggered by work in project A from breaking the code in project B and also helps with collaboration and deployment.</p>
<p>We suspect that package-specific libraries and tools like renv are currently under-utilized in the R world. That is, lots of R users still use just one package library. Therefore, package maintainers still need to exercise considerable caution and care when they introduce breaking changes, regardless of what’s happening with the version number. In section ??, we describe how tidyverse packages approach this, supported by tools in the lifecycle package.</p>
<p>As with dependencies (<a href="dependencies-mindset-background.html#sec-dependencies-pros-cons"><span>Section&nbsp;11.2</span></a>), we find that extremism isn’t a very productive stance. Extreme resistance to breaking change puts a significant drag on ongoing development and maintenance. Backward compatible code tends to be harder to work with because of the need to maintain multiple paths to support functionality from previous versions. The harder you strive to maintain backward compatibility, the harder it is to develop new features or fix old mistakes. This, in turn, can discourage adoption by new users and can make it harder to recruit new contributors. Be concerned about backward compatibility, but don’t let it paralyze you.</p>
<p>The importance of backward compatibility is directly proportional to the number of people using your package: you are trading your time and pain for that of your users. There are good reasons to make backward incompatible changes. Once you’ve decided it’s necessary, your main priority is to use a humane process that is respectful of your users.</p>
</section><section id="lifecycle-stages-and-tools-and-package" class="level2" data-number="22.8"><h2 data-number="22.8" class="anchored" data-anchor-id="lifecycle-stages-and-tools-and-package">
<span class="header-section-number">22.8</span> Lifecycle stages and tools and package</h2>
<p><em>obviously the name of this section need to change</em></p>
<p>The tidyverse team’s approach to package evolution has become more structured and deliberate over the years. The system relies on two major components:</p>
<ul>
<li><p>Lifecycle stages, which can be applied at different levels, i.e.&nbsp;to an individual argument or function or to an entire package.</p></li>
<li><p>Deprecation tools and conventions, which we use when transitioning a function from one lifecycle stage to another.</p></li>
</ul>
<p>The lifecycle package is the primary home for these tools and its documentation is a great place to learn more (<a href="https://lifecycle.r-lib.org/index.html">lifecycle.r-lib.org</a>). We won’t duplicate too much of those details here. Instead, we highlight the general principles of lifecycle management and present some specific examples of successful lifecycle “moves”.</p>
<section id="lifecycle-stages-and-badges" class="level3" data-number="22.8.1"><h3 data-number="22.8.1" class="anchored" data-anchor-id="lifecycle-stages-and-badges">
<span class="header-section-number">22.8.1</span> Lifecycle stages and badges</h3>
<p>The four lifecycle stages are:</p>
<ul>
<li><p>Stable. This is the default stage and signals that users should feel comfortable relying on a function or package. Breaking changes should be rare and should happen gradually, giving users sufficient time and guidance to adapt their usage.</p></li>
<li><p>Experimental. This is appropriate when a function is first introduced and the maintainer reserves the right to change it without much of a deprecation process.</p></li>
<li><p>Deprecated. This applies to functionality that is slated for removal. Initially, it still works, but triggers a deprecation warning with information about preferred alternatives. After a suitable amount of time and with an appropriate version change, such functions are typically removed.</p></li>
<li><p>Superseded. This is a softer version of deprecated, where legacy functionality is preserved as if in a time capsule. Superseded functions receive only minimal maintenance, such as critical bug fixes.</p></li>
</ul>
<p>You can get much more detail in <code><a href="https://lifecycle.r-lib.org/articles/stages.html">vignette("stages", package = "lifecycle")</a></code>.</p>
<p>The lifecycle stage is most often communicated through a badge. If you’d like to use lifecycle badges, call <code><a href="https://usethis.r-lib.org/reference/use_lifecycle.html">usethis::use_lifecycle()</a></code> to do some one-time setup:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_lifecycle.html">use_lifecycle</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Adding 'lifecycle' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; • Refer to functions with `lifecycle::fun()`</span></span>
<span><span class="co">#&gt; ✔ Adding '@importFrom lifecycle deprecated' to 'R/somepackage-package.R'</span></span>
<span><span class="co">#&gt; ✔ Writing 'NAMESPACE'</span></span>
<span><span class="co">#&gt; ✔ Creating 'man/figures/'</span></span>
<span><span class="co">#&gt; ✔ Copied SVG badges to 'man/figures/'</span></span>
<span><span class="co">#&gt; • Add badges in documentation topics by inserting one of:</span></span>
<span><span class="co">#&gt;   #' `r lifecycle::badge('experimental')`</span></span>
<span><span class="co">#&gt;   #' `r lifecycle::badge('superseded')`</span></span>
<span><span class="co">#&gt;   #' `r lifecycle::badge('deprecated')`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This leaves you in a position to use lifecycle badges in help topics (and to use lifecycle functions, which we discuss in ??). For a function, include the badge in its <code>@description</code> block. Here’s how we indicate that <code><a href="https://dplyr.tidyverse.org/reference/top_n.html">dplyr::top_n()</a></code> is “superseded”:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Select top (or bottom) n rows (by value)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' `r lifecycle::badge("superseded")`</span></span>
<span><span class="co">#' `top_n()` has been superseded in favour of [slice_min()]/[slice_max()]....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a function argument, include the badge in the <code>@param</code> tag. Here’s how the deprecation of <code>readr::write_file(path =)</code> is indicated:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @param path `r lifecycle::badge("deprecated")` Use the `file` argument</span></span>
<span><span class="co">#'   instead.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Call <code><a href="https://usethis.r-lib.org/reference/badges.html">usethis::use_lifecycle_badge()</a></code> if you want to use a badge in README to indicate the lifecycle of an entire package.</p>
<p>If the lifecycle of a package is “stable”, we might not bother with a badge, as “stable” is the assumed default. Similarly, we typically only use a badge for a function or argument if its stage differs from the overall stage of the package.</p>
</section><section id="deprecating-a-function-or-argument" class="level3" data-number="22.8.2"><h3 data-number="22.8.2" class="anchored" data-anchor-id="deprecating-a-function-or-argument">
<span class="header-section-number">22.8.2</span> Deprecating a function or argument</h3>
<p>If you’re going to remove a function or argument, it’s usually best to do so in phases. Deprecation is a general term for the situation where something is explicitly discouraged, but it has not yet been removed.</p>
<p>The <code><a href="https://lifecycle.r-lib.org/reference/deprecate_soft.html">lifecycle::deprecate_warn()</a></code> function can be used inside a function to inform your user that they’re using a deprecated feature and, ideally, to let them know about the preferred alternative.</p>
<div class="cell" data-r.options="{&quot;lifecycle:::calling_package&quot;:&quot;somepackage&quot;,&quot;lifecycle_verbosity&quot;:&quot;warning&quot;}">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># new function</span></span>
<span><span class="va">add3</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span> <span class="op">+</span> <span class="va">z</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># old function</span></span>
<span><span class="va">plus3</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"plus3()"</span>, <span class="st">"add3()"</span><span class="op">)</span></span>
<span>  <span class="fu">add3</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">plus3</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `plus3()` was deprecated in somepackage 1.0.0.</span></span>
<span><span class="co">#&gt; ℹ Please use `add3()` instead.</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At this point, a user who calls <code>plus3()</code> sees a warning explaining that the function has a new name, but we go ahead and call <code>add3()</code> with their inputs. Pre-existing code still “works”. In some future major release, <code>plus3()</code> could be removed entirely.</p>
<p>When you’re deprecating an argument, you can also use <code>lifecycle::deprecate()</code> as its default value. Here we continue an example from above, i.e.&nbsp;the switch from <code>path</code> to <code>file</code> in <code><a href="https://readr.tidyverse.org/reference/read_file.html">readr::write_file()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">write_file</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                       <span class="va">file</span>,</span>
<span>                       <span class="va">append</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                       <span class="va">path</span> <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu">is_present</span><span class="op">(</span><span class="va">path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">deprecate_warn</span><span class="op">(</span><span class="st">"1.4.0"</span>, <span class="st">"write_file(path = )"</span>, <span class="st">"write_file(file = )"</span><span class="op">)</span></span>
<span>    <span class="va">file</span> <span class="op">&lt;-</span> <span class="va">path</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">...</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TODO: Say more about <code>deprecated()</code>. What’s the point? Visual signal to the user + works with <code><a href="https://lifecycle.r-lib.org/reference/deprecated.html">lifecycle::is_present()</a></code>. Why we think it’s OK to call it as <code>deprecated()</code> and not <code><a href="https://lifecycle.r-lib.org/reference/deprecated.html">lifecycle::deprecated()</a></code>.</p>
<p>Here’s a hypothetical blueprint for removing a function <code>fun()</code>:</p>
<ul>
<li><p>Package version <code>0.5.0</code>: <code>fun()</code> exists. The lifecycle stage of the package is “experimental”, as indicated by the pre-<code>1.0.0</code> version number and, perhaps, a package-level badge. The lifecycle stage of <code>fun()</code> is also “experimental”, by extension.</p></li>
<li><p>Package version <code>0.6.0</code>: The deprecation process of <code>fun()</code> begins. We insert in its <code>@description</code> to place a badge in its help topic. In the body of <code>fun()</code>, we add a call to <code><a href="https://lifecycle.r-lib.org/reference/deprecate_soft.html">lifecycle::deprecate_warn()</a></code> to inform users about the situation.</p></li>
<li><p>Package version <code>0.7.0</code> or <code>1.0.0</code>: <code>fun()</code> is removed. Whether this happens in a minor or major release will depend on the context, i.e.&nbsp;how widely used this package and function are.</p></li>
</ul>
<p>TODO: mention <code><a href="https://rdrr.io/r/base/Deprecated.html">.Deprecated()</a></code> as the base way. Also maybe mention <code>!missing(x)</code> as a base alternative to <code>deprecated()</code> + <code>is_present()</code>.</p>
<p>TODO: update everything after this point.</p>
<ul>
<li>
<p>If you’re deprecating a lot of code, it can be useful to add a helper function. For example, ggplot2 has <code>gg_dep</code> which automatically displays a message, warning or error, depending on how much the version number has changed.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">gg_dep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">version</span>, <span class="va">msg</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">as.package_version</a></span><span class="op">(</span><span class="va">version</span><span class="op">)</span></span>
<span>  <span class="va">cv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If current major number is greater than last-good major number, or if</span></span>
<span>  <span class="co"># current minor number is more than 1 greater than last-good minor number,</span></span>
<span>  <span class="co"># return an error.</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span><span class="op">]</span>  <span class="op">||</span>  <span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Defunct; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span>,</span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If minor number differs by one, give a warning</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Deprecated; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span>,</span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># If only subminor number is greater, provide a message</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cv</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">v</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">msg</span>, <span class="st">" (Deprecated; last used in version "</span>, <span class="va">version</span>, <span class="st">")"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li><p>Significant changes to an existing function requires planning, including making gradual changes over multiple versions. Try and develop a sequence of transformations where each change can be accompanied by an informative error message.</p></li>
<li>
<p>If you want to use functionality in a new version of another package, don’t make it a hard install-time dependency in the <code>DESCRIPTION</code> (forcing your users to upgrade that package might break other code). Instead check for the version at run-time:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="st">"1.0.0"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"ggplot2 &gt;= 1.0.0 needed for this function."</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is also useful if you’re responding to changes in one of your dependencies - you’ll want to have a version that will work both before and after the change. This will allow you to submit it to CRAN at any time, even before the other package. Doing this may generate some <code>R CMD check</code> notes. For example:</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"foo"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="st">"1.0.0"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">foo</span><span class="fu">::</span><span class="fu">baz</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu">foo</span><span class="fu">::</span><span class="fu">bar</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If <code>baz</code> doesn’t exist in foo version 1.0.0, you’ll get a note that it doesn’t exist in foo’s namespace. Just explain that you’re working around a difference between versions in your submission to CRAN.</p>
</li>
</ul>


</section></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>It’s unusual for an initial release to be version 1.0.0, but remember that usethis was basically carved out of a very mature package (devtools).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>We can call <code><a href="https://rdrr.io/r/base/numeric_version.html">package_version()</a></code> directly here, but in package code, you should use the <code>utils::package_version()</code> form and list the utils package in <code>Imports</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>As with <code><a href="https://rdrr.io/r/base/numeric_version.html">package_version()</a></code>, in package code, you should use the <code><a href="https://rdrr.io/r/utils/packageDescription.html">utils::packageVersion()</a></code> form and list the utils package in <code>Imports</code>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>For some suitably pragmatic definition of “backward compatible”.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./software-development-practices.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Software development practices</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./release.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>